try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="17618321824302d6d31c39f"}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8729],{214:(e,t,a)=>{"use strict";a.d(t,{AE:()=>p,BO:()=>j,J6:()=>g,KK:()=>x,QZ:()=>f,Qe:()=>c,Um:()=>E,WW:()=>m,Ws:()=>_,ZG:()=>N,ZS:()=>h,aR:()=>d,f$:()=>u,g4:()=>w,pk:()=>b,vD:()=>v,yw:()=>y,zJ:()=>o});var r=a(83220),s=a(92918),l=a(15365),i=a(680),n=a(72632);let o=()=>(0,s.Tp)(i.x.ModelSelector),d=()=>(0,s.Tp)(i.x.InAppTeaching),c=()=>(0,s.Tp)(i.x.LaunchpadExamplePrompts),u=()=>(0,s.Tp)(i.x.AIGateway),m=()=>{let e=(0,l.WW)(),t=(0,s.Tp)(i.x.DownloadZip),a=(0,r.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:o}=(0,n.cb)(null==a?void 0:a.plan);return e||t||o},p=()=>(0,s.Tp)(i.x.Embed),h=()=>(0,s.Tp)(i.x.SetCreditLimit),f=()=>(0,s.Tp)(i.x.ChatSuggestions),g=()=>(0,s.Tp)(i.x.McpPlugins),v=()=>(0,s.Tp)(i.x.DashboardV2),x=()=>(0,s.Tp)(i.x.EnableRemixWithSupabase),y=()=>{var e;return null!=(e=(0,s.Tp)(i.x.AutoTopup))&&e},b=()=>(0,s.Tp)(i.x.ThemeSelectorTool),j=()=>(0,s.Tp)(i.x.CustomDomainsV2),_=()=>(0,s.Tp)(i.x.ChatFullscreen),w=()=>(0,s.Tp)(i.x.ProjectAccessRequests),N=()=>(0,s.Tp)(i.x.DesignPanel),E=()=>(0,s.Tp)(i.x.DesignLibraries)},3140:(e,t,a)=>{"use strict";a.d(t,{M:()=>g,s:()=>f});var r=a(77145),s=a(98251),l=a(13410),i=a(95661),n=a(19620),o=a(15822),d=a(40702);let c=null,u="30uiF44drV1UnRmUEUVhfQ2L500",m="https://rs.lovable.dev",p=u&&m;u&&m||n.logging.info("Missing NEXT_PUBLIC_RUDDERSTACK_WRITE_KEY or NEXT_PUBLIC_RUDDERSTACK_DATA_PLANE_URL in env; RudderStack will be disabled");let h=(0,i.createContext)(null);function f(e){let{children:t}=e,[a]=(0,i.useState)(()=>!p||o.W?null:(c||(n.logging.log("Initializing RudderStack Analytics"),(c=new s.p).load(u,m,{integrations:{All:!0},configUrl:"https://rs.lovable.dev/sourceConfig",destSDKBaseURL:"https://rs.lovable.dev/v3/modern/js-integrations"})),c)),{authUser:f}=(0,d.Z2)(),g=(0,d.Nm)(),v=(0,l.usePathname)();return(0,i.useEffect)(()=>{a&&((null==f?void 0:f.uid)?(n.logging.debug("RudderStack: Identifying user",{userId:f.uid}),a.identify(f.uid,{email:g,name:f.displayName})):(n.logging.debug("RudderStack: Resetting user session"),a.reset()))},[null==f?void 0:f.uid,g,null==f?void 0:f.displayName,a]),(0,i.useEffect)(()=>{a&&a.page()},[v,a]),(0,r.jsx)(h.Provider,{value:a,children:t})}function g(){return(0,i.useContext)(h)}},11070:(e,t,a)=>{"use strict";a.d(t,{K:()=>h,N:()=>f});var r=a(82694),s=a(63851),l=a(19620),i=a(72632),n=a(51573),o=a(69850),d=a(62548),c=a(74507),u=a(83473),m=a(32736);let p=async(e,t,a)=>{try{let r=(0,s.getGoApi)();await r.post("/workspaces/".concat(e,"/campaigns/").concat(t,"/redeem/").concat(a));return}catch(s){if(l.logging.error("Failed to redeem campaign reward",{error:s,workspaceId:e,campaignName:t,rewardCode:a}),s instanceof Error)throw s;let r=Error("Unknown error occurred while redeeming reward");throw r.originalError=s,r}},h={key:m.A.CLAIM_REWARD,paramsSchema:r.Ik({campaignId:r.Yj().regex(/^[a-zA-Z0-9-]+$/),rewardCode:r.Yj().regex(/^[a-zA-Z0-9-]+$/)}),execute:async(e,t)=>{let{campaignId:a,rewardCode:r}=e,{workspaces:s,selectedWorkspaceId:l}=t,d=l;return(!d&&s&&s.length>0&&(d=(e=>{if(1===e.length){let t=e[0],{isPaidPlan:a}=(0,i.cb)(t.plan);if(!a)return t.id}return null})(s)),d)?(await p(d,a,r),{redirectUrl:"/?change_type=upgrade&plan_type=ktlo&payment_status=success",invalidateQueries:[o.workspaceKeys.all],workspaceUpdate:{workspaceId:d,updates:{plan:n.VL.KTLO}}}):{redirectUrl:"/lp/".concat(a,"?reward_code=").concat(r)}}},f={key:m.A.REMIX_PROJECT,paramsSchema:r.Ik({projectId:r.Yj().regex(/^[a-zA-Z0-9_-]+$/),initialMessage:r.Ik({id:r.Yj(),message:r.Yj(),files:r.YO(r.Ik({file_id:r.Yj(),type:r.fc(d.g),file_name:r.Yj().optional(),mime_type:r.Yj().optional()})).optional(),selected_elements:r.YO(r.bz()).length(0),chat_only:r.zM().optional()}).optional()}),execute:async(e,t)=>{let{projectId:a}=e,{workspaces:r,selectedWorkspaceId:i}=t;try{var n;let t,d=(0,s.getGoApi)(),u=0;for(;u<3;)try{t=await d.get("/permissions?projectId=".concat(a));break}catch(e){if(++u>=3)return l.logging.error("Failed to fetch permissions after retries",{error:e,projectId:a,retries:u}),{redirectUrl:"/projects/".concat(a)};await new Promise(e=>setTimeout(e,1e3*u))}let m=t.includes(c.eZ.EditProject),p=t.includes(c.eZ.RemixProject);if(m)return{redirectUrl:"/projects/".concat(a)};if(!p)return{redirectUrl:"/"};let h=i||(null==r||null==(n=r[0])?void 0:n.id);if(!h)return l.logging.error("No workspace available for remix",{projectId:a}),{redirectUrl:"/"};let f={include_history:!1,include_custom_knowledge:!1,workspace_id:h,initial_message:e.initialMessage},g=await d.post("/projects/".concat(a,"/remix"),f);return{redirectUrl:"/projects/".concat(g.project_id,"?remixed=true"),invalidateQueries:[o.gO.all]}}catch(e){return l.logging.error("Failed to execute remix project action",{error:e,projectId:a}),(0,u.Ni)(e),{redirectUrl:"/projects/".concat(a)}}}}},14618:(e,t,a)=>{"use strict";a.d(t,{l:()=>l});var r=a(95661),s=a(65616);let l=()=>({upload:(0,r.useCallback)(async e=>{let{fileName:t,file:a,options:r,continueOnError:l=!0}=e;return(0,s.QM)(t,a,r,l)},[]),download:(0,r.useCallback)(async e=>(0,s.PE)(e),[])})},15822:(e,t,a)=>{"use strict";a.d(t,{W:()=>s});let r="undefined"!=typeof navigator,s=r&&!0===navigator.webdriver||r&&navigator.userAgent.includes("HeadlessChrome")},16838:(e,t,a)=>{Promise.resolve().then(a.bind(a,71450))},21789:(e,t,a)=>{"use strict";a.d(t,{H:()=>i,k:()=>n});var r=a(77145),s=a(95661);let l=(0,s.createContext)(null),i=()=>(0,s.useContext)(l),n=e=>{let{children:t,searchParams:a}=e;return(0,r.jsx)(l.Provider,{value:a,children:t})}},27549:(e,t,a)=>{"use strict";a.d(t,{C5:()=>x,MJ:()=>g,Rr:()=>v,eI:()=>h,lR:()=>f,lV:()=>d,zB:()=>u});var r=a(77145),s=a(55851),l=a(95661),i=a(52037),n=a(77563),o=a(56024);let d=i.Op,c=l.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(i.xI,{...t})})},m=()=>{let e=l.useContext(c),t=l.useContext(p),{getFieldState:a,formState:r}=(0,i.xW)(),s=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...s}},p=l.createContext({}),h=l.forwardRef((e,t)=>{let{className:a,...s}=e,i=l.useId();return(0,r.jsx)(p.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",a),...s})})});h.displayName="FormItem";let f=l.forwardRef((e,t)=>{let{className:a,...s}=e,{error:l,formItemId:i}=m();return(0,r.jsx)(n.Label,{ref:t,className:(0,o.cn)(l&&"",a),htmlFor:i,...s})});f.displayName="FormLabel";let g=l.forwardRef((e,t)=>{let{...a}=e,{error:l,formItemId:i,formDescriptionId:n,formMessageId:o}=m();return(0,r.jsx)(s.DX,{ref:t,id:i,"aria-describedby":l?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!l,...a})});g.displayName="FormControl";let v=l.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:l}=m();return(0,r.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});v.displayName="FormDescription";let x=l.forwardRef((e,t)=>{let{className:a,children:s,...l}=e,{error:i,formMessageId:n}=m(),d=i?String(null==i?void 0:i.message):s;return d?(0,r.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-xs font-medium text-destructive-primary",a),...l,children:d}):null});x.displayName="FormMessage"},32313:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(77145),s=a(95661),l=a(56024);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex w-full rounded-md border border-input bg-muted px-2 py-2 text-sm transition-colors duration-150 ease-in-out placeholder:text-muted-foreground hover:border-ring/20 focus-visible:border-ring focus-visible:outline-none disabled:cursor-not-allowed disabled:border-input disabled:opacity-50",a),ref:t,...s})});i.displayName="Textarea"},32736:(e,t,a)=>{"use strict";a.d(t,{A:()=>s,M:()=>r});var r=function(e){return e.EXISTING_USER_LOGIN="existingUserLogin",e.SIGNUP="signup",e.SEGMENTATION="segmentation",e}({}),s=function(e){return e.CLAIM_REWARD="claimReward",e.REMIX_PROJECT="remixProject",e}({})},33895:(e,t,a)=>{"use strict";a.d(t,{I7:()=>i,Pf:()=>l,y:()=>n});var r=a(69850),s=a(99989);async function l(e,t){let a=s.y.workspaceMemberships({workspaceId:t});await e.cancelQueries({queryKey:a.queryKey})}function i(e,t,a,r,l,i){var n,o;let d=s.y.workspaceMemberships({workspaceId:t}),c=e.getQueryData(d.queryKey);if(c&&e.setQueryData(d.queryKey,{...c,members:r(c.members),total:i?i(c.total):c.total,limit:c.limit,offset:null!=(n=c.offset)?n:0,has_more:c.has_more}),a){let n=s.y.searchWorkspaceMemberships({workspaceId:t,params:a}),d=e.getQueryData(n.queryKey);if(d){let t=l?l(d.members):r(d.members);e.setQueryData(n.queryKey,{...d,members:t,total:i?i(d.total):d.total,limit:d.limit,offset:null!=(o=d.offset)?o:0,has_more:d.has_more})}}}function n(e,t,a,l){let i={refetchType:(null==l?void 0:l.refetch)?"active":"none"};if(null==l?void 0:l.invalidateAll){e.invalidateQueries({queryKey:[...r.workspaceKeys.detail(t),"memberships"],...i}),e.invalidateQueries({queryKey:r.workspaceKeys.detail(t),...i});return}e.invalidateQueries({queryKey:s.y.workspaceMemberships({workspaceId:t}).queryKey,...i}),a&&e.invalidateQueries({queryKey:s.y.searchWorkspaceMemberships({workspaceId:t,params:a}).queryKey,...i})}},43987:(e,t,a)=>{"use strict";a.d(t,{M:()=>o});var r=a(77145);a(95661);var s=a(72632),l=a(56024),i=a(27458),n=a(58295);let o=e=>{let{workspace:t,requiredPlanCategory:a,className:o,...d}=e,c=(0,s.TP)(a),u=(0,s._R)(t.plan),m=(0,s.m6)(t.plan),p=!(0,s.my)(m,a);return(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsxs)("div",{className:(0,l.cn)("flex h-5 cursor-pointer items-center gap-1 rounded-sm bg-brand-twilight px-2 py-px text-xs font-medium text-brand-twilight-foreground hover:bg-brand-twilight/80",o),...d,children:[(0,r.jsx)(i.gu,{name:"LovableMonotone",className:"h-3 w-3"}),(0,r.jsx)("p",{className:(0,l.cn)("flex",{hidden:!p}),children:c})]})}),(0,r.jsx)(n.ZI,{children:p?(0,r.jsxs)("p",{children:["Upgrade to ",c," to access this feature."]}):(0,r.jsxs)("p",{children:["Included in ",u]})})]})}},49522:(e,t,a)=>{"use strict";a.d(t,{KU:()=>d,BK:()=>m});var r=a(95661),s=a(51762),l=a(77145),i=a(49974),n=a(51433),o=a(54557),d=function(e){return e.BIZ_TEMPLATES="BIZ_TEMPLATES",e.BIZ_PERSONAL_PROJECT="BIZ_PERSONAL_PROJECT",e.BIZ_SSO="BIZ_SSO",e.PRO_SUPPORT="PRO_SUPPORT",e.PRO_VIEWER_INVITE_LINK="PRO_VIEWER_INVITE_LINK",e.PRO_SEND_ADMIN_INVITE="PRO_SEND_ADMIN_INVITE",e.PRO_SEND_VIEWER_INVITE="PRO_SEND_VIEWER_INVITE",e.PRO_CHANGE_VIEWER_ROLE="PRO_CHANGE_VIEWER_ROLE",e.PRO_CHANGE_ADMIN_ROLE="PRO_CHANGE_ADMIN_ROLE",e.PRO_DOMAIN_CONNECT="PRO_DOMAIN_CONNECT",e.PRO_HIDE_BADGE="PRO_HIDE_BADGE",e.PRO_PRIVATE_PROJECT="PRO_PRIVATE_PROJECT",e.PRO_CHANGE_CLOUD_INSTANCE_SIZE="PRO_CHANGE_CLOUD_INSTANCE_SIZE",e.PRO_SEND_ADMIN_COLLABORATOR="PRO_SEND_ADMIN_COLLABORATOR",e.PRO_SEND_VIEWER_COLLABORATOR="PRO_SEND_VIEWER_COLLABORATOR",e.PRO_CHANGE_COLLABORATOR_TO_ADMIN="PRO_CHANGE_COLLABORATOR_TO_ADMIN",e.PRO_CHANGE_COLLABORATOR_TO_VIEWER="PRO_CHANGE_COLLABORATOR_TO_VIEWER",e}({});let c={BIZ_TEMPLATES:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to use templates.",targetPlanCategory:"biz"},BIZ_PERSONAL_PROJECT:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to make a project personal.",targetPlanCategory:"biz"},BIZ_SSO:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to add SSO providers.",targetPlanCategory:"biz"},PRO_SUPPORT:{title:"Upgrade to Pro",subtitle:"You need to be on a paid plan to access direct support.",targetPlanCategory:"pro"},PRO_VIEWER_INVITE_LINK:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to create a viewer invite link.",targetPlanCategory:"pro"},PRO_SEND_VIEWER_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite viewers.",targetPlanCategory:"pro"},PRO_SEND_ADMIN_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite admins.",targetPlanCategory:"pro"},PRO_CHANGE_ADMIN_ROLE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the role to admin.",targetPlanCategory:"pro"},PRO_CHANGE_VIEWER_ROLE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the role to viewer.",targetPlanCategory:"pro"},PRO_DOMAIN_CONNECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to connect a domain.",targetPlanCategory:"pro"},PRO_HIDE_BADGE:{title:"Upgrade to Pro",subtitle:'You need to be on a pro plan to hide the "Edit with Lovable" badge.',targetPlanCategory:"pro"},PRO_PRIVATE_PROJECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to make a project private.",targetPlanCategory:"pro"},PRO_CHANGE_CLOUD_INSTANCE_SIZE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the cloud instance size.",targetPlanCategory:"pro"},PRO_SEND_ADMIN_COLLABORATOR:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite admin collaborators.",targetPlanCategory:"pro"},PRO_SEND_VIEWER_COLLABORATOR:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite viewer collaborators.",targetPlanCategory:"pro"},PRO_CHANGE_COLLABORATOR_TO_ADMIN:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change a collaborator's role to admin.",targetPlanCategory:"pro"},PRO_CHANGE_COLLABORATOR_TO_VIEWER:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change a collaborator's role to viewer.",targetPlanCategory:"pro"}},u=e=>{let{scenario:t}=e,a=c[t],{currentPlan:r}=(0,i.et)(),s=(0,o.Y)({currentPlan:r,targetPlanCategory:a.targetPlanCategory});return(0,l.jsx)(n.n,{targetPlan:s[0],availablePlans:s,title:a.title,subtitle:a.subtitle,showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!0,showPlanDropdown:!1})},m=()=>{let e=(0,s.f)(u);return(0,r.useCallback)(t=>{e({childProps:{onClose:()=>e(!1),scenario:t}})},[e])}},50420:(e,t,a)=>{"use strict";a.d(t,{N:()=>K,U:()=>Y});var r=a(77145),s=a(9898),l=a(18502),i=a(87299),n=a(6698),o=a(52037),d=a(31088),c=a(82694),u=a(40702),m=a(51374),p=a(49493),h=a(57841),f=a(94123),g=a(73893),v=a(26158),x=a(52811),y=a(19695),b=a(20247),j=a(27549),_=a(69730),w=a(6397),N=a(81635),E=a(32313),C=a(92386),k=a(95661),I=a(72632),S=a(83473),O=a(63851),P=a(680),R=a(214),A=a(53792),T=a(99989),L=a(74507),D=a(13410),U=a(83220),M=a(14618),F=a(65616),V=a(69850),W=a(56024);let B=["image/png","image/jpeg","image/jpg","image/webp"],G=e=>{let{workspace:t,className:a}=e,{authUser:s}=(0,u.Z2)(),l=(0,O.getGoApi)(),{upload:o}=(0,M.l)(),c=(0,i.jE)(),m=(0,k.useRef)(null),p=()=>{m.current&&(m.current.value="")},{mutateAsync:h,isPending:f}=(0,n.n)({mutationFn:async e=>{let{file:a,workspaceId:r}=e;if(!s)throw Error("You must be logged in to upload files");await o({fileName:a.name,file:a,options:{maxFileSize:10240,maxDimension:200},continueOnError:!1});let{url:i}=await (0,F.QN)({dir_name:s.uid,file_name:a.name});return await l.put("/user/workspaces/".concat(t.id),{image_url:i})},onSuccess:(e,t)=>{d.toast.success("Updated workspace avatar",{description:"Succesfully uploaded new workspace avatar"}),c.invalidateQueries({queryKey:V.workspaceKeys.all}),p()},onError:()=>{d.toast.error("Failed to update workspace avatar",{description:"Please try again"}),p()}}),g=async e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];r&&await h({file:r,workspaceId:t.id})};return(0,r.jsxs)(x.$,{variant:"secondary",size:"icon-sm",className:(0,W.cn)("absolute -bottom-1 -right-2 h-5 w-5 rounded-sm border disabled:opacity-100",a),type:"button",disabled:f,onClick:()=>{var e;null==(e=m.current)||e.click()},children:[(0,r.jsx)("input",{type:"file",className:"hidden",accept:B.join(","),onChange:g,disabled:f,ref:m}),(0,r.jsx)(_.A,{name:f?"progress_activity":"pen_top_right_square",size:"xsmall",className:f?"animate-spin":""})]})},z=c.Ik({name:c.Yj().min(1,"Workspace name is required"),description:c.Yj().optional(),dataOptOut:c.zM().optional(),shareSampleDataWithLLMs:c.zM().optional(),defaultMonthlyMemberCreditLimit:c.KC([c.ai().positive("Credit limit must be a positive number"),c.ch(),c.Vx()]).optional(),preventEditorInvite:c.zM().optional(),defaultProjectVisibility:c.k5(["public","private","draft"]).optional()}),K=e=>{var t,a,i,d,c,u;let{workspace:p,membership:S}=e,{EditWorkspaceSettings:M,LeaveWorkspace:F}=L.eZ,{SetCreditLimit:V}=P.x,{data:W,isLoading:B}=(0,l.I)({...T.y.searchWorkspaceMemberships({workspaceId:p.id,params:{query:"",status:"active",roles:["owner"],limit:2}}),enabled:!!p.id&&(null==S?void 0:S.role)==="owner"}),K=null!=(t=null==W?void 0:W.total)?t:1,q=(null==S?void 0:S.role)==="owner",H=q&&(B||K<=1),{permitted:Q}=(0,m.J)(M),Z=(e=>(0,k.useMemo)(()=>{let t=null==e?void 0:e.default_project_visibility;if(t)return t;let{isFreeOrInactivePlan:a}=(0,I.cb)(null==e?void 0:e.plan);return a?"public":"private"},[null==e?void 0:e.default_project_visibility,null==e?void 0:e.plan]))(p),$=(0,o.mN)({defaultValues:{name:null!=(a=p.name)?a:"",description:null!=(i=p.description)?i:"",dataOptOut:null!=(d=p.data_opt_out)?d:void 0,shareSampleDataWithLLMs:null==(c=p.share_sample_data_with_llms)||c,defaultMonthlyMemberCreditLimit:null!=(u=p.default_monthly_member_credit_limit)?u:void 0,preventEditorInvite:(()=>{var e;return!(null==(e=p.editor_can_invite)||e)})(),defaultProjectVisibility:Z},resolver:(0,s.u)(z)}),{leaveWorkspace:J,isLeavingWorkspace:X}=function(){let{setCurrentWorkspaceId:e}=(0,U.Dx)(),t=(0,D.useRouter)(),{mutateAsync:a,isPending:r}=(0,n.n)({mutationFn:async e=>(0,O.getGoApi)().post("/user/workspaces/".concat(e,"/leave")),onSuccess:async()=>{e(null),t.push("/")}});return{leaveWorkspace:a,isLeavingWorkspace:r}}(),{updateWorkspace:ee,isUpdatingWorkspace:et}=Y({form:$,workspaceId:p.id}),{isBizPlan:ea,isEnterprisePlan:er}=(0,I.cb)(p.plan),es=(0,R.ZS)();return(0,r.jsx)(v.Pt,{title:"Workspace Settings",value:"workspace",description:"Workspaces allow you to collaborate on projects in real time.",docsLink:"https://docs.lovable.dev/user-guides/teams",children:(0,r.jsx)(j.lV,{...$,children:(0,r.jsxs)("form",{className:"flex w-full flex-col gap-6",onSubmit:$.handleSubmit(e=>{ee({...e,editor_can_invite:void 0!==e.preventEditorInvite?!e.preventEditorInvite:void 0})}),children:[(0,r.jsx)(g.m,{label:"Workspace Avatar",description:"Set an avatar for your workspace.",mobileLayout:"horizontal",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.z,{className:"h-10 w-10",workspace:p}),(0,r.jsx)(f.E,{permission:M,children:(0,r.jsx)(G,{workspace:p})})]})}),(0,r.jsx)(g.m,{label:"Workspace Name",description:"Your full workspace name, as visible to others.",children:(0,r.jsx)(j.zB,{control:$.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(j.eI,{className:"w-full",children:[(0,r.jsx)(j.MJ,{children:(0,r.jsx)(y.Q,{showTooltip:!Q,tooltipContent:"You need to be a workspace admin to modify this field",children:(0,r.jsx)(w.p,{...t,placeholder:"Enter workspace name",disabled:!Q})})}),(0,r.jsx)(j.C5,{})]})}})}),(0,r.jsx)(g.m,{label:"Workspace Description",description:"A short description about your workspace or team.",isLast:!es&&Q&&!ea,children:(0,r.jsx)(j.zB,{control:$.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(j.eI,{className:"w-full",children:[(0,r.jsx)(j.MJ,{children:(0,r.jsx)(y.Q,{showTooltip:!Q,tooltipContent:"You need to be a workspace admin to modify this field",children:(0,r.jsx)(E.T,{rows:3,className:"border bg-background",placeholder:"Description",disabled:!Q,...t})})}),(0,r.jsx)(j.C5,{})]})}})}),(0,r.jsx)(g.m,{label:"Default Project Visibility",description:"Choose whether new projects start as public, workspace-private, or drafts.",badges:["pro"],justify:"end",mobileLayout:"horizontal",children:(0,r.jsx)(j.zB,{control:$.control,name:"defaultProjectVisibility",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(j.eI,{className:"flex w-full justify-end",children:[(0,r.jsx)(j.MJ,{children:(0,r.jsx)(C.j,{visibility:null!=(t=a.value)?t:"public",setVisibility:e=>{a.onChange(e)},workspacePlan:p.plan,workspace:p,disabled:!Q,className:"md:ml-auto"})}),(0,r.jsx)(j.C5,{})]})}})}),(0,r.jsx)(f.E,{permission:M,featureFlags:[V],children:(0,r.jsx)(g.m,{label:"Default Monthly Member Credit Limit",description:"The default monthly credit limit for members of this workspace. Leave empty to use no limit.",children:(0,r.jsx)(j.zB,{control:$.control,name:"defaultMonthlyMemberCreditLimit",render:e=>{var t,a;let{field:s}=e;return(0,r.jsxs)(j.eI,{className:"w-full",children:[(0,r.jsx)(j.MJ,{children:(0,r.jsx)(w.p,{...s,type:"number",placeholder:"Enter default monthly member credit limit (optional)",disabled:!Q,onChange:e=>{let t=e.target.value;if(""===t)s.onChange(null),$.setValue("defaultMonthlyMemberCreditLimit",null,{shouldDirty:!0});else{let e=Number(t);!isNaN(e)&&e>0&&s.onChange(e)}},onBlur:s.onBlur,name:s.name,value:null===s.value?"":null!=(a=null==(t=s.value)?void 0:t.toString())?a:""})}),(0,r.jsx)(j.C5,{})]})}})})}),(0,r.jsx)(f.E,{plans:[A.lV],children:(0,r.jsx)(g.m,{label:"Data Collection Opt Out",description:"Opt out of data collection for this workspace.",isLast:Q,badges:["business"],justify:"end",children:(0,r.jsx)(j.zB,{control:$.control,name:"dataOptOut",render:e=>{var t;let{field:a}=e;return(0,r.jsx)(j.eI,{children:(0,r.jsx)(j.MJ,{children:(0,r.jsx)(N.d,{disabled:!Q,checked:null!=(t=a.value)&&t,onCheckedChange:a.onChange})})})}})})}),(0,r.jsx)(g.m,{label:"Include Unprotected Database Samples in Security Scans",description:"Allow sharing sample data from unprotected database tables when analyzing security vulnerabilities.",justify:"end",mobileLayout:"horizontal",children:(0,r.jsx)(j.zB,{control:$.control,name:"shareSampleDataWithLLMs",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(j.eI,{className:"flex w-full justify-end",children:[(0,r.jsx)(j.MJ,{children:(0,r.jsx)(N.d,{disabled:!Q,checked:null==(t=a.value)||t,onCheckedChange:a.onChange})}),(0,r.jsx)(j.C5,{})]})}})}),(0,r.jsx)(f.E,{permission:M,children:(0,r.jsx)(g.m,{label:"Restrict Workspace Invitations",description:er?(0,r.jsx)("p",{children:"When enabled, only admins and owners can invite members to this workspace."}):(0,r.jsxs)("p",{children:["This feature is only available on Enterprise plans."," ",(0,r.jsx)("a",{href:"https://enterpriseform.lovable.app/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-foreground",children:"Contact sales"})," ","to upgrade."]}),mobileLayout:"horizontal",badges:["enterprise"],justify:"end",className:er?"":"opacity-50",children:(0,r.jsx)(j.zB,{control:$.control,name:"preventEditorInvite",render:e=>{var t;let{field:a}=e;return(0,r.jsx)(N.d,{checked:null!=(t=a.value)&&t,onCheckedChange:e=>{a.onChange(e)},disabled:!er,className:""})}})})}),(0,r.jsx)(f.E,{permission:F,children:(0,r.jsx)(g.m,{label:"Leave Workspace",description:B?"Checking ownership status...":H?"You cannot leave as you are the only owner. Please transfer ownership first.":q&&K>1?"Leave the workspace. There are other owners who will maintain access.":"Leave the workspace (you will lose all access to projects inside this workspace).",isLast:!0,justify:"end",className:H?"opacity-50":"",children:(0,r.jsx)("div",{className:"flex items-center justify-end gap-2",children:B?(0,r.jsxs)(x.$,{variant:"destructive",type:"button",disabled:!0,children:[(0,r.jsx)(_.A,{name:"refresh",className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):H?(0,r.jsx)("div",{className:"cursor-not-allowed",children:(0,r.jsx)(x.$,{variant:"destructive",type:"button",disabled:!0,className:"pointer-events-none",children:"Leave Workspace"})}):(0,r.jsxs)(b.lG,{children:[(0,r.jsx)(b.zM,{asChild:!0,children:(0,r.jsx)(x.$,{variant:"destructive",type:"button",loading:X,children:"Leave Workspace"})}),(0,r.jsxs)(b.Cf,{size:"sm",children:[(0,r.jsxs)(b.c7,{children:[(0,r.jsx)(b.L3,{children:"Leave Workspace"}),(0,r.jsx)(b.rr,{children:q&&K>1?"Are you sure you want to leave this workspace? There are other owners who will maintain access.":"Are you sure you want to leave this workspace?"})]}),(0,r.jsxs)(b.Es,{children:[(0,r.jsx)(b.HM,{asChild:!0,children:(0,r.jsx)(x.$,{variant:"outline",children:"Cancel"})}),(0,r.jsx)(x.$,{variant:"destructive",type:"button",loading:X,onClick:()=>J(p.id),children:"Leave Workspace"})]})]})]})})})}),$.formState.isDirty&&(0,r.jsx)(g.E,{children:(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,r.jsx)(x.$,{variant:"secondary",type:"button",onClick:()=>{$.reset()},children:"Cancel"}),(0,r.jsx)(x.$,{variant:"affirmative",type:"submit",loading:et,children:"Update"})]})})]})})})};function Y(e){let{form:t,workspaceId:a,quietSuccess:r=!1}=e,s=(0,i.jE)(),{authUser:l}=(0,u.Z2)(),{store:o}=(0,p.k9)(),{mutate:c,isPending:m}=(0,n.n)({mutationFn:async e=>{var t;return(0,O.getGoApi)().put("/user/workspaces/".concat(a),{name:e.name,description:null!=(t=e.description)?t:"",...void 0!==e.dataOptOut&&{data_opt_out:e.dataOptOut},...void 0!==e.shareSampleDataWithLLMs&&{share_sample_data_with_llms:e.shareSampleDataWithLLMs},...void 0!==e.defaultMonthlyMemberCreditLimit&&{default_monthly_member_credit_limit:null===e.defaultMonthlyMemberCreditLimit?-1:e.defaultMonthlyMemberCreditLimit},...void 0!==e.editor_can_invite&&{editor_can_invite:e.editor_can_invite},...void 0!==e.defaultProjectVisibility&&{default_project_visibility:e.defaultProjectVisibility}})},onSuccess:e=>{var i,n,c,u,m,p,h;r||d.toast.success("Success",{description:"Workspace settings updated successfully"});let f=T.y.detail({workspaceId:a,projectId:void 0}).queryKey;s.setQueryData(f,t=>t?{...t,workspace:e}:{workspace:e,projects:[],is_member:!0,current_member:null});let g=T.y.workspaces({userId:null==l?void 0:l.uid}).queryKey;s.setQueryData(g,t=>t?{workspaces:t.workspaces.map(t=>t.id===e.id?e:t)}:{workspaces:[e]});let v=(null!=(i=null==o?void 0:o.getState().workspaces)?i:[]).map(t=>t.id===e.id?e:t);null==o||o.setState({workspaces:v}),t.reset({name:null!=(n=e.name)?n:"",description:null!=(c=e.description)?c:"",dataOptOut:null!=(u=e.data_opt_out)?u:void 0,shareSampleDataWithLLMs:null==(m=e.share_sample_data_with_llms)||m,defaultMonthlyMemberCreditLimit:null!=(p=e.default_monthly_member_credit_limit)?p:null,preventEditorInvite:!(null==(h=e.editor_can_invite)||h),defaultProjectVisibility:e.default_project_visibility})},onError:e=>{(0,S.Ni)(e)}});return{updateWorkspace:c,isUpdatingWorkspace:m}}},50444:(e,t,a)=>{"use strict";a.d(t,{z:()=>c});var r=a(87299),s=a(95661),l=a(28717),i=a(49493),n=a(19620),o=a(70556);let d="post-auth-action",c=()=>{let e=(0,r.jE)(),{userData:t}=(0,l.ur)(),a=(0,i.k9)(),{workspaces:c}=(0,i.Mu)(e=>({workspaces:e.workspaces})),u=(0,s.useCallback)((e,t,a)=>{try{let r={key:e,params:t,contexts:a,timestamp:Date.now()},s=o.WS.get(e);if(!s)return void n.logging.error("Unknown post-auth action",{actionKey:e,availableActions:Array.from(o.WS.keys())});let l=s.paramsSchema.safeParse(t);if(!l.success)return void n.logging.error("Invalid params for post-auth action",{actionKey:e,params:t,error:l.error});localStorage.setItem(d,JSON.stringify(r))}catch(t){n.logging.error("Failed to store post-auth action",{error:t,actionKey:e})}},[]),m=(0,s.useCallback)(async(r,s,l)=>{let i=o.WS.get(r);if(!i)return n.logging.error("Unknown post-auth action",{actionKey:r,availableActions:Array.from(o.WS.keys())}),"/";let d=i.paramsSchema.safeParse(s);if(!d.success)return n.logging.error("Invalid params for post-auth action",{actionKey:r,params:s,error:d.error}),"/";let u={userId:null==t?void 0:t.id,workspaces:c,...l},m=await i.execute(d.data,u);if(m.workspaceUpdate&&(null==a?void 0:a.store)){let e=a.store.getState().workspaces.map(e=>e.id===m.workspaceUpdate.workspaceId?{...e,...m.workspaceUpdate.updates}:e);a.store.setState({workspaces:e})}return m.invalidateQueries&&m.invalidateQueries.length>0&&setTimeout(()=>{m.invalidateQueries.forEach(t=>{e.invalidateQueries({queryKey:t})})},2e3),m.redirectUrl||"/"},[e,t,a,c]);return{storeAction:u,executeStoredAction:(0,s.useCallback)(async()=>{try{let e=localStorage.getItem(d);if(!e)return"/";let t=JSON.parse(e),a=o.th.safeParse(t);if(!a.success)return n.logging.error("Invalid stored action",{error:a.error}),localStorage.removeItem(d),"/";let r=a.data;if(r.timestamp&&Date.now()-r.timestamp>864e5)return localStorage.removeItem(d),"/";let s=await m(r.key,r.params);return localStorage.removeItem(d),s}catch(t){if(localStorage.removeItem(d),n.logging.error("Failed to execute stored action",{error:t}),t instanceof Error)throw t;let e=Error("Unknown error occurred while executing stored action");throw e.originalError=t,e}},[m]),executeAction:m,shouldRunAction:(0,s.useCallback)(e=>{try{let t=localStorage.getItem(d);if(!t)return!1;let a=JSON.parse(t),r=o.th.safeParse(a);if(!r.success)return localStorage.removeItem(d),!1;return r.data.contexts.includes(e)}catch(t){return n.logging.error("Failed to check if action should run",{error:t,context:e}),!1}},[])}}},51328:(e,t,a)=>{"use strict";a.d(t,{s:()=>c});var r=a(87299),s=a(6698),l=a(83473),i=a(63851),n=a(99989),o=a(21789),d=a(33895);function c(e){let{workspaceId:t}=e,a=(0,r.jE)(),c=(0,o.H)(),{mutateAsync:u,isPending:m}=(0,s.n)({mutationFn:async e=>{let{email:a,role:r="member"}=e;return(0,i.getGoApi)().post("/workspaces/".concat(t,"/memberships"),{email:a,role:r})},onSuccess:async e=>{if(e){let s=n.y.workspaceMemberships({workspaceId:t}),l=a.getQueryData(s.queryKey);if(l&&!l.members.some(t=>t.user_id===e.user_id)){var r;a.setQueryData(s.queryKey,{...l,members:[...l.members,e],total:l.total+1,limit:l.limit,offset:null!=(r=l.offset)?r:0,has_more:l.has_more})}if(c&&(!c.query||""===c.query.trim())){let r=n.y.searchWorkspaceMemberships({workspaceId:t,params:c}),s=a.getQueryData(r.queryKey);s&&(s.members.some(t=>t.user_id===e.user_id)||a.setQueryData(r.queryKey,{...s,members:[...s.members,e],total:s.total+1,limit:s.limit,offset:s.offset,has_more:s.has_more}))}}(0,d.y)(a,t,c,{invalidateAll:!0})},onError:e=>{(0,l.Ni)(e)}});return{inviteWorkspaceMember:u,isInvitingMember:m}}},51747:(e,t,a)=>{"use strict";a.d(t,{VC:()=>o,wO:()=>n,xf:()=>i});var r=a(82694);let s=r.Yj().min(1,"Email is required").email("Please enter a valid email address"),l=r.YO(s).max(3,"You can invite up to 3 team members").refine(e=>new Set(e.map(e=>e.toLowerCase())).size===e.length,{message:"Duplicate email addresses are not allowed"});function i(e){return s.safeParse(e).success}function n(e){let t=e.filter(e=>""!==e.trim());return l.safeParse(t)}function o(e,t){let a=e.filter(e=>""!==e.trim()),r=l.safeParse(a),i=[null,null,null];for(let t=0;t<3;t++){let a=e[t];if(a&&a.trim()){let e=s.safeParse(a);if(!e.success){var n;i[t]=(null==(n=e.error.errors[0])?void 0:n.message)||"Invalid email address"}}}let o=[];return r.success||(o=r.error.errors.filter(e=>0===e.path.length).map(e=>e.message)),t&&a.some(e=>e.trim().toLowerCase()===t.trim().toLowerCase())&&o.push("You cannot invite yourself"),{globalErrors:o,fieldErrors:i}}},57841:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var r=a(77145),s=a(59142),l=a(90249);let i=e=>{var t;let{isInteractive:a=!1,className:i,workspace:n,...o}=e,d=(0,l.Q)(null==n?void 0:n.id),c=null==n?void 0:n.name,u=null!=(t=null==n?void 0:n.image_url)?t:void 0;return(0,r.jsx)(s._,{name:c,isInteractive:a,photoSrc:u,userColor:d,className:i,isWorkspace:!0,...o})}},59142:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var r=a(77145),s=a(95661),l=a(86652),i=a(58295),n=a(56024);let o=e=>{let{name:t,isInteractive:a,className:o,photoSrc:d,userColor:c,isWorkspace:u=!1,tooltipContent:m=t,zIndex:p,...h}=e,f=t?t.charAt(0).toUpperCase():"",[g,v]=(0,s.useState)(!1);return(0,r.jsxs)(i.m_,{open:!!a&&!!t&&g,onOpenChange:v,children:[(0,r.jsx)(i.k$,{asChild:!0,children:(0,r.jsxs)(l.eu,{className:(0,n.cn)("h-[26px] w-[26px] shrink-0 items-center border border-transparent text-xs",{["hover:bg-".concat(c)]:!d&&!u&&a,"cursor-pointer":a,["hover:border-".concat(c)]:a,["group-[.avatars]:hover:border-".concat(c)]:a,"group-[.avatars]:border-background":!0,"rounded-[8px] hover:border-transparent":u},o),style:{zIndex:p},...h,children:[(0,r.jsx)(l.BK,{className:"aspect-auto object-cover",src:d}),(0,r.jsx)(l.q5,{className:(0,n.cn)("font-medium text-white bg-".concat(c),u&&"rounded-[8px]",o,"items-center border-none"),children:f})]})}),(0,r.jsx)(i.ZI,{children:m})]})}},61884:(e,t,a)=>{"use strict";a.d(t,{P:()=>r});let r=(0,a(84510).vt)(e=>({shouldShowReferralNotice:!1,setIsSuccessfulReferral:()=>e({shouldShowReferralNotice:!0})}))},62548:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var r=function(e){return e.USER_UPLOAD="user_upload",e.IFRAME_SNAPSHOT="iframe_snapshot",e}({})},65616:(e,t,a)=>{"use strict";a.d(t,{PE:()=>i,QM:()=>l,QN:()=>n});var r=a(63851),s=a(19620);let l=async function(e,t,l){var i,n;let o=!(arguments.length>3)||void 0===arguments[3]||arguments[3],d=null!=(i=null==l?void 0:l.maxFileSize)?i:3145728,c=null!=(n=null==l?void 0:l.maxDimension)?n:2e3,u=t;if(t.type.startsWith("image/"))if(["image/svg+xml","image/gif","image/x-icon","image/vnd.microsoft.icon"].includes(t.type))u=t;else{let e=new Image,r=URL.createObjectURL(t);try{if(await new Promise(t=>{e.onload=()=>{URL.revokeObjectURL(r),t()},e.onerror=()=>{URL.revokeObjectURL(r),t()},e.src=r}),t.size>d||Math.max(e.width,e.height)>c)try{let{default:e}=await a.e(4088).then(a.bind(a,94088));u=await e(t,{maxSizeMB:d/1024/1024,maxWidthOrHeight:Math.min(c,1920),useWebWorker:!0})}catch(e){if(s.logging.error("Error compressing image:",{error:e}),!o)throw e}}catch(e){s.logging.warn("Could not process image for compression, using original",{error:e}),u=t}}let m={file_name:e,content_type:u.type,status:"uploading"},p=await (0,r.getGoApi)().post("/files/generate-upload-url",m),h=await fetch(p.url,{method:"PUT",body:u,headers:{"Content-Type":u.type}});if(!h.ok){let t=Error("Upload failed with status ".concat(h.status));if(s.logging.error("File upload failed:",{fileName:e,status:h.status}),!o)throw t}},i=async e=>(0,r.getGoApi)().post("/files/generate-download-url",e),n=async e=>(0,r.getGoApi)().post("/files/generate-public-url",e)},67539:(e,t,a)=>{"use strict";a.d(t,{TR:()=>g,bq:()=>u,eb:()=>v,gC:()=>f,l6:()=>o,s3:()=>d,wQ:()=>m,yv:()=>c});var r=a(77145),s=a(84041),l=a(95661),i=a(69730),n=a(56024);let o=s.bL,d=s.YJ,c=s.WT,u=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(s.l9,{ref:t,className:(0,n.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[l,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(i.A,{name:"chevron_down",size:"small",className:"opacity-50"})})]})});u.displayName=s.l9.displayName;let m=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(s.l9,{ref:t,className:(0,n.cn)("flex h-7 items-center justify-start gap-1 whitespace-nowrap rounded-none border-none bg-transparent px-0 py-0 text-sm shadow-none ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[l,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(i.A,{name:"chevron_down",size:"small",className:"opacity-50"})})]})});m.displayName="SelectTriggerGhost";let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.PP,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(i.A,{name:"chevron_up",className:"h-4 w-4"})})});p.displayName=s.PP.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.wn,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(i.A,{name:"chevron_down",className:"h-4 w-4"})})});h.displayName=s.wn.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,position:i="popper",...o}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:t,className:(0,n.cn)("relative z-[10000] max-h-96 min-w-32 overflow-hidden rounded-md border bg-card text-card-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1","origin-[var(--radix-select-content-transform-origin)]",a),position:i,...o,children:[(0,r.jsx)(p,{}),(0,r.jsx)(s.LM,{className:(0,n.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(h,{})]})})});f.displayName=s.UC.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.JU,{ref:t,className:(0,n.cn)("px-2 py-1.5 text-sm font-medium",a),...l})});g.displayName=s.JU.displayName;let v=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(s.q7,{ref:t,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",a),...o,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(i.A,{name:"check",className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:l})]})});v.displayName=s.q7.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.wv,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=s.wv.displayName},69777:(e,t,a)=>{"use strict";a.d(t,{A2:()=>r.A,MR:()=>r.M});var r=a(32736);a(70556),a(11070)},70556:(e,t,a)=>{"use strict";a.d(t,{WS:()=>n,th:()=>o});var r=a(82694),s=a(11070),l=a(32736);let i=[s.K,s.N],n=new Map;i.forEach(e=>{n.set(e.key,e)}),Object.fromEntries(i.map(e=>[e.key,e.paramsSchema]));let o=r.gM("key",i.map(e=>{let t,a;return t=e.key,a=e.paramsSchema,r.Ik({key:r.eu(t),params:a.optional(),contexts:r.YO(r.fc(l.M)),timestamp:r.ai().optional()})}))},71450:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ef});var r=a(77145),s=a(33499),l=a(13410),i=a(95661),n=a(40702),o=a(3140),d=a(28717),c=a(45756),u=a(54436),m=a(21227),p=a(31088),h=a(50444),f=a(69777),g=a(26294),v=a(20247),x=a(27549),y=a(27458),b=a(92722),j=a.n(b);let _=e=>{let t=[...e],a=t.findIndex(e=>"other"===e.value);if(-1===a)return j()(t);let[r]=t.splice(a,1),s=j()(t);return s.push(r),s},w=e=>e.split(" ")[0].trim(),N=(e,t)=>!!(e.formState.touchedFields[t]&&e.formState.errors[t]);var E=a(52811),C=a(6397),k=a(56024);let I=[{value:"website"},{value:"saas"},{value:"design"},{value:"ecommerce"},{value:"games"},{value:"internal_tools"},{value:"prototyping"},{value:"side_projects"},{value:"other"}],S=[{value:"x"},{value:"youtube"},{value:"linkedin"},{value:"github"},{value:"newsletter"},{value:"press_media"},{value:"reddit"},{value:"google"},{value:"friend"},{value:"colleague"},{value:"tiktok"},{value:"instagram"},{value:"facebook"},{value:"other"}],O=[{value:"software_developer"},{value:"product_manager"},{value:"entrepreneur"},{value:"creator"},{value:"designer"},{value:"marketer"},{value:"student"},{value:"educator"},{value:"hobbyist"},{value:"other"}],P=[{value:"personal_projects"},{value:"work_professional"},{value:"academic_research"},{value:"other"}],R="min-h-[160px]",A=[{type:"NAME",title:"steps.name",field:"fullName"},{type:"HEARD_FROM",title:"steps.heardFrom",field:"heardFrom"},{type:"PRIMARY_USE_CASE",title:"steps.primaryUseCase",field:"primaryUseCase"},{type:"ROLE",title:"steps.role",field:"role"},{type:"BUILD_GOAL",title:"steps.buildGoal",field:"buildGoal"},{type:"INVITE",title:"steps.invite"}],T=e=>{let{control:t,theme:a,onThemeChange:s,onNext:l,triggerValidation:i,hasErrors:n=!1}=e,o=(0,g.c3)("GettingStarted");return(0,r.jsx)(x.zB,{control:t,name:"fullName",render:e=>{let{field:t}=e;return(0,r.jsx)(x.eI,{children:(0,r.jsxs)("div",{className:(0,k.cn)("flex flex-col justify-start gap-3",R),children:[(0,r.jsx)("p",{className:"text-base font-medium",children:o("nameStep.question")}),(0,r.jsx)(x.MJ,{children:(0,r.jsx)(C.p,{placeholder:o("nameStep.placeholder"),...t,onKeyDown:async e=>{"Enter"===e.key&&(e.preventDefault(),await i("fullName")&&await l())}})}),(0,r.jsx)("p",{className:"text-base font-medium",children:o("nameStep.themeQuestion")}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat("system"===a?"border-primary bg-primary text-primary-foreground":""),onClick:()=>s("system"),children:o("nameStep.themes.system")}),(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat("dark"===a?"border-primary bg-primary text-primary-foreground":""),onClick:()=>s("dark"),children:o("nameStep.themes.dark")}),(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat("light"===a?"border-primary bg-primary text-primary-foreground":""),onClick:()=>s("light"),children:o("nameStep.themes.light")})]}),n&&(0,r.jsx)(x.C5,{})]})})}})};var L=a(92912),D=a(39528);let U=e=>{let{control:t,shuffledOptions:a,onNext:s,hasErrors:l=!1}=e,i=(0,g.c3)("GettingStarted");return(0,r.jsx)(x.zB,{control:t,name:"buildGoal",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.eI,{children:[(0,r.jsx)("div",{className:(0,k.cn)("flex flex-wrap content-start gap-3",R),children:a.map(e=>{let a=i("options.buildGoal.".concat(e.value));return(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat(t.value===e.value?"border-primary bg-primary text-primary-foreground":""),onClick:async()=>{L.Ay.capture(D.Ue.BUTTON_CLICKED.BUILD_GOAL,{selection:e.value,label:a}),t.onChange(e.value),await s()},children:a},e.value)})}),l&&(0,r.jsx)(x.C5,{})]})}})},M=e=>{let{control:t,shuffledOptions:a,onNext:s,hasErrors:l=!1}=e,i=(0,g.c3)("GettingStarted");return(0,r.jsx)(x.zB,{control:t,name:"primaryUseCase",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.eI,{children:[(0,r.jsx)("div",{className:(0,k.cn)("flex flex-wrap content-start gap-3",R),children:a.map(e=>{let a=i("options.primaryUseCase.".concat(e.value));return(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat(t.value===e.value?"border-primary bg-primary text-primary-foreground":""),onClick:async()=>{L.Ay.capture(D.Ue.BUTTON_CLICKED.PRIMARY_USE_CASE,{selection:e.value,label:a}),t.onChange(e.value),await s()},children:a},e.value)})}),l&&(0,r.jsx)(x.C5,{})]})}})},F=e=>{let{control:t,shuffledOptions:a,onNext:s,hasErrors:l=!1}=e,i=(0,g.c3)("GettingStarted");return(0,r.jsx)(x.zB,{control:t,name:"role",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.eI,{children:[(0,r.jsx)("div",{className:(0,k.cn)("flex flex-wrap content-start gap-3",R),children:a.map(e=>{let a=i("options.role.".concat(e.value));return(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat(t.value===e.value?"border-primary bg-primary text-primary-foreground":""),onClick:async()=>{L.Ay.capture(D.Ue.BUTTON_CLICKED.ROLE,{selection:e.value,label:a}),t.onChange(e.value),await s()},children:a},e.value)})}),l&&(0,r.jsx)(x.C5,{})]})}})},V=e=>{let{control:t,shuffledOptions:a,onNext:s,hasErrors:l=!1}=e,i=(0,g.c3)("GettingStarted");return(0,r.jsx)(x.zB,{control:t,name:"heardFrom",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.eI,{children:[(0,r.jsx)("div",{className:(0,k.cn)("flex flex-wrap content-start gap-3",R),children:a.map(e=>{let a=i("options.heardFrom.".concat(e.value));return(0,r.jsx)(E.$,{type:"button",variant:"outline",className:"h-7 whitespace-nowrap px-4 text-left transition-colors ".concat(t.value===e.value?"border-primary bg-primary text-primary-foreground":""),onClick:async()=>{L.Ay.capture(D.Ue.BUTTON_CLICKED.HEARD_FROM,{selection:e.value,label:a}),t.onChange(e.value),await s()},children:a},e.value)})}),l&&(0,r.jsx)(x.C5,{})]})}})};var W=a(69730),B=a(51747);let G=e=>{let{placeholder:t="email@example.com",emails:a,setEmails:s,onValidationChange:l}=e,{authUser:o}=(0,n.Z2)(),d=null==o?void 0:o.email,[c,u]=(0,i.useState)([]),[m,p]=(0,i.useState)([null,null,null]),[h,f]=(0,i.useState)(new Set);(0,i.useEffect)(()=>{let{globalErrors:e,fieldErrors:t}=(0,B.VC)(a,d);u(e),p(t);let r=0===e.length&&t.every((e,t)=>!e||!a[t]);null==l||l(r,[...e,...t.filter(e=>!!e)])},[a,l,d]);let g=e=>{var t;return(null==(t=a[e])?void 0:t.trim())&&h.has(e)?m[e]:null},v=e=>null!==g(e);return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[[0,1,2].map(e=>(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)(C.p,{type:"email",value:a[e],onChange:t=>((e,t)=>{let r=[...a];r[e]=t,s(r),f(t=>new Set(t).add(e))})(e,t.target.value),onBlur:()=>{f(t=>new Set(t).add(e))},placeholder:t,className:"rounded-md border px-4 py-2 text-base ".concat(v(e)?"border-destructive focus:border-destructive":"")}),v(e)&&(0,r.jsx)("p",{className:"text-sm text-destructive-foreground",children:g(e)})]},e)),c.length>0&&(0,r.jsxs)("div",{className:"flex w-full items-center gap-2 rounded-md border border-destructive bg-destructive px-4 py-3 text-center text-base font-medium text-destructive-foreground",children:[(0,r.jsx)(W.A,{name:"warning",className:"font-base h-4 w-4"}),(0,r.jsx)("p",{className:"font-base text-sm",children:c[0]})]})]})};var z=a(52597);let K=e=>{let{buttonType:t,step:a,action:r,additionalData:s}=e,l=D.Ue.BUTTON_CLICKED[t];L.Ay.capture(l,{step:a,action:r,...s})},Y=e=>{let{currentWorkspace:t,emails:a,setEmails:s,onValidationChange:l}=e,n=(0,g.c3)("GettingStarted");return(0,i.useEffect)(()=>{L.Ay.capture(D.Ue.STEP_VIEWED.INVITE_STEP)},[]),(0,r.jsx)("div",{className:"flex flex-col justify-start gap-4 ".concat(R),children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-base text-muted-foreground",children:n("inviteStep.description")}),(0,r.jsx)(G,{emails:a,setEmails:s,onValidationChange:e=>{null==l||l(e)}})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-md border border-dashed border-muted-foreground/40 bg-muted/40 px-4 py-3",children:[(0,r.jsx)(z.y,{size:"small",className:"text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:n("inviteStep.workspaceLoading")})]})})};var q=a(82694);let H=q.Ik({fullName:q.Yj().min(1,{message:"Full name is required"}).max(100,{message:"Full name must be less than 100 characters"}).or(q.eu("")),theme:q.k5(["system","dark","light"]).optional(),primaryUseCase:q.k5(["personal_projects","work_professional","academic_research","other"]),role:q.k5(["software_developer","product_manager","entrepreneur","creator","designer","marketer","student","educator","hobbyist","other"]),buildGoal:q.k5(["website","saas","design","ecommerce","games","internal_tools","prototyping","side_projects","other"]).optional(),heardFrom:q.k5(["x","youtube","linkedin","github","newsletter","press_media","reddit","google","friend","colleague","tiktok","instagram","facebook","other"])}),Q=e=>{let{step:t,form:a,themeConfig:s,onNext:l,shuffledOptions:i,currentWorkspace:n,inviteConfig:o}=e,d=(0,g.c3)("GettingStarted"),{control:c}=a,{theme:u,onThemeChange:m}=s,{emails:p,setEmails:h,onValidationChange:f}=o;return(0,r.jsxs)(r.Fragment,{children:["NAME"!==t.type&&(0,r.jsx)("div",{className:"",children:(0,r.jsx)("h2",{className:"text-2xl font-medium",children:d(t.title)})}),(()=>{switch(t.type){case"NAME":return(0,r.jsx)(T,{control:c,theme:u,onThemeChange:m,onNext:l,triggerValidation:a.trigger,hasErrors:N(a,"fullName")});case"BUILD_GOAL":return(0,r.jsx)(U,{control:c,shuffledOptions:i.buildGoal,onNext:l,hasErrors:N(a,"buildGoal")});case"PRIMARY_USE_CASE":return(0,r.jsx)(M,{control:c,shuffledOptions:i.primaryUseCase,onNext:l,hasErrors:N(a,"primaryUseCase")});case"ROLE":return(0,r.jsx)(F,{control:c,shuffledOptions:i.role,onNext:l,hasErrors:N(a,"role")});case"HEARD_FROM":return(0,r.jsx)(V,{control:c,shuffledOptions:i.heardFrom,onNext:l,hasErrors:N(a,"heardFrom")});case"INVITE":return(0,r.jsx)(Y,{currentWorkspace:n,emails:p,setEmails:h,onValidationChange:f});default:return null}})()]})},Z=e=>{let{totalSteps:t,currentStep:a}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center gap-2",children:Array.from({length:t}).map((e,t)=>(0,r.jsx)("div",{className:"h-1 w-4 rounded-full transition-colors duration-200 ".concat(t<=a?"bg-primary":"bg-muted")},t))})},$=e=>{let{stepState:t,formState:a,onContinue:s,onFinish:l}=e,i=(0,g.c3)("GettingStarted"),{step:n,isLastStep:o,isNameStep:d,isInviteStep:c}=t,{form:u,mutation:m,isInvitingMember:p,inviteEmailsValid:h=!0}=a,f=()=>{d?K({buttonType:"CONTINUE_NAME_STEP",step:"name_step",action:"continue"}):c?K({buttonType:"CONTINUE",step:"invite_step",action:"continue"}):K({buttonType:"CONTINUE",step:n.field,action:"continue"}),s()};return o?(0,r.jsx)(E.$,{type:"button",className:"w-18 h-7",onClick:()=>{K({buttonType:"SUBMIT",step:"invite_step",action:"submit"}),l()},disabled:m.isPending||m.isSuccess||p||!h,children:i("navigation.finish")}):d?(0,r.jsx)(E.$,{type:"button",className:"w-18 h-7",onClick:f,disabled:!n.field||!u.getValues(n.field),children:i("navigation.continue")}):c?(0,r.jsx)(E.$,{type:"button",className:"w-18 h-7",onClick:f,disabled:!h,children:i("navigation.continue")}):n.field&&u.getValues(n.field)?(0,r.jsx)(E.$,{type:"button",className:"w-18 h-7",onClick:f,children:i("navigation.continue")}):null},J=e=>{let{stepState:t,formState:a,actions:s,authUser:l}=e,i=(0,g.c3)("GettingStarted"),{currentStep:n,step:o,isLastStep:d,isNameStep:c,isInviteStep:u}=t,{form:m}=a,{onBack:p,onSkip:h,onContinue:f,onFinish:v}=s,x=async()=>{u&&L.Ay.capture(D.Ue.STEP_SKIPPED.INVITE_STEP),K({buttonType:"SKIP",step:o.field,action:"skip"}),await h()},y=n>+(null!=l&&!!l.displayName),b=!c&&!d&&(!o.field||!m.getValues(o.field))&&!u;return(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-3 items-center",children:[(0,r.jsx)("div",{className:"flex justify-start",children:y&&(0,r.jsx)(E.$,{type:"button",variant:"ghost",onClick:()=>{K({buttonType:"BACK",step:o.field||"invite_step",action:"back"}),p()},className:"h-7 w-12",children:i("navigation.back")})}),(0,r.jsx)("div",{className:"flex justify-center",children:!c&&(0,r.jsx)(Z,{totalSteps:5,currentStep:u?4:n-1})}),(0,r.jsxs)("div",{className:"flex justify-end",children:[b&&(0,r.jsx)(E.$,{type:"button",variant:"ghost",className:"h-7 text-sm text-muted-foreground hover:text-foreground",onClick:x,children:i("navigation.skip")}),(0,r.jsx)($,{stepState:t,formState:a,onContinue:f,onFinish:v})]})]})},X=e=>{let{onContinue:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,r.jsx)(v.c7,{children:(0,r.jsx)(v.L3,{className:"text-left text-2xl font-medium",children:"Congratulations!"})}),(0,r.jsx)("div",{children:"You have earned"}),(0,r.jsx)("div",{className:"rounded-xl bg-muted py-8 text-center text-4xl font-medium",children:"+10 credits"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Thanks to the user that referred you. You can use these credits to create projects, generate content, and more."}),(0,r.jsx)(E.$,{onClick:t,children:"Continue"})]})};var ee=a(9898),et=a(61035),ea=a(52037),er=a(83220),es=a(51328),el=a(50420),ei=a(6698),en=a(75698),eo=a(83473),ed=a(63851),ec=a(35418),eu=a(19620),em=a(61884);let ep=e=>{var t;let{dialogOpen:a,onSettled:s}=e,l=(0,g.c3)("GettingStarted"),{navigation:o,auth:u,referralNotice:m,invites:h,form:f,currentWorkspace:b,shuffledOptions:j,submitMutation:N,actions:E}=(e=>{var t;let{dialogOpen:a,onSettled:r}=e,{authUser:s,authState:l}=(0,n.Z2)(),[o,d]=(0,i.useState)(0),{theme:u,setTheme:m}=(0,et.D)(),{shouldShowReferralNotice:h}=(0,em.P)(),[f,g]=(0,i.useState)(h),[v,x]=(0,i.useState)(["","",""]),[y,b]=(0,i.useState)(!0);(0,i.useEffect)(()=>{"authenticated"===l&&s&&d(+!!s.displayName)},[l,s]);let j=(0,ea.mN)({resolver:(0,ee.u)(H),defaultValues:{fullName:"",theme:void 0,primaryUseCase:void 0,role:void 0,buildGoal:void 0,heardFrom:void 0}});(0,i.useEffect)(()=>{"authenticated"===l&&(null==s?void 0:s.displayName)&&j.setValue("fullName",s.displayName)},[l,s,j]);let N=(0,ea.mN)({defaultValues:{name:""}}),E=(0,er.j4)(e=>e.currentWorkspace),{updateWorkspace:C}=(0,el.U)({form:N,workspaceId:null!=(t=null==E?void 0:E.id)?t:"",quietSuccess:!0}),{inviteWorkspaceMember:k,isInvitingMember:R}=(0,es.s)({workspaceId:(null==E?void 0:E.id)||""}),T=(0,ei.n)({mutationFn:async()=>(0,ed.getGoApi)().post("/user/segmentation",{form_status:c.C.SKIPPED}),onError:e=>{(0,eo.Ni)(e)},onSettled:(e,t)=>{r({data:e,error:t,variables:{data:void 0,formStatus:c.C.SKIPPED},context:void 0})}}),U=(0,ei.n)({mutationFn:async e=>{let t=(0,ed.getGoApi)(),a=H.parse(e),r={form_status:c.C.SUBMITTED,build_goal:a.buildGoal,primary_use_case:a.primaryUseCase,role:a.role,heard_from:a.heardFrom,theme:a.theme};return t.post("/user/segmentation",r)},onSuccess:()=>{p.toast.success("Thanks for helping us improve Lovable!")},onError:e=>{eu.logging.error("Error submitting user segmentation data",{error:e}),(0,eo.Ni)(e)},onSettled:(e,t,a)=>{r({data:e,error:t,variables:{data:a,formStatus:c.C.SUBMITTED},context:void 0})}}),M=(0,ei.n)({mutationFn:async e=>{var t;let a=(0,ed.getGoApi)();if(!(null==(t=ec.auth.currentUser)?void 0:t.uid))throw Error("No authenticated user found");let r=e.trim();if(!r)throw Error("Display name cannot be empty");let s=await a.put("/user/".concat(ec.auth.currentUser.uid),{attributes:{display_name:r}});try{await (0,en.r7)(ec.auth.currentUser,{displayName:r})}catch(e){eu.logging.error("Failed to update Firebase Auth display name",{firebaseError:e})}return s},onSuccess:()=>{},onError:e=>{eu.logging.error("Failed to update user display name",{error:e}),(0,eo.Ni)(e)}}),{onSubmit:F,handleSkip:V,handleDialogClose:W,handleNext:G,handleBack:z,handleThemeChange:Y,handleInvite:q}=(e=>{let{currentStep:t,setCurrentStep:a,form:r,workspaceForm:s,skipMutation:l,submitMutation:i,updateUserMutation:n,updateWorkspace:o,inviteWorkspaceMember:d,setTheme:c,authUser:u}=e,m=(0,er.j4)(e=>{var t;return null==(t=e.membership)?void 0:t.role}),p=async e=>{await n.mutateAsync(e);let t=w(e);s.setValue("name","".concat(t,"'s Lovable")),("owner"===m||"admin"===m)&&o(s.getValues())},h=async e=>{L.Ay.capture(D.Ue.DIALOG.SUBMITTED),await i.mutateAsync(e),e.fullName&&e.fullName.trim()&&await p(e.fullName)},f=async()=>{L.Ay.capture(D.Ue.DIALOG.SKIPPED);let e=r.getValues();e.fullName&&e.fullName.trim()&&await p(e.fullName),await l.mutateAsync()},g=async()=>{t<A.length-1?a(t+1):await r.handleSubmit(h)()};return{onSubmit:h,handleSkip:f,handleDialogClose:e=>{if(!e&&!l.isPending&&!i.isPending&&!l.isSuccess&&!i.isSuccess&&!n.isPending){let e=r.getValues();Object.values(e).some(e=>void 0!==e&&""!==e)?(L.Ay.capture(D.Ue.DIALOG.PARTIAL_SUBMIT),e.fullName&&e.fullName.trim()?p(e.fullName).then(()=>i.mutateAsync(e)).catch(e=>{eu.logging.error("Error during dialog close submission",{error:e})}):i.mutate(e)):f()}},handleNext:g,handleBack:()=>{t>+(null!=u&&!!u.displayName)&&a(t-1)},handleThemeChange:e=>{(e=>{K({buttonType:"THEME",additionalData:{selection:e,label:"system"===e?"System Theme":"dark"===e?"Dark Mode":"Light Mode"}})})(e),c(e),r.setValue("theme",e)},handleInvite:async e=>{let{emails:t,role:a}=e;if(0===t.length)return{success:!1};let r=0;for(let e of t)try{await d({email:e,role:a}),r++}catch(t){eu.logging.error("Failed to invite team member",{email:e,error:t})}return{success:r>0}}}})({currentStep:o,setCurrentStep:d,form:j,workspaceForm:N,skipMutation:T,submitMutation:U,updateUserMutation:M,updateWorkspace:C,inviteWorkspaceMember:k,setTheme:m,authUser:s}),Q=(0,i.useMemo)(()=>({buildGoal:_(I),primaryUseCase:_(P),role:_(O),heardFrom:_(S)}),[]);(0,i.useEffect)(()=>{a&&L.Ay.capture(D.Ue.DIALOG.VIEWED)},[a]),(0,i.useEffect)(()=>{a&&u&&(j.setValue("theme",u),L.Ay.capture(D.Ue.BUTTON_CLICKED.THEME,{selection:u,label:"system"===u?"System Theme":"dark"===u?"Dark Mode":"Light Mode"}))},[a,u,j]);let Z=async()=>{let e=v.map(e=>e.trim()).filter(e=>""!==e),t=(0,B.wO)(e);if(!t.success)return void eu.logging.error("Email validation failed",{error:t.error,validEmails:e.length,context:"user_segmentation_invite_flow"});(e=>{L.Ay.capture(D.Ue.INVITE_FINISHED,{email_count:e,has_emails:e>0})})(e.length);let a=!0;if(e.length>0){let{success:t}=await q({emails:e,role:"member"});a=t}a&&await j.handleSubmit(F)()};return{navigation:{currentStep:o,theme:u},auth:{authState:l,authUser:s},referralNotice:{isOpen:f,setIsOpen:g},invites:{emails:v,setEmails:x,isValid:y,setIsValid:b,isInviting:R},form:j,currentWorkspace:E,shuffledOptions:Q,skipMutation:T,submitMutation:U,updateUserMutation:M,actions:{onSubmit:F,handleSkip:V,handleDialogClose:W,handleNext:G,handleBack:z,handleThemeChange:Y,handleFinish:Z},getFirstName:w}})({dialogOpen:a,onSettled:s}),{userData:C}=(0,d.ur)(),k=A[o.currentStep],R=o.currentStep===A.length-1,T=(null==k?void 0:k.field)==="fullName",U=(null==k?void 0:k.title)==="Invite your team";return"loading"!==u.authState&&"idle"!==u.authState&&C?(0,r.jsx)(v.lG,{open:a,onOpenChange:E.handleDialogClose,children:(0,r.jsxs)(v.Cf,{hideCloseButton:!0,blackoutOverlay:!0,onPointerDownOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),className:"max-h-[90vh] overflow-y-auto bg-popover",size:"md",children:[(0,r.jsx)(y.Fy,{className:"h-9 w-9"}),m.isOpen?(0,r.jsx)(X,{onContinue:()=>m.setIsOpen(!1)}):(0,r.jsxs)(r.Fragment,{children:[0===o.currentStep&&!(null==(t=u.authUser)?void 0:t.displayName)&&(0,r.jsx)(v.c7,{children:(0,r.jsx)(v.L3,{className:"text-left text-2xl font-medium",children:l("title")})}),(0,r.jsx)(x.lV,{...f,children:(0,r.jsxs)("form",{onSubmit:f.handleSubmit(E.onSubmit),className:"flex flex-col gap-4",children:[(0,r.jsx)(Q,{step:k,form:f,themeConfig:{theme:o.theme,onThemeChange:E.handleThemeChange},onNext:E.handleNext,shuffledOptions:j,currentWorkspace:b,inviteConfig:{emails:h.emails,setEmails:h.setEmails,onValidationChange:h.setIsValid}}),(0,r.jsx)(J,{stepState:{currentStep:o.currentStep,step:k,isLastStep:R,isNameStep:T,isInviteStep:U},formState:{form:f,mutation:N,isInvitingMember:h.isInviting,inviteEmailsValid:h.isValid},actions:{onBack:E.handleBack,onSkip:E.handleSkip,onContinue:()=>void E.handleNext(),onFinish:()=>void E.handleFinish()},authUser:u.authUser})]})})]})]})}):null},eh=()=>{let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),{shouldRunAction:a}=(0,h.z)(),s=async r=>{if(r.error){var s;if(p.toast.error("Error",{description:(null==(s=r.error.data)?void 0:s.detail)||"An error occurred"}),401===r.error.status)return e.push("/login?redirect=/getting-started")}if(a(f.MR.SEGMENTATION))return void e.push("/auth/post-login");let l=t.get("redirect");l&&(!l.startsWith("/")||l.startsWith("//")||l.includes("://"))&&(l="/"),e.replace(l||"/")};return(0,r.jsx)(ep,{dialogOpen:!0,onSettled:s})},ef=()=>{let{authUser:e}=(0,n.Z2)(),{userData:t}=(0,d.ur)(),a=(0,n.Nm)(),p=(0,o.M)(),h=(0,l.useRouter)(),f=(0,i.useRef)({}),g=(0,i.useRef)(!1),{trackLead:v}=(0,s.s)();return t&&!g.current&&(g.current=!0,t.segmentation_form_status!==c.C.NOT_SHOWN&&h.replace("/")),(0,i.useEffect)(()=>{if((null==e?void 0:e.uid)&&p&&!f.current[e.uid]&&a){let t=(0,u.R)("dub_id");f.current[e.uid]=!0,p.identify(e.uid,{email:a,name:e.displayName}),p.track("registration_completed",{event_id:"Registration-".concat(e.uid)},{...(0,m.D)()}),t&&v({clickId:t,eventName:"Sign Up",customerExternalId:e.uid,customerName:e.displayName,customerEmail:a})}},[null==e?void 0:e.uid,p,a,null==e?void 0:e.displayName,v]),(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsx)(eh,{})})}},73893:(e,t,a)=>{"use strict";a.d(t,{E:()=>n,m:()=>i});var r=a(77145),s=a(56024),l=a(39055);let i=e=>{let{children:t,label:a,className:i,isLast:n=!1,description:o,badges:d,customBadge:c,mobileLayout:u="vertical",justify:m="start",...p}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("relative grid gap-4 pb-4 last:border-b-0 md:grid md:grid-cols-2",{"border-b-0":n,"border-b":!n,"flex justify-between":"horizontal"===u,"grid-cols-1":"vertical"===u},i),...p,children:[(a||o)&&(0,r.jsxs)("div",{className:"flex-col gap-1 md:flex",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-x-1.5 text-base font-medium",children:[a,null==d?void 0:d.map(e=>(0,r.jsx)(l.x,{badge:e},e)),c]}),o&&(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:o})]}),t&&(0,r.jsx)("div",{className:(0,s.cn)("flex items-center","end"===m&&"md:justify-end"),children:t})]})},n=e=>{let{children:t,className:a,...l}=e;return(0,r.jsx)("div",{className:(0,s.cn)("absolute inset-x-0 bottom-0 z-10 flex min-h-8 items-center rounded-b-lg border-t bg-background px-6 py-3 md:px-10",a),...l,children:t})}},86652:(e,t,a)=>{"use strict";a.d(t,{BK:()=>o,eu:()=>n,q5:()=>d});var r=a(77145),s=a(43368),l=a(95661),i=a(56024);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.bL,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...l})});n.displayName=s.bL.displayName;let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s._V,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...l})});o.displayName=s._V.displayName;let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.H4,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});d.displayName=s.H4.displayName},90249:(e,t,a)=>{"use strict";a.d(t,{Q:()=>l});var r=a(95661);let s=["brand-ocean-primary","brand-twilight-primary","brand-flamingo-primary","brand-bubblegum-primary","brand-saffron-primary","brand-tiger-primary"];function l(e){return(0,r.useMemo)(()=>{e||(e="fake-user");let t=function(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return Math.abs(t)}(e)%s.length;return s[t]},[e])}},92386:(e,t,a)=>{"use strict";a.d(t,{j:()=>p});var r=a(77145),s=a(47679),l=a(28717),i=a(67539),n=a(21016),o=a(56024),d=a(49522),c=a(19695),u=a(69730),m=a(43987);let p=e=>{let{visibility:t,setVisibility:a,redirectToSubscription:p=!1,workspacePlan:h,workspace:f,className:g,disabled:v,disabledTooltipContent:x,disablePublishForWorkspace:y,textButton:b=!1}=e,j=(0,l.W6)({workspacePlan:h}),_=(0,l.OM)({workspacePlan:h}),{openSettings:w}=(0,s.t)(),N=(0,d.BK)(),E=(0,n.A)("md");return(0,r.jsx)(c.Q,{showTooltip:!!(v&&x),tooltipContent:(0,r.jsx)("p",{children:x}),children:(0,r.jsxs)(i.l6,{value:t,onValueChange:e=>{if("public"!==e||!y)if("private"!==e||_)if("draft"!==e||j)a(e);else{if(!p)return void N(d.KU.BIZ_PERSONAL_PROJECT);w("billing")}else{if(!p)return void N(d.KU.PRO_PRIVATE_PROJECT);w("billing")}},disabled:v,children:[(0,r.jsx)(i.bq,{className:(0,o.cn)("w-[140px] min-w-[140px] [&_.plan-badge]:hidden",g,b&&"w-auto min-w-0 border-none shadow-none"),children:(0,r.jsx)(i.yv,{placeholder:"Select visibility",className:""})}),(0,r.jsxs)(i.gC,{align:E?"start":"end",children:[(0,r.jsx)(i.eb,{value:"public",disabled:!0===y,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{name:"globe",size:"small"}),(0,r.jsx)("span",{children:"Public"}),y&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Disabled)"})]})}),(0,r.jsx)(i.eb,{value:"private",className:(0,o.cn)("flex items-center justify-between",{"bg-muted":"private"===t}),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{name:"workspaces",size:"small"}),(0,r.jsx)("span",{children:"Workspace"}),f&&(0,r.jsx)(m.M,{workspace:f,requiredPlanCategory:"pro",className:"plan-badge"})]})}),(0,r.jsx)(i.eb,{value:"draft",className:(0,o.cn)("flex items-center justify-between",{"bg-muted":"draft"===t}),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{name:"draft",size:"small"}),(0,r.jsx)("span",{children:"Personal"}),f&&(0,r.jsx)(m.M,{workspace:f,requiredPlanCategory:"biz",className:"plan-badge"})]})})]})]})})}},92918:(e,t,a)=>{"use strict";a.d(t,{Jp:()=>v,PostHogExperiment:()=>f,Tp:()=>y,ct:()=>w,jD:()=>b});var r=a(77145),s=a(13410),l=a(92912),i=a(24072),n=a(95661),o=a(55966),d=a(15365),c=a(19620),u=a(680),m=a(40702),p=a(40074);let h=(0,n.lazy)(()=>Promise.all([a.e(6415),a.e(2181),a.e(1131),a.e(6975)]).then(a.bind(a,46975)).then(e=>({default:e.FeatureFlagDebugDialog})));var f={};let g=(0,n.createContext)(void 0),v=()=>{let e=(0,n.useContext)(g);if(!e)throw Error("useFeatureFlagContext must be used within a PostHogFlagsContext in the PosthogProvider");return e},x={},y=e=>{let{featureFlags:t,featureFlagOverrides:a}=v();return void 0!==a[e]?a[e]:!!(null==t?void 0:t[e])},b=()=>({openFeatureFlagDebugDialog:v().openFeatureFlagDebugDialog}),j="phc_xdBVCyOkYw40Pqd7xp5Er88lGq2IGFd4kZHRiKvvkjr",_=j&&!0;function w(e){let{children:t,bootstrapData:a}=e,{authUser:c}=(0,m.Z2)(),f=(0,m.Nm)(),v=(0,n.useMemo)(()=>null==c?void 0:c.uid,[null==c?void 0:c.uid]),y=(0,n.useMemo)(()=>null==c?void 0:c.displayName,[null==c?void 0:c.displayName]),b=(0,d.E$)(),[w,N]=(0,n.useState)(!1),[E,C]=(0,n.useState)(x);(0,o.vC)("ctrl+shift+f",e=>{e.preventDefault(),N(e=>!e)},{enabled:!!b},[b]);let k=(0,n.useMemo)(()=>({featureFlags:null==a?void 0:a.featureFlags,featureFlagOverrides:E,openFeatureFlagDebugDialog:b?()=>N(!0):void 0}),[null==a?void 0:a.featureFlags,E,b]),I=(0,n.useCallback)(e=>{let{target:t,action:a}=e;if("bulk"===t){let e=Object.values(u.x);switch(a){case"enable_all":C(Object.fromEntries(e.map(e=>[e,!0])));break;case"disable_all":C(Object.fromEntries(e.map(e=>[e,!1])));break;case"clear_all":C(x)}}else C(e=>({...e,[t]:a}))},[]);(0,n.useEffect)(()=>{v&&o11y.setUser({id:v})},[v]),(0,n.useEffect)(()=>{_&&v&&(l.Ay.identify(v,{email:f,name:y}),l.Ay.capture("github_branch",{branch:p.env.BRANCH||null}))},[v,f,y]),(0,n.useEffect)(()=>{_&&l.Ay.init(j,{api_host:"https://lovable.dev/ingest",ui_host:"https://us.posthog.com",bootstrap:a,session_recording:{maskAllInputs:!1,maskInputOptions:{password:!0}},autocapture:{element_allowlist:["button"]},verbose:!1})},[a]);let S=(0,s.usePathname)();return(0,n.useEffect)(()=>{l.Ay.capture("$pageview")},[S]),(0,r.jsx)(g.Provider,{value:k,children:(0,r.jsxs)(i.so,{client:l.Ay,children:[t,b&&w&&(0,r.jsx)(n.Suspense,{fallback:null,children:(0,r.jsx)(h,{open:w,onOpenChange:N,featureFlagOverrides:E,onFeatureFlagOverrideChange:I,originalFlags:(null==a?void 0:a.featureFlags)||{}})})]})})}j||c.logging.info("Missing NEXT_PUBLIC_POSTHOG_KEY in env; set to 'skip' to disable")},94123:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var r=a(77145),s=a(40702),l=a(83220),i=a(51374),n=a(92918),o=a(15365);function d(e){return(0,l.QY)()?(0,r.jsx)(c,{...e}):(0,r.jsx)(u,{...e})}function c(e){let{children:t,permission:a,featureFlags:s,plans:i,shouldShow:n=!0,fallback:o=null}=e,{currentWorkspace:d}=(0,l.j4)(e=>e);return(0,r.jsx)(m,{workspace:d,permission:a,featureFlags:s,plans:i,shouldShow:n,fallback:o,children:t})}function u(e){let{children:t,permission:a,featureFlags:s,plans:i,shouldShow:n=!0,fallback:o=null}=e,d=(0,l.j4)(e=>e.currentWorkspace);return(0,r.jsx)(m,{workspace:d,permission:a,featureFlags:s,plans:i,shouldShow:n,fallback:o,children:t})}function m(e){var t;let{workspace:a,permission:l,featureFlags:d,plans:c,shouldShow:u,fallback:m,children:p}=e,{isAuthenticated:h}=(0,s.Z2)(),f=(0,o.WW)(),{permissions:g,isLoading:v}=(0,i.S)(),{featureFlags:x,featureFlagOverrides:y}=(0,n.Jp)(),b=!l||g.includes(l),j=null==(t=null==c?void 0:c.some(e=>{var t;return(null==a?void 0:a.plan)===e||(null==a||null==(t=a.plan)?void 0:t.startsWith(e))}))||t;return(!d||d.some(e=>{var t,a;return!!(null!=(a=null!=(t=y[e])?t:null==x?void 0:x[e])&&a)}))&&u&&h&&!v?b&&j||f?(0,r.jsx)(r.Fragment,{children:p}):(0,r.jsx)(r.Fragment,{children:m}):null}}},e=>{e.O(0,[8086,5220,4397,5472,2247,624,8176,9029,6753,8922,8352,2694,2628,4718,8984,2670,397,6415,5889,2181,4056,3279,1054,7179,9898,4041,1839,6567,9730,3851,3466,8891,3161,7127,1689,7358],()=>e(e.s=16838)),_N_E=e.O()}]);