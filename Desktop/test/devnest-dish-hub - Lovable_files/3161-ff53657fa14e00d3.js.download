try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="17618321824302d6d31c39f"}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3161],{1179:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var a=r(53789),n=r(72490),l=r(63851),i=r(69850);let s={permissions:e=>{let{workspaceId:t,projectId:r}=e;return(0,a.j)({queryKey:i.QO.get(t,r),queryFn:async()=>{if(!r&&!t)return[];let e=(0,l.getGoApi)(),a=new URLSearchParams;return r?a.append("projectId",r):t&&a.append("workspaceId",t),e.get("/permissions?".concat(a.toString()))},refetchOnMount:!0,refetchOnWindowFocus:!1,staleTime:3e5,retry:3,placeholderData:n.rX})}}},2231:(e,t,r)=>{"use strict";r.d(t,{h:()=>d});var a=r(77145),n=r(8711),l=r(69730),i=r(72632),s=r(51573),o=r(56024);function d(e){let{options:t,selectedOption:r,onSelect:d,disabled:c=!1,disabledText:u,showCreditDifference:p=!1,currentPlanLimit:m}=e,g=e=>{let t=(0,i.RL)(e);if(p&&void 0!==m){let r=t-m;if(e===s.VL.KTLO)return"5 daily credits";if(r>0)return"+".concat(r," additional credits");if(0===r)return"No additional credits"}return"".concat(t," credits / month")},f=()=>g(r);if(c){let e=u||f();return e?(0,a.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-muted px-3 py-2 text-sm text-muted-foreground",children:e}):null}return(0,a.jsxs)(n.rI,{children:[(0,a.jsxs)(n.ty,{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-background px-3 py-2 text-sm focus:outline-none",children:[(0,a.jsx)("span",{children:f()}),(0,a.jsx)(l.A,{name:"chevron_right",className:"flex-shrink-0 rotate-90",size:"small"})]}),(0,a.jsx)(n.SQ,{className:"max-h-[300px] w-[var(--radix-dropdown-menu-trigger-width)] overflow-auto",align:"start",children:t.map(e=>(0,a.jsxs)(n._2,{onClick:()=>d(e),className:(0,o.cn)("flex w-full cursor-pointer items-center justify-between px-3 py-2 text-sm hover:bg-brand-twilight focus:bg-brand-twilight",r===e&&"bg-brand-twilight-primary text-affirmative-primary-foreground hover:bg-brand-twilight-primary hover:text-affirmative-primary-foreground focus:bg-brand-twilight-primary focus:text-affirmative-primary-foreground"),children:[(0,a.jsx)("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:g(e)}),r===e&&(0,a.jsx)(l.A,{name:"check",size:"small",className:"ml-2 flex-shrink-0"})]},e))})]})}},3201:(e,t,r)=>{"use strict";r.d(t,{R:()=>es,u:()=>ei});var a=r(77145),n=r(13410),l=r(95661),i=r(49974),s=r(53384),o=r(26158),d=r(52811),c=r(20247),u=r(69730),p=r(27458),m=r(72632),g=r(91169),f=r(51573),h=r(76058),x=function(e){return e.SUGGEST_LOWER_PLAN="SUGGEST_LOWER_PLAN",e.FEATURES_TO_TRY="FEATURES_TO_TRY",e.KTLO_OFFER="KTLO_OFFER",e.FEEDBACK="FEEDBACK",e.FINAL_CONFIRMATION="FINAL_CONFIRMATION",e}({});let _=(0,l.createContext)(void 0),b=e=>{let{children:t,targetPlan:r,onCancel:n,workspace:s}=e,o=s.plan!==h.G.KTLO&&r===f.VL.FREE,d=(0,l.useCallback)(()=>o?x.KTLO_OFFER:x.FEEDBACK,[o]),c=(0,l.useMemo)(()=>d(),[d]),[u,p]=(0,l.useState)(c),[m,b]=(0,l.useState)({reason:""}),[v,w]=(0,l.useState)(!1),E=(0,i.et)(),{toCheckout:y}=(0,g.R)(),C=async e=>{w(!0);try{let t=null!=e?e:r;(null==s?void 0:s.id)&&(t&&t!==f.VL.FREE?await y({plan:t,workspaceId:s.id,grandfatheredDiscount:!1,planType:E.planType,changeType:"downgrade"}):(await E.cancelSubscription(),n()))}finally{w(!1)}},j=async()=>{w(!0);try{(null==s?void 0:s.id)&&await y({plan:f.VL.KTLO,workspaceId:s.id,grandfatheredDiscount:!1,planType:"monthly",changeType:"downgrade"})}catch(e){w(!1)}},N={currentStep:u,feedback:m,currentPlan:s.plan,targetPlan:null!=r?r:f.VL.FREE,shouldShowKtloOffer:o,setCurrentStep:p,setFeedback:b,onCancel:n,onConfirm:C,onSwitchToKtlo:j,isLoading:v||E.isCancelSubscriptionLoading,getNextStepAfterSuggestLowerPlan:()=>x.FEATURES_TO_TRY,getNextStepAfterFeatures:d,getNextStepAfterKtlo:()=>x.FEEDBACK,getNextStepAfterFeedback:()=>x.FINAL_CONFIRMATION,getPreviousStepBeforeFeedback:()=>o?x.KTLO_OFFER:x.FEATURES_TO_TRY,getPreviousStepBeforeFinalConfirmation:()=>x.FEEDBACK};return(0,a.jsx)(_.Provider,{value:N,children:t})},v=()=>{let e=(0,l.useContext)(_);if(void 0===e)throw Error("useDowngrade must be used within a DowngradeProvider");return e};var w=r(92912),E=r(6397),y=r(77563),C=r(26846),j=r(39528),N=r(56024);let k=[{value:"technical_issues",label:"I am having too many technical issues"},{value:"too_expensive",label:"It's too expensive"},{value:"not_using",label:"I'm not using Lovable enough"},{value:"missing_features",label:"It's missing features"},{value:"switched_to_competitor",label:"I switched to a competitor"},{value:"other",label:"Other reason"}],P=[{id:"custom-domains",name:"Custom domains",description:"Connect your own domain to your projects",icon:"link"},{id:"team-collab",name:"Team collaboration",description:"Invite team members to work together",icon:"people"},{id:"visual-editor",name:"Visual editor",description:"Edit the frontend of your project instantly",icon:"draw"},{id:"code-editor",name:"Code editor",description:"Edit the backend of your project in code",icon:"code"},{id:"chat-mode",name:"Chat mode",description:"Plan your next step with AI",icon:"message_text"},{id:"security-checks",name:"Security checks",description:"Run checks when publishing with Supabase to find and fix vulnerabilities",icon:"shield"}],D=e=>{let{title:t,description:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(p.Fy,{className:"h-9"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(c.L3,{className:"text-2xl font-medium md:text-3xl",children:t}),r&&(0,a.jsx)(c.rr,{className:"text-base text-muted-foreground",children:r})]})]})},I=()=>{let e=v();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(D,{title:"Why are you downgrading?",description:"We use this information to improve our product."}),(0,a.jsx)(C.z,{value:e.feedback.reason,onValueChange:t=>e.setFeedback({...e.feedback,reason:t}),className:"flex flex-col gap-1",children:k.map(t=>(0,a.jsxs)("div",{className:(0,N.cn)("flex cursor-pointer items-center gap-3 rounded-lg px-4 py-3 transition-colors",e.feedback.reason===t.value?"bg-primary/5":"hover:bg-muted/50"),onClick:()=>e.setFeedback({...e.feedback,reason:t.value}),children:[(0,a.jsx)(C.C,{value:t.value,id:t.value}),(0,a.jsx)(y.Label,{htmlFor:t.value,className:"text-base font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.value))}),(0,a.jsx)(E.p,{placeholder:"Tell us more about your decision...",className:"h-12",maxLength:500,value:e.feedback.additionalNotes,onChange:t=>e.setFeedback({...e.feedback,additionalNotes:t.target.value})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-2",children:[(0,a.jsx)(d.$,{variant:"affirmative",className:"w-full",onClick:()=>{w.Ay.capture(j.rz.FEEDBACK.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"}),(0,a.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>{w.Ay.capture(j.rz.FEEDBACK.CONTINUE_CLICKED,{reason:e.feedback.reason}),e.setCurrentStep(e.getNextStepAfterFeedback())},children:"Downgrade plan"})]})]})})};var S=r(6698),A=r(31088),L=r(82694),T=r(65949),R=r(63851),O=r(19620);let M=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,N.cn)("rounded-xl border bg-background p-5",r),children:t})},F=L.Ik({reason:L.Yj().optional(),additional_notes:L.Yj().max(500,"Additional notes must be less than 500 characters").optional()}),K=()=>{let e=v(),t=(0,R.getGoApi)(),r=(0,S.n)({mutationFn:async()=>{let r=F.parse({reason:e.feedback.reason,additional_notes:e.feedback.additionalNotes});await t.post("/user/cancellation",r),await e.onConfirm()},onSuccess:()=>{w.Ay.capture(j.rz.FINAL_CONFIRMATION.CONFIRM_CLICKED,{from_plan:e.currentPlan,to_plan:e.targetPlan})},onError:e=>{if(O.logging.error("Error submitting feedback:",e),e instanceof T.G){let t=e.errors[0];A.toast.error("Validation Error",{description:t.message})}else{var t;A.toast.error("Error",{description:(null==(t=e.data)?void 0:t.detail)||"Failed to submit feedback"})}}}),n=((e,t)=>{let r=(0,m.m6)(e),a=(0,m.m6)(t),n=(0,m.RL)(e),l=(0,m.RL)(t);if("pro"===r){if("pro"===a)return[{text:"Credit limit will decrease from ".concat(n," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===a)return[{text:"All new projects will be public",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(n," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}if("biz"===r){if("biz"===a)return[{text:"Credit limit will decrease from ".concat(n," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Business plan features",isPositive:!0}];if("pro"===a)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"Credit limit will decrease from ".concat(n," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===a)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"All new projects will be public",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(n," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}return"ktlo"===a?[{text:"Credits will change from ".concat(n," per month to freemium (").concat(5," per day, up to 30 per month)"),isPositive:!1},{text:"No credit rollovers",isPositive:!1},{text:"You keep: Pro features: Private Projects, No Lovable Badge, Roles and Permissions, Custom Domains",isPositive:!0}]:[]})(e.currentPlan,e.targetPlan);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{title:"Continue downgrading?",description:"Keep your momentum. Finish your project. You can do it."}),(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:"mb-4 text-lg font-medium",children:"Here is what will change if you downgrade:"}),(0,a.jsxs)("ul",{className:"flex flex-col gap-4",children:[0===n.length&&(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(u.A,{name:"x",className:"size-5"}),(0,a.jsx)("span",{children:"Features of your current plan"})]}),n.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(u.A,{name:e.isPositive?"check":"x",className:"size-5 ".concat(e.isPositive?"text-green-600":"text-muted-foreground")}),(0,a.jsx)("span",{children:e.text})]},t))]}),(0,a.jsx)(d.$,{variant:"outline",className:"mt-4 w-full",onClick:()=>{w.Ay.capture(j.rz.FINAL_CONFIRMATION.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"})]}),(0,a.jsx)(d.$,{variant:"destructive",className:"w-full",onClick:()=>r.mutate(),loading:r.isPending,children:"Confirm downgrade"})]})},U=()=>{let e=v(),t=async()=>{w.Ay.capture(j.rz.KTLO_OFFER.SWITCH_CLICKED),await e.onSwitchToKtlo()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{title:"Switch to Lite",description:"Try our new Lite plan and retain important features that keep your project going."}),(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:"mb-2 text-lg font-medium",children:"Lite plan"}),(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-medium md:text-4xl",children:"$15"}),(0,a.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"}),(0,a.jsx)("span",{className:"rounded bg-success px-2 py-0.5 text-xs text-success-foreground",children:"40% off"})]}),(0,a.jsx)("ul",{className:"mt-4 flex flex-col gap-3",children:["5 daily credits","Keep custom domains","No Lovable badge","Team settings stay in place","Access to private projects"].map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{name:"check",className:"size-5"}),(0,a.jsx)("span",{children:e})]},t))}),(0,a.jsx)(d.$,{className:"mt-6 w-full",variant:"affirmative",onClick:t,loading:e.isLoading,children:"Switch to Lite"})]}),(0,a.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>{w.Ay.capture(j.rz.KTLO_OFFER.CONTINUE_DOWNGRADE_CLICKED),e.setCurrentStep(e.getNextStepAfterKtlo())},children:"Downgrade plan"})]})},W=()=>{let e=v();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{title:"Have you tried these features?"}),(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:"flex flex-col gap-1.5 md:gap-2",children:P.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg px-2 py-2 transition-colors md:gap-4 md:px-3",children:[(0,a.jsx)("span",{className:"mt-1.5 select-none text-base md:mt-2 md:text-lg",children:(0,a.jsx)(u.A,{name:e.icon,className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,a.jsx)(y.Label,{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))}),(0,a.jsxs)(d.$,{variant:"affirmative",className:"mt-4 w-full",onClick:()=>{w.Ay.capture(j.rz.FEATURE_USAGE.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,m._R)(e.currentPlan||"unknown")]})]}),(0,a.jsx)(d.$,{variant:"outline",onClick:()=>{w.Ay.capture(j.rz.FEATURE_USAGE.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterFeatures())},children:"Downgrade plan"})]})};var G=r(83220),B=r(2231),V=r(47226),z=r(53792);let H=()=>{let e=v(),t=(0,i.et)(),r=(0,G.j4)(e=>e.currentWorkspace),{isEnterprisePlan:n}=(0,m.cb)(t.currentPlan.id),s=(0,l.useMemo)(()=>(0,m.e3)(e.currentPlan,e.currentPlan.startsWith(z.lV)?"biz":"pro"),[e.currentPlan]),o=(0,l.useMemo)(()=>(null==r?void 0:r.plan)&&s.length>0&&!s.some(e=>e===(null==r?void 0:r.plan))?s[0]:null,[s,null==r?void 0:r.plan]),[c,u]=(0,l.useState)(o);(0,l.useEffect)(()=>{t.setPlanType("monthly")},[t.setPlanType]),(0,l.useEffect)(()=>{(null==r?void 0:r.plan)&&!c&&e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},[null==r?void 0:r.plan,c,e]);let p=async()=>{c&&(w.Ay.capture(j.rz.SUGGEST_LOWER_PLAN.DOWNGRADE_CREDITS_CLICKED,{current_plan_id:e.currentPlan,target_plan_id:c,target_plan_type:t.planType,plan_price:t.getDisplayPrice(c)}),await e.onConfirm(c))};return c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{title:"Downgrade now",description:"Do you want to downgrade by changing your monthly credits?"}),(0,a.jsxs)(M,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-lg font-medium",children:"Reduce monthly credits"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:["$",t.getDisplayPrice(c)]}),(0,a.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"})]}),(0,a.jsx)(B.h,{options:s,selectedOption:c,disabled:t.shouldDisableWorkspaceAdminActions,onSelect:u})]}),(0,a.jsx)(d.$,{className:"mt-4 w-full",variant:"affirmative",disabled:c===e.currentPlan||n||t.shouldDisableWorkspaceAdminActions,onClick:p,loading:e.isLoading,children:"Downgrade credits"})]}),(0,a.jsx)(d.$,{variant:"outline",onClick:()=>{w.Ay.capture(j.rz.SUGGEST_LOWER_PLAN.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},children:"Downgrade plan"})]}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(V.E,{className:"h-16 w-full"})})},Y=()=>{let e=v();return(0,a.jsx)(a.Fragment,{children:(()=>{switch(e.currentStep){case x.SUGGEST_LOWER_PLAN:return(0,a.jsx)(H,{});case x.FEATURES_TO_TRY:return(0,a.jsx)(W,{});case x.KTLO_OFFER:return(0,a.jsx)(U,{});case x.FEEDBACK:return(0,a.jsx)(I,{});case x.FINAL_CONFIRMATION:return(0,a.jsx)(K,{});default:return null}})()})};var Z=r(8974),$=r(63424),q=r(52873),J=r(69994),Q=r(87252),X=r(30849),ee=r(89931);let et=e=>{let{workspace:t}=e,r=(0,m._R)(t.plan),n=t.billing_period_end_date?(0,Z.GP)((0,ee.ay)(t.billing_period_end_date),"MMM d, yyyy"):"";return(0,a.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,a.jsx)(X.default,{src:"/img/logo/lovable-logo-icon.svg",alt:"Lovable",width:36,height:36,className:"h-9 w-9"}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsxs)("p",{className:"text-base font-medium text-foreground",children:["You're on ",r," Plan"]}),(0,a.jsx)("p",{className:"text-base text-muted-foreground",children:t.plan_scheduled?"free"===t.plan_scheduled?"Cancels ".concat(n):"Updates ".concat(n):"Renews ".concat(n)})]})]})},er=e=>{let{workspace:t,open:r,onOpenChange:n}=e,{createPortalSession:l,isCreatePortalSessionLoading:s,setFreePlanAsTarget:o,onDowngradeClick:u}=(0,i.et)(),p=async()=>{await l()},m=async()=>{await l()},g="free"===t.plan_scheduled;return(0,a.jsx)(c.lG,{open:r,onOpenChange:()=>{n(!1)},children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{children:"Manage Plan"}),(0,a.jsx)(c.rr,{children:"Subscription & Billing Settings"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-4 border-y py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 rounded-xl bg-muted p-4",children:[(0,a.jsx)(et,{workspace:t}),g?(0,a.jsx)(d.$,{onClick:m,disabled:s,variant:"outline",children:s?"Opening...":"Cancel Downgrade"}):(0,a.jsx)(d.$,{variant:"outline",onClick:()=>{o(),u(),n(!1)},children:"Downgrade to Free"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.$,{variant:"secondary",onClick:p,disabled:s,className:"w-5/6",children:s?"Opening...":"View Invoices"}),(0,a.jsx)(d.$,{onClick:p,disabled:s,className:"w-full",children:s?"Opening...":"Payment Preferences"})]})]})})},ea=e=>{let{workspace:t,shouldDisableWorkspaceAdminActions:r}=e,{cancelSubscriptionChanges:n,isCancelSubscriptionChangesLoading:l}=(0,i.et)();if(!t.plan_scheduled)return null;let s=e=>{let t=(0,m._R)(e),r=(0,m.RL)(e);return r>0?"".concat(t," (").concat(r," credits)"):t},o=s(t.plan),c=s(t.plan_scheduled),p=t.billing_period_end_date?(0,Z.GP)((0,ee.ay)(t.billing_period_end_date),"MMM d, yyyy"):"",g=async()=>{await n()};return(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("div",{className:"space-y-3 rounded-md bg-warning p-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(u.A,{name:"info_circle",size:"small",className:"mt-0.5 flex-shrink-0 text-warning-primary"}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-warning-primary",children:["Pending changes scheduled for ",p]}),(0,a.jsxs)("p",{className:"text-sm text-warning-primary",children:[o," → ",c]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(d.$,{variant:"warning",size:"default",disabled:l||r,onClick:g,children:l?"Canceling...":"Cancel changes"})})]})]})})})},en=e=>{let{workspace:t}=e,[r,n]=(0,l.useState)(!1),s=(0,J.D)(t),{currentPlan:o,shouldDisableWorkspaceAdminActions:c}=(0,i.et)(),p=(0,$.IJ)(s.currentlyConsuming,s.sources),g=(0,m._R)(o.id),f=t.plan,{isPaidPlan:h,isLegacyPlan:x,isEnterprisePlan:_}=(0,m.cb)(f),b="free"===f||"ktlo"===f,v=()=>{let e="ambassador"===t.plan,r="ktlo"===t.plan;return(!x&&!e&&!r||(null==t?void 0:t.billing_period_credits_limit)!==0&&(null==t?void 0:t.billing_period_credits_limit)!==void 0)&&"free"!==t.plan&&!!t.billing_period_credits_limit&&!(t.billing_period_credits_limit<=0)&&!0},w=(()=>{if(b||"free"===t.plan_scheduled)return{text:"No credits will rollover",icon:"x"};if(!v())return null;let e="annual"===t.plan_type,r=t.billing_period_credits_limit;return{text:"Up to ".concat((0,Q.Q)(e?12*r:r)," credits rollover"),icon:"check"}})(),E=(()=>{if(b)return"Daily credits reset at midnight UTC";if(!v()||!s.creditsResetDate||(null==t?void 0:t.plan_scheduled)==="free")return null;let e=(e=>{let t=new Date(e);return t.setTime(t.getTime()+18e5),t})(s.creditsResetDate),r=(0,Z.GP)(e,"dd MMM 'at' h:mm a"),a=t.plan_scheduled?(0,m.RL)(t.plan_scheduled):null,n=null!=a?a:t.billing_period_credits_limit;return n?"".concat((0,Q.Q)(n)," credits reset on ").concat(r):"Monthly credits reset on ".concat(r)})();return h?(0,a.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 lg:max-w-[888px]",children:[(0,a.jsx)(ea,{workspace:t,shouldDisableWorkspaceAdminActions:c}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 lg:grid lg:grid-cols-3",children:[(0,a.jsx)(q.Zp,{className:"rounded-xl bg-muted p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex h-full flex-col justify-between gap-4",children:[(0,a.jsx)(et,{workspace:t}),!_&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)(d.$,{variant:"outline",size:"default",disabled:c,onClick:()=>n(!0),children:"Manage"})})]})}),(0,a.jsx)(q.Zp,{className:"col-span-2 rounded-xl bg-muted p-4 shadow-sm outline outline-1 outline-offset-[-1px] outline-border",children:(0,a.jsxs)("div",{className:"flex h-full flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-base font-medium text-foreground",children:"Credits remaining"}),(0,a.jsxs)("p",{className:"text-sm font-normal text-muted-foreground",children:[(0,Q.Q)(s.totalRemaining)," of"," ",(0,Q.Q)(s.totalAllocation)]})]}),(0,a.jsx)($.bY,{progressData:s}),(s.currentlyConsuming||0===s.totalRemaining)&&(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:order-2",children:[(0,a.jsx)("div",{className:"ml-1 mr-0.5 h-2 w-2 rounded-full ".concat(p)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,$.bT)(s.currentlyConsuming)})]}),(w||E)&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:order-1",children:[w&&(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(u.A,{name:w.icon,size:"small",className:"mt-0.5 text-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:w.text})]}),E&&(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(u.A,{name:"check",size:"small",className:"mt-0.5 text-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:E})]})]})]})})]})})]}),!_&&(0,a.jsx)(er,{workspace:t,open:r,onOpenChange:n})]}):"inactive"!==f?(0,a.jsx)(q.Zp,{className:"flex w-full flex-col gap-4 bg-muted p-4",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["You're currently on plan: ",(0,a.jsx)("span",{className:"font-medium capitalize",children:g}),". "]})," ",(0,a.jsx)(el,{workspace:t,children:"Manage your payment preferences and view past invoices"}),", or change your plan below."]})}):void 0},el=e=>{let{workspace:t,children:r}=e,{createPortalSession:n,isCreatePortalSessionLoading:l}=(0,g.R)();return(0,a.jsx)("span",{role:"button",tabIndex:0,onClick:()=>{l||n({workspaceId:t.id})},onKeyDown:e=>{l||("Enter"===e.key||" "===e.key)&&n({workspaceId:t.id})},className:"inline cursor-pointer underline disabled:opacity-50","aria-disabled":l,children:r})},ei=e=>{let{workspace:t,onClose:r}=e,{targetDowngradePlan:n,setTargetDowngradePlan:l}=(0,i.et)();return(0,a.jsx)(c.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:(0,a.jsx)(b,{targetPlan:null!=n?n:void 0,onCancel:()=>{l(null),r()},workspace:t,children:(0,a.jsx)(Y,{})})})},es=e=>{let{workspace:t}=e,{setPricingScenario:r}=(0,i.et)(),g="inactive"===t.plan,[f,h]=(0,l.useState)(!1),x=(0,m.cb)(t.plan).isEnterprisePlan,[_,b]=(0,l.useState)(!1),[v,w]=(0,l.useState)(null),E=(0,n.useSearchParams)();return(0,l.useEffect)(()=>{r("billing")},[r]),(0,l.useEffect)(()=>{let e=E.get("planChanged"),t=E.get("planName");if("true"===e&&t){w({planName:t}),b(!0);let e=new URL(window.location.href);e.searchParams.delete("planChanged"),e.searchParams.delete("planName"),window.history.replaceState({},"",e.toString())}},[E]),(0,a.jsxs)(o.Pt,{title:"Plans & credits",value:"billing",docsLink:"https://docs.lovable.dev/user-guides/messaging-limits",children:[g?(0,a.jsxs)("span",{children:["Your subscription is currently ",(0,a.jsx)("span",{className:"font-medium",children:"inactive"}),". You can select a new plan below to restore full functionality to your workspace."]}):null,!f&&(0,a.jsx)(en,{workspace:t}),!x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.s,{showStudentDiscountCard:!0}),(0,a.jsx)(c.lG,{open:_,onOpenChange:b,children:(0,a.jsxs)(c.Cf,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(p.Fy,{className:"h-9"}),(0,a.jsxs)(c.c7,{children:[(0,a.jsxs)(c.L3,{className:"text-2xl md:text-3xl",children:["Plan successfully changed to ",null==v?void 0:v.planName,"!"]}),(0,a.jsx)(c.rr,{children:"Your new plan will be activated at the start of the next billing cycle."})]})]}),(0,a.jsx)(c.Es,{fullWidthButtons:!0,className:"flex-col gap-2",children:(0,a.jsxs)(d.$,{onClick:e=>{e.preventDefault(),e.stopPropagation(),b(!1),w(null),h(!1)},className:"w-full",children:[(0,a.jsx)(u.A,{name:"check",size:"small",className:"mr-2"}),"Got it!"]})})]})})]})]})}},4076:(e,t,r)=>{"use strict";r.d(t,{Iw:()=>w,Om:()=>v,ProjectProvider:()=>_,mb:()=>y,vd:()=>E});var a=r(77145),n=r(6698),l=r(81496),i=r(13410),s=r(95661),o=r(31088),d=r(84510),c=r(40702),u=r(83220),p=r(28717),m=r(63851),g=r(35418),f=r(19620),h=r(7204);let x=(0,s.createContext)(null),_=e=>{let{children:t,projectId:r}=e;return(0,a.jsx)(b,{projectId:r,children:t},r)},b=e=>{let{children:t,projectId:r}=e,_=(0,s.useRef)((0,d.vt)(()=>({projectId:r,project:void 0,isDeleting:!1,hasPermissionDenied:!1}))),[b,v]=(0,s.useState)(0),w=(0,i.useRouter)(),{isAuthenticated:E}=(0,c.Z2)(),{userData:y}=(0,p.ur)(),C=(0,u.Ic)(),j=(0,u.zC)();(0,s.useEffect)(()=>{if(!r)return;let e=(0,l.H9)(g.db,"projects",r),t=(0,l.aQ)(e,e=>{let t=e.data();t&&!t.deleted_at?(_.current.setState({project:t,hasPermissionDenied:!1}),t.workspace_id&&C(r,t.workspace_id)):_.current.getState().isDeleting||(f.logging.error("PROJECT NOT FOUND",{projectId:r,docExists:e.exists(),userId:null==y?void 0:y.id}),w.push("/projects/not-found"))},e=>{f.logging.error("PROJECT PERMISSION ERROR",{error:e,projectId:r}),"permission-denied"===e.code?_.current.setState({hasPermissionDenied:!0}):o.toast.error("Error",{description:"Failed to fetch project."})});return()=>{t(),j()}},[r,y,E,w,b,j]);let N=(0,n.n)({mutationFn:async e=>{let{project:t}=_.current.getState();if(!t)return;let a=(0,m.getGoApi)();await a.put("/projects/".concat(r),e)},onMutate:e=>{let t=_.current,{project:r}=t.getState();r&&t.setState({project:{...r,...e}})},throwOnError:!0}),k=(0,n.n)({mutationFn:e=>e?(0,m.getGoApi)().put("/projects/".concat(r,"/visibility"),{visibility:e}):Promise.resolve(),onSuccess:(e,t)=>{"public"===t?o.toast.success("Visibility updated",{description:"Your project is now public."}):"private"===t?o.toast.success("Visibility updated",{description:"Your project is now private."}):"draft"===t?o.toast.success("Visibility updated",{description:"Your project is now personal."}):o.toast.success("Visibility updated")},onError:()=>{o.toast.error("Error",{description:"Failed to update visibility"})}}),P=(0,n.n)({mutationFn:async e=>{let t=(0,m.getGoApi)(),a=await t.post("/projects/".concat(r,"/badge/visibility"),{hide_badge:e});try{await (0,h.o)({projectId:r})}catch(e){f.logging.error("Error updating deployment",{error:e})}return a}});((e,t)=>{let r=(0,s.useRef)(void 0);return(0,s.useEffect)(()=>{"pending"===e?r.current=o.toast.loading(t.pending.title,t.pending.options):"success"===e?r.current?(o.toast.success(t.success.title,{id:r.current,...t.success.options,duration:3e3,dismissible:!1}),r.current=void 0):o.toast.success(t.success.title,t.success.options):"error"===e&&(r.current?(o.toast.error(t.error.title,{id:r.current,...t.error.options,duration:3e3,dismissible:!1}),r.current=void 0):o.toast.error(t.error.title,t.error.options))},[e])})(P.status,{pending:{title:"Updating badge visibility..."},success:{title:"Badge visibility updated"},error:{title:"Failed to update badge visibility",options:{duration:3,description:"We couldn't update the badge visibility right now. Please try again in a few minutes."}}});let D=(0,s.useCallback)(()=>{v(e=>e+1)},[]),I={store:_.current,updateProject:(e,t)=>{N.mutate(e,{onSuccess:()=>{(null==t?void 0:t.onSuccess)&&t.onSuccess()},onError:e=>{(null==t?void 0:t.onError)&&t.onError(e)}})},setVisibilityMutation:k,setBadgeVisibility:P.mutateAsync,refetchProject:D};return(0,a.jsx)(x.Provider,{value:I,children:t})};function v(){let e=(0,s.useContext)(x);if(!e)throw Error("useProjectContext must be used within a ProjectProvider");return e}function w(e){let{store:t}=v();return t(e)}function E(){let e=(0,s.useContext)(x);if(e)return e}function y(e){let t=E();return null==t?void 0:t.store(e)}},6397:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(77145),n=r(95661),l=r(56024);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base transition-colors duration-150 ease-in-out file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground hover:border-ring/20 focus-visible:border-ring focus-visible:outline-none disabled:cursor-not-allowed disabled:border-input disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},7204:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var a=r(40074);let n=async e=>{let{projectId:t,deploymentId:r}=e;if(!t)throw Error("Project ID is required");let n=a.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",l=new URL("".concat(n,"://deployments.").concat("lovable.app"));(l=new URL("https://proxy-worker.lovable.run")).pathname="/__l5e/proxy/new-deployment";let i=await fetch(l.toString(),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({project_id:t,deployment_id:r})});if(!i.ok)throw Error("Failed to update deployment ID: ".concat(i.status));return i}},8711:(e,t,r)=>{"use strict";r.d(t,{rI:()=>c,hO:()=>v,SQ:()=>_,I:()=>m,_2:()=>b,lp:()=>E,dc:()=>p,Hr:()=>f,Ht:()=>w,mB:()=>y,V0:()=>C,lv:()=>g,M5:()=>x,nV:()=>h,ty:()=>u});var a=r(77145),n=r(8464),l=r(95661),i=r(69730),s=r(56024),o=r(20247);class d extends l.Component{static getDerivedStateFromError(e){return{hasError:!0,componentStack:e.stack||"",error:e}}componentDidCatch(e,t){this.setState({componentStack:t.componentStack||"",error:e}),console.log({error:e,errorInfo:t})}render(){if(this.state.hasError){var e;return(0,a.jsxs)("div",{style:{position:"absolute",top:0,left:0,zIndex:1e4,backgroundColor:"red"},children:[(0,a.jsx)("h2",{children:null==(e=this.state.error)?void 0:e.message}),(0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:this.state.componentStack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,componentStack:"",error:null}}}let c=e=>{let{...t}=e;return(0,a.jsx)(d,{children:(0,a.jsx)(o.MV.Provider,{value:{allowNestedDialog:!1},children:(0,a.jsx)(n.bL,{...t})})})},u=n.l9,p=n.ZL,m=n.YJ,g=n.Pb,f=n.z6,h=l.forwardRef((e,t)=>{let{className:r,inset:l,children:o,hideChevron:d,...c}=e;return(0,a.jsxs)(n.ZP,{ref:t,className:(0,s.cn)("flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",r),...c,children:[o,!d&&(0,a.jsx)(i.A,{name:"chevron_right",className:"ml-auto"})]})});h.displayName=n.ZP.displayName;let x=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.G5,{ref:t,className:(0,s.cn)("z-[10000] min-w-32 overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...l})});x.displayName=n.G5.displayName;let _=l.forwardRef((e,t)=>{let{className:r,sideOffset:l=4,...i}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:t,sideOffset:l,className:(0,s.cn)("z-[10000] min-w-32 overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","origin-[var(--radix-dropdown-menu-content-transform-origin)]",r),...i})})});_.displayName=n.UC.displayName;let b=l.forwardRef((e,t)=>{let{className:r,inset:l,...i}=e;return(0,a.jsx)(n.q7,{ref:t,className:(0,s.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm text-foreground outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent [&>svg]:size-4 [&>svg]:shrink-0",l&&"pl-8",r),...i})});b.displayName=n.q7.displayName;let v=l.forwardRef((e,t)=>{let{className:r,children:l,checked:o,...d}=e;return(0,a.jsxs)(n.H_,{ref:t,className:(0,s.cn)("relative flex cursor-default select-none items-center rounded-lg py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent",r),checked:o,...d,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(i.A,{name:"check",className:"h-4 w-4"})})}),l]})});v.displayName=n.H_.displayName;let w=l.forwardRef((e,t)=>{let{className:r,children:l,selectedIndicatorClassName:o,arrowLocation:d="start",...c}=e;return(0,a.jsxs)(n.hN,{ref:t,className:(0,s.cn)("relative flex cursor-default select-none items-center justify-start gap-x-1 rounded-lg px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent","start"===d&&"pl-7",r),...c,children:["start"===d&&(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(i.A,{name:"check",size:"small",className:(0,s.cn)("ml-auto",o)})})}),l,"end"===d&&(0,a.jsx)(n.VF,{children:(0,a.jsx)(i.A,{name:"check",size:"small",className:(0,s.cn)("ml-auto",o)})})]})});w.displayName=n.hN.displayName;let E=l.forwardRef((e,t)=>{let{className:r,inset:l,...i}=e;return(0,a.jsx)(n.JU,{ref:t,className:(0,s.cn)("px-2 py-1.5 text-sm font-medium",l&&"pl-8",r),...i})});E.displayName=n.JU.displayName;let y=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.wv,{ref:t,className:(0,s.cn)("-mx-1 my-1 h-px bg-border",r),...l})});y.displayName=n.wv.displayName;let C=e=>{let{className:t,...r}=e;return(0,a.jsx)("span",{className:(0,s.cn)("ml-auto text-xs tracking-widest opacity-60",t),...r})};C.displayName="DropdownMenuShortcut"},8904:(e,t,r)=>{"use strict";r.d(t,{U:()=>d});var a=r(18502),n=r(51374),l=r(4076),i=r(63851),s=r(69850),o=r(74507);let d=e=>{let t=(0,l.mb)(e=>e.projectId),{permitted:r}=(0,n.J)(o.eZ.ManageProjectSettings),{data:d,isLoading:c}=(0,a.I)({queryKey:s.gO.integration(null!=e?e:"","supabase"),queryFn:async()=>{let t=await (0,i.getGoApi)().get("/projects/".concat(e,"/integrations/supabase"));return""===t.supabase_project_id?null:t},enabled:!!e&&t===e&&r});return{supabaseIntegrationData:d,isSupabaseIntegrationDataLoading:c}}},19695:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var a=r(77145);r(95661);var n=r(58295),l=r(56024);let i=e=>{let{showTooltip:t=!0,tooltipContent:r,children:i,className:s,align:o,side:d,triggerClassName:c,...u}=e;return t?(0,a.jsxs)(n.m_,{...u,children:[(0,a.jsx)(n.k$,{asChild:!0,children:(0,a.jsx)("div",{className:c,children:i})}),(0,a.jsx)(n.ZI,{className:(0,l.cn)("max-w-[45ch]",s),align:o,side:d,children:r})]}):i}},20247:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>f,Es:()=>x,HM:()=>p,L3:()=>_,MV:()=>o,c7:()=>h,lG:()=>d,rr:()=>b,zM:()=>c});var a=r(77145),n=r(36137),l=r(95661),i=r(56024),s=r(69730);let o=(0,l.createContext)({allowNestedDialog:!0}),d=e=>{let{...t}=e;if(!(0,l.useContext)(o).allowNestedDialog){let e=Error("Dialogs must not be used inside of dropdowns or context menus. Look at RootDialog.tsx for a way to render a dialog using a hook or render the dialog above the dropdown or context menu");o11y.captureException(e)}return(0,l.useEffect)(()=>()=>{document.body.style.pointerEvents=""},[]),(0,a.jsx)(n.bL,{...t,onOpenChange:e=>{var r;e||setTimeout(()=>{document.body.style.pointerEvents=""},250),null==(r=t.onOpenChange)||r.call(t,e)}})},c=n.l9,u=n.ZL,p=n.bm,m=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-[10000] bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...l})});m.displayName=n.hJ.displayName;let g={sm:"md:max-w-sm",md:"md:max-w-lg",lg:"md:max-w-2xl",xl:"md:max-w-[1200px]","2xl":"md:max-w-[1440px]"},f=l.forwardRef((e,t)=>{let{className:r,children:l,hideCloseButton:o,blurOverlay:d,blackoutOverlay:c,size:p="md",...f}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(m,{className:(0,i.cn)("[&_[data-radix-dialog-overlay]]:bg-black",d&&"backdrop-blur-sm",c&&"bg-background")}),(0,a.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-1/2 top-1/2 z-[10000] grid w-full max-w-[95vw] -translate-x-1/2 -translate-y-1/2 gap-4 rounded-xl border bg-background p-6 shadow-modal duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",g[p],r),...f,children:[l,!o&&(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)(s.A,{name:"x"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let h=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-left",t),...r})};h.displayName="DialogHeader";let x=e=>{let{className:t,fullWidthButtons:r,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-row justify-between gap-2 sm:justify-end [&>*]:w-full sm:[&>*]:w-auto",r&&"sm:[&>*]:w-full",t),...n})};x.displayName="DialogFooter";let _=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-medium leading-none tracking-tight",r),...l})});_.displayName=n.hE.displayName;let b=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...l})});b.displayName=n.VY.displayName},21016:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,f:()=>l});var a=r(95661),n=r(32738);let l={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},i=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let t=(0,n.A)(),r=(0,a.useMemo)(()=>"number"==typeof e?e:l[e],[e]);return(0,a.useMemo)(()=>void 0!==t.width&&t.width<r,[t.width,r])}},21227:(e,t,r)=>{"use strict";r.d(t,{D:()=>n});var a=r(54436);let n=()=>{let e={},t=(0,a.R)("_fbc");t&&(e.fbc=t);let r=(0,a.R)("_fbp");r&&(e.fbp=r);let n=(0,a.R)("_ttp");n&&(e.ttp=n);let l=(0,a.R)("ttclid");return l&&(e.ttclid=l),e}},26158:(e,t,r)=>{"use strict";r.d(t,{G1:()=>f,Jz:()=>m,Pt:()=>g,WQ:()=>p,cY:()=>c,mm:()=>u});var a=r(77145),n=r(34400),l=r(47679),i=r(69730),s=r(21016),o=r(56024),d=r(39055);let c=e=>{let{href:t,className:r}=e;return(0,a.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:(0,o.cn)("flex items-center gap-1 text-sm text-muted-foreground duration-150 ease-in-out hover:text-muted-foreground/80",r),children:[(0,a.jsx)(i.A,{name:"question_circle",size:"small"}),"Docs"]})},u=e=>{let{children:t,className:r,...l}=e;return(0,a.jsx)(n.tU,{className:(0,o.cn)("mt-0 flex w-full flex-1 flex-col items-start overflow-hidden md:flex-row",r),orientation:"vertical",...l,children:t})},p=e=>{let{children:t,className:r,hasActiveTab:l,...i}=e;return(0,a.jsxs)(n.j7,{className:(0,o.cn)("mt-[22px] flex h-full w-full flex-col gap-0.5 overflow-y-auto px-4 py-6 md:mt-0 md:w-[240px] md:flex-nowrap md:border-r",r,l?"hidden md:flex":"flex"),...i,children:[(0,a.jsx)(h,{hideBackButton:!0,className:"mt-[22px]",children:"Settings"}),t]})},m=e=>{let{children:t,className:r,...l}=e;return(0,a.jsx)(n.Xi,{className:(0,o.cn)("flex min-h-10 w-full items-center justify-start gap-3 rounded-md px-2.5 py-2 text-start text-base data-[state=active]:bg-muted hover:bg-muted-hover md:min-h-8 md:w-auto md:gap-2 md:text-sm [&>svg]:size-5 md:[&>svg]:size-4",r),...l,children:t})},g=e=>{let{children:t,className:r,title:l,description:i,docsLink:s,descriptionAction:u,badge:p,customBadge:m,...g}=e;return(0,a.jsxs)(n.av,{className:(0,o.cn)("flex max-h-full w-full flex-1 flex-col gap-6 overflow-y-auto px-6 pb-6 pt-20 data-[state=inactive]:hidden focus:outline-none md:px-10 md:pt-6",r),...g,children:[l&&(0,a.jsxs)("div",{className:"hidden w-full flex-col gap-2 border-b pb-3 md:flex",children:[(0,a.jsxs)("h4",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,a.jsx)("span",{"data-testid":"settings-tab-title",children:l}),p&&(0,a.jsx)(d.x,{badge:p}),m]}),i&&(0,a.jsxs)("div",{className:(0,o.cn)("flex items-start justify-between gap-2 text-sm text-muted-foreground"),children:[(0,a.jsx)("div",{className:"",children:i}),s&&(0,a.jsx)(c,{href:s}),u&&u]})]}),(0,a.jsx)(h,{descriptionAction:u,children:l}),t]})},f=e=>{let{title:t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("mb-1 mt-6 px-3 text-sm font-medium text-muted-foreground first:mt-0 md:text-xs"),children:t})},h=e=>{let{children:t,className:r,hideBackButton:n=!1,descriptionAction:d,...c}=e,{openSettings:u}=(0,l.t)();return(0,s.A)("md")?(0,a.jsxs)("div",{className:(0,o.cn)("absolute inset-x-0 top-0 z-20 flex min-h-8 items-center justify-between border-b bg-background px-2 py-3 md:hidden",r),...c,children:[(0,a.jsx)("div",{className:"flex items-baseline",children:!n&&(0,a.jsxs)("button",{className:(0,o.cn)("flex items-center gap-1 text-base md:text-sm"),onClick:()=>u("settings"),"aria-label":"Back to settings menu",children:[(0,a.jsx)(i.A,{name:"chevron_left",size:"default"})," Settings"]})}),(0,a.jsx)("div",{className:"absolute left-1/2 flex -translate-x-1/2 items-baseline justify-center text-center text-lg font-medium","data-testid":"settings-tab-mobile-title",children:t}),(0,a.jsx)("div",{className:"flex min-h-7 items-baseline pr-0.5",children:d})]}):null}},26846:(e,t,r)=>{"use strict";r.d(t,{C:()=>o,z:()=>s});var a=r(77145),n=r(24139),l=r(95661),i=r(56024);let s=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.bL,{className:(0,i.cn)("grid gap-2",r),...l,ref:t})});s.displayName=n.bL.displayName;let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.q7,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...l,children:(0,a.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"aspect-square h-2.5 w-2.5 shrink-0 rounded-full bg-primary"})})})});o.displayName=n.q7.displayName},27458:(e,t,r)=>{"use strict";r.d(t,{Fy:()=>F,I_:()=>U,Qn:()=>K,Wu:()=>M,gu:()=>O});var a=r(77145),n=r(71855),l=r(72035),i=r(67336),s=r(43646),o=r(55950),d=r(88281),c=r(9516),u=r(43804),p=r(50551),m=r(83696),g=r(82341),f=r(91638),h=r(24098),x=r(61424),_=r(2479),b=r(83649),v=r(92976),w=r(70001),E=r(8369),y=r(13870),C=r(61753),j=r(58219),N=r(75962),k=r(57550),P=r(51854),D=r(31740),I=r(5423),S=r(94634),A=r(78181),L=r(68686),T=r(18229);let R={Supabase:m.default,Lovable:_.default,LovableMonotone:s.default,LovableWithTextLight:x.default,LovableWithTextDark:h.default,GitHub:N.default,X:L.default,Reddit:v.default,PayPal:b.default,Revolut:w.default,Linkedin:f.default,Discord:o.default,Figma:i.default,FigmaColor:l.default,BuilderIO:n.default,Youtube:T.default,Google:d.default,OpenAI:u.default,Anthropic:c.default,ThreeJS:g.default,Resend:p.default,Vite:A.default,ReactLogo:P.default,ShadcnLogo:D.default,TailwindLogo:I.default,TypescriptLogo:S.default,Apple:j.default,Outlook:k.default,ShopifyLogomark:E.default,ShopifyLogotype:y.default,StripeAtlas:C.default},O=e=>{let{name:t,...r}=e,n=R[t];return(0,a.jsx)(n,{fill:"currentColor",...r})},M=e=>(0,a.jsx)(O,{...e,name:"Supabase"}),F=e=>(0,a.jsx)(O,{...e,name:"Lovable"}),K=e=>(0,a.jsx)(O,{...e,name:"LovableWithTextLight"}),U=e=>(0,a.jsx)(O,{...e,name:"LovableWithTextDark"})},32738:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(95661);let n=()=>{let[e,t]=(0,a.useState)({width:void 0,height:void 0});return(0,a.useEffect)(()=>{{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},39055:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var a=r(77145),n=r(67844),l=r(56024);let i={pro:"brand-twilight",business:"brand-twilight",enterprise:"brand-twilight",admin:"brand-saffron",labs:"brand-twilight",internal:"secondary",soon:"brand-saffron"},s={pro:"pro",business:"business",enterprise:"enterprise",admin:"admin",labs:"labs",internal:"internal",soon:"Coming Soon"},o=e=>{let{badge:t,className:r}=e;return(0,a.jsx)(n.E,{variant:i[t],className:(0,l.cn)("capitalize",r),children:s[t]})}},39528:(e,t,r)=>{"use strict";r.d(t,{$6:()=>a,LT:()=>m,Ue:()=>n,aw:()=>s,fF:()=>p,h6:()=>d,iK:()=>u,lY:()=>o,mb:()=>f,nA:()=>i,qE:()=>g,rz:()=>l,yD:()=>c});let a={FIRST_INTERACT_AFTER_GEN:"project:first_interact_after_gen",TABS:{CHAT_OPENED:"project:tabs:chat_opened",HISTORY_OPENED:"project:tabs:history_opened"},HEADER:{SETTINGS_OPENED:"project:header:settings_opened",SIDEBAR_TOGGLED:"project:header:sidebar_toggled",CHAT_FULLSCREEN_TOGGLED:"project:header:chat_fullscreen_toggled"},SETTINGS:{AGENT_MODE_DISABLED:"project:settings:agent_mode_disabled"},CREATION:{DONE_AND_RETAINED_VIEW:"project:creation:done_and_retained_view",API_KEY_DETECTED:"project:creation:api_key_detected",API_KEY_WARNING_DISMISSED:"project:creation:api_key_warning_dismissed"},HISTORY:{CARD_SELECTED:"project:history:card_selected"},BOOKMARK:{ADDED:"project:bookmark:added",REMOVED:"project:bookmark:removed"},CODE_CARD:{VIEW_CODE_CLICKED:"project:code_card:view_code_clicked",RESTORE_CLICKED:"project:code_card:restore_clicked",PREVIEW_CLICKED:"project:code_card:preview_clicked"},MERMAID:{DIAGRAM_OPENED:"project:mermaid:diagram_opened"},ELLIPSIS:{RESTORE_CLICKED:"project:ellipsis:restore_clicked",PREVIEW_CLICKED:"project:ellipsis:preview_clicked",COPY_LINK_CLICKED:"project:ellipsis:copy_link_clicked"},CONSOLE:{EXITED_VIA_CARD:"project:console:exited_via_card",EXITED_VIA_BUTTON:"project:console:exited_via_button",DIFF_COPIED:"project:console:diff_copied",GITHUB_LINK_CLICKED:"project:console:github_link_clicked",RESTORE_VERSION_CLICKED:"project:console:restore_version_clicked"},PREVIEW:{DEVICE_CHANGED:"project:preview:device_changed"},KNOWLEDGE:{SAVED:"project:knowledge:saved"},CODE_EDITOR:{SAVED:"project:code_editor:saved",DISCARDED:"project:code_editor:discarded",DEV_MODE_TOGGLE_PRESSED:"project:code_editor:dev_mode_toggle_pressed"},CHAT:{MESSAGE_SENT:"chat_message_sent",API_KEY_DETECTED:"project:chat:api_key_detected",API_KEY_WARNING_DISMISSED:"project:chat:api_key_warning_dismissed",IMAGE_COPIED:"project:chat:image_copied",IMAGE_ADDED_TO_INPUT:"project:chat:image_added_to_input",VOICE_INPUT_STOPPED:"project:chat:voice_input_stopped",SCREENSHOT_CAPTURED:"project:chat:screenshot_captured",NOTIFICATIONS_ENABLED:"project:chat:notifications_enabled"},ONBOARDING_TOUR:{STEP_VIEWED_ONBOARDING_START:"project:onboarding_tour:step_viewed:onboarding-start",STEP_VIEWED_VISUAL_EDITOR_TOGGLE:"project:onboarding_tour:step_viewed:visual-editor-toggle",STEP_VIEWED_MAIN_MENU:"project:onboarding_tour:step_viewed:main-menu",STEP_VIEWED_PREVIEW_URL_BAR:"project:onboarding_tour:step_viewed:preview-url-bar",STEP_VIEWED_SUPABASE_DROPDOWN:"project:onboarding_tour:step_viewed:supabase-dropdown",STEP_VIEWED_SHARE_MENU:"project:onboarding_tour:step_viewed:share-menu",COMPLETED:"project:onboarding_tour:completed",SKIPPED:"project:onboarding_tour:skipped"},COMMUNITY:{PROJECT_CLICKED:"project:community:project_clicked",PROJECT_DWELL_TIME:"project:community:project_dwell_time",FILTER_CHANGED:"project:community:filter_changed",CATEGORY_CHANGED:"project:community:category_changed",SHOW_MORE_CLICKED:"project:community:show_more_clicked"},VISUAL_EDITS:{TOGGLED:"visual_editor_toggled"},EMBED:{CODE_COPIED:"project:embed:code_copied",SUCCESS_DIALOG_CLICKED:"project:embed:success_dialog_clicked"},COLLABORATION:{DROPDOWN_OPENED:"project:collaboration:dropdown_opened",COLLABORATOR_INVITED:"project:collaboration:collaborator_invited",COLLABORATOR_ROLE_CHANGED:"project:collaboration:collaborator_role_changed",COLLABORATOR_REMOVE_INITIATED:"project:collaboration:collaborator_remove_initiated",REMOVE_DIALOG_CONFIRMED:"project:collaboration:remove_dialog_confirmed",REMOVE_DIALOG_CANCELLED:"project:collaboration:remove_dialog_cancelled",SECRET_LINK_CREATED:"project:collaboration:secret_link_created",SECRET_LINK_COPIED:"project:collaboration:secret_link_copied",SECRET_LINK_REMOVED:"project:collaboration:secret_link_removed",PROJECT_ACCESS_REQUEST_CLICKED:"project:collaboration:project_access_request_clicked",PROJECT_ACCESS_REQUEST_CREATED:"project:collaboration:project_access_request_created",PROJECT_ACCESS_REQUEST_ACCEPTED:"project:collaboration:project_access_request_accepted",PROJECT_ACCESS_REQUEST_REJECTED:"project:collaboration:project_access_request_rejected",PROJECT_ACCESS_REQUEST_ALREADY_SENT:"project:collaboration:project_access_request_already_sent"},SECURITY:{NUDGE_REVIEW_CLICKED:"project:security:nudge:review_clicked",PUBLISH_SCAN_CLICKED:"project:security:publish:scan_clicked",PUBLISH_REVIEW_CLICKED:"project:security:publish:review_clicked",PUBLISH_CLICKED:"project:security:publish:clicked",VIEW_REVIEW_CLICKED:"project:security:view:review_clicked",VIEW_TRY_FIX_CLICKED:"project:security:view:try_fix_clicked"},CUSTOM_DOMAIN:{CLICKED:"project:custom_domain:clicked",PUBLISH_CANCELLED:"project:custom_domain:publish_cancelled",ENTRI_MODAL_SHOWN:"project:custom_domain:entri_modal_shown",ENTRI_MODAL_CANCELLED:"project:custom_domain:entri_modal_cancelled",ENTRI_MODAL_SUCCEEDED:"project:custom_domain:entri_modal_succeeded",DELETE_CLICKED:"project:custom_domain:delete_clicked",RETRY_CLICKED:"project:custom_domain:retry_clicked",COMPLETE_SETUP_CLICKED:"project:custom_domain:complete_setup_clicked",SET_PRIMARY_CLICKED:"project:custom_domain:set_primary_clicked",UNSET_PRIMARY_CLICKED:"project:custom_domain:unset_primary_clicked"}},n={DIALOG:{VIEWED:"segmentation:dialog_viewed",SUBMITTED:"segmentation:dialog_submitted",SKIPPED:"segmentation:dialog_skipped",PARTIAL_SUBMIT:"segmentation:dialog_partial_submit"},STEP_VIEWED:{INVITE_STEP:"segmentation:step_viewed:invite_step"},STEP_SKIPPED:{INVITE_STEP:"segmentation:step_skipped:invite_step"},INVITE_FINISHED:"segmentation:invite_finished",BUTTON_CLICKED:{BUILD_GOAL:"segmentation:button_clicked_build_goal",PRIMARY_USE_CASE:"segmentation:button_clicked_primary_use_case",ROLE:"segmentation:button_clicked_role",HEARD_FROM:"segmentation:button_clicked_heard_from",BACK:"segmentation:button_clicked_back",SUBMIT:"segmentation:button_clicked_submit",SKIP:"segmentation:button_clicked_skip",CONTINUE_NAME_STEP:"segmentation:button_clicked_continue_name_step",CONTINUE:"segmentation:button_clicked_continue",THEME:"segmentation:button_clicked_theme"}},l={SUGGEST_LOWER_PLAN:{CONTINUE_CLICKED:"downgrade:suggest_lower_plan:continue_clicked",DOWNGRADE_CREDITS_CLICKED:"downgrade:suggest_lower_plan:downgrade_credits_clicked"},FEATURE_USAGE:{CONTINUE_CLICKED:"downgrade:feature_usage:continue_clicked",KEEP_PLAN_CLICKED:"downgrade:feature_usage:keep_plan_clicked"},FEEDBACK:{CONTINUE_CLICKED:"downgrade:feedback:continue_clicked",KEEP_PLAN_CLICKED:"downgrade:feedback:keep_plan_clicked"},KTLO_OFFER:{SWITCH_CLICKED:"downgrade:ktlo_offer:switch_clicked",CONTINUE_DOWNGRADE_CLICKED:"downgrade:ktlo_offer:continue_downgrade_clicked"},FINAL_CONFIRMATION:{CONFIRM_CLICKED:"downgrade:final_confirmation:confirm_clicked",KEEP_PLAN_CLICKED:"downgrade:final_confirmation:keep_plan_clicked"}},i={CREDIT_PLAN_CHECKOUT_CLICKED:"workspace:subscriptions:checkout_button_clicked"},s={PLAN_VIEWED:"pricing:plan:viewed",PLAN_UPGRADE_CLICKED:"pricing:plan:upgrade_clicked",PLAN_DOWNGRADE_CLICKED:"pricing:plan:downgrade_clicked",PLAN_DROPDOWN_CHANGED:"pricing:plan:dropdown_changed",GET_STARTED_CLICKED:"pricing:plan:get_started_clicked",CONTACT_US_CLICKED:"pricing:plan:contact_us_clicked",NOTIFY_ME_CLICKED:"pricing:plan:notify_me_clicked",PLAN_TYPE_CHANGED:"pricing:plan:type_changed"},o={UPGRADE:{SHOW:{IN_CHAT:"chat:upgrade:show:in_chat",IN_DROPDOWN:"chat:upgrade:show:in_dropdown"},BUTTON_CLICKED:{CHAT:"chat:upgrade:button_clicked:chat",NAV_BAR:"chat:upgrade:button_clicked:nav_bar",ACCOUNT_DROPDOWN:"chat:upgrade:button_clicked:account_dropdown"},CONTEXT:{OUT_OF_CREDITS:"outOfCredits",BILLING:"billing"}},OUT_OF_CREDITS_DIALOG:{DISMISS_CLICKED:"workspace:out_of_credits_dialog:dismiss_clicked",SEND_PING_CLICKED:"workspace:out_of_credits_dialog:send_ping_clicked"}},d={OPENED_DIALOG:"referral:advocate:opened_dialog",COPIED_LINK:"referral:advocate:copied_link",LINK_CLICKED:"referral:invitee:link_clicked"},c={EXAMPLE_PROMPT:{CLICKED:"launchpad:example_prompt:clicked"},CREATE_FORM:{ATTACH_CLICKED:"launchpad:create_form:attach_clicked",ATTACH_ADD_IMAGES_CLICKED:"launchpad:create_form:attach_add_images_clicked",ATTACH_DISMISSED:"launchpad:create_form:attach_dismissed_clicked",FIGMA_IMPORT_CLICKED:"launchpad:create_form:figma_import_clicked",DROPDOWN_CLICKED:"launchpad:create_form:dropdown_clicked",DROPDOWN_ATTACH_CLICKED:"launchpad:create_form:dropdown_attach_clicked",SCREENSHOT_CAPTURED:"launchpad:create_form:screenshot_captured"}},u={OPEN_TOP_MENU:"project:page_speed:open:top_menu",OPEN_PUBLISH:"project:page_speed:open:publish",REGENERATE:"project:page_speed:regenerate",STRATEGY_SELECTED:"project:page_speed:strategy_selected",CATEGORY_SELECTED:"project:page_speed:category_selected",TRY_FIX:"project:page_speed:try_fix"},p={SETTINGS_UPDATED:"account:settings:updated",SETTINGS_CANCELLED:"account:settings:cancelled"},m={VERIFICATION_SUCCESS:"student:verification:success",REVIEW_REQUESTED:"student:verification:review_requested"},g={SHOPIFY:{ENABLE_APPROVED:"shopify:enable:approved",CLAIM_CLICKED:"shopify:claim:clicked",CLAIM_SUCCESS:"shopify:claim:success"}},f={EDIT_FORM:{CLOSED:"project_profile:edit_form:closed",SAVED:"project_profile:edit_form:saved",FAILED:"project_profile:edit_form:failed"},CREATE_FORM:{CLOSED:"project_profile:create_form:closed",CONTINUE_FROM_INTRO_CLICKED:"project_profile:create_form:continue_from_intro_clicked",CONTINUE_FROM_DETAILS_CLICKED:"project_profile:create_form:continue_from_details_clicked",ATTACH_IMAGE_CLICKED:"project_profile:create_form:attach_image_clicked",REMOVE_IMAGE_CLICKED:"project_profile:create_form:remove_image_clicked",BACK_CLICKED:"project_profile:create_form:back_clicked",CREATE_CLICKED:"project_profile:create_form:create_clicked",CREATED:"project_profile:create_form:created",FAILED:"project_profile:create_form:failed"},PROFILE_PAGE:{VIEWED:"project_profile:profile_page:viewed",LIKE_CLICKED:"project_profile:profile_page:like_clicked",REMIX_CLICKED:"project_profile:profile_page:remix_clicked",OPEN_PROJECT_CLICKED:"project_profile:profile_page:open_clicked",EDIT_CLICKED:"project_profile:profile_page:edit_clicked",PREVIEW_CLICKED:"project_profile:profile_page:preview_clicked",BREADCRUMBS_CLICKED:"project_profile:profile_page:breadcrumbs_clicked",BACK_BUTTON_CLICKED:"project_profile:profile_page:back_button_clicked"},MAIN_MENU_CREATE_CLICKED:"project_profile:main_menu:create_clicked",MAIN_MENU_OPEN_CLICKED:"project_profile:main_menu:open_clicked",HOME_PAGE_CREATE_CLICKED:"project_profile:home_page:create_clicked",HOME_PAGE_CREATE_CLOSED:"project_profile:home_page:create_closed",HOME_PAGE_OPEN_CLICKED:"project_profile:home_page:open_clicked",AFTER_SHIP_CREATE_CLICKED:"project_profile:after_ship:create_clicked",PROJECT_CARD_VIEW_CLICKED:"project_profile:project_card:view_clicked"}},40488:(e,t,r)=>{"use strict";r.d(t,{nZ:()=>E,ZL:()=>w,lF:()=>y});var a=r(77145),n=r(92912),l=r(49974),i=r(64482),s=r(81635),o=r(39528);let d=e=>{let{selectedPlan:t,isScheduled:r}=e,{planType:i,setPlanType:d}=(0,l.et)(),c="annual"===i;return r&&(c="annual"===r),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(s.d,{checked:c,disabled:!!r,onCheckedChange:e=>{d(e?"annual":"monthly"),n.Ay.capture(o.aw.PLAN_TYPE_CHANGED,{plan_id:t,plan_type:e?"annual":"monthly"})},className:"data-[state=checked]:bg-brand-twilight-primary",thumbClassName:"bg-[hsl(45_40_98%)]"}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Annual"})})]})})};var c=r(83022),u=r(95290),p=r(2231),m=r(67844),g=r(73726),f=r(19620),h=r(53792),x=r(72632),_=r(51573),b=r(76058),v=r(56024);let w=e=>{let{children:t,className:r,suffix:n}=e,{pricingScenario:i}=(0,l.et)();return(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsxs)("div",{className:"flex w-fit flex-col justify-center gap-6",children:[(0,a.jsx)("div",{className:(0,v.cn)("grid w-fit grid-cols-1 gap-4","sm:grid-cols-2 lg:gap-6","lg:flex lg:justify-center","lg:max-w-none",r,{"max-w-[600px]":"billing"!==i}),children:t}),n]})})},E=e=>{let{children:t}=e,r=(0,l.et)();return(0,a.jsx)("div",{className:(0,v.cn)("flex flex-col gap-4",r.isLoggedOut?"min-h-72":"min-h-[350px]"),children:t})},y=()=>{let e=(0,l.et)(),t=(0,x.RL)(e.selectedProPlan),r=(0,i.f)();return(0,a.jsx)(u.kp,{label:"All features in Free, plus:",features:[(0,a.jsxs)("span",{className:"flex items-start gap-1",children:[t," monthly credits",(0,a.jsx)(g.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsxs)("p",{children:[t," credits per month + 5 daily credits that reset each day"]})})]},"num-credits"),"5 daily credits (up to 150/month)",...r?[(0,a.jsxs)("span",{className:"flex items-start gap-1",children:["Usage-based Cloud + AI",(0,a.jsx)(g.V,{name:"info",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsxs)("p",{children:["Free $25 Cloud + $1 AI usage included. This offer lasts until the end of 2025."," ",(0,a.jsx)("a",{href:"https://docs.lovable.dev/features/cloud",target:"_blank",rel:"noopener noreferrer",className:"underline transition-colors hover:text-muted",children:"Read more"})]})}),(0,a.jsx)(m.E,{variant:"brand-twilight",children:"New"})]},"lovable-cloud")]:[],(0,a.jsxs)("span",{className:"flex items-start gap-1",children:["Credit rollovers",(0,a.jsx)(g.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsx)("p",{children:"Credits roll over for 1 month on monthly plans, or until the end of your annual plan."})})]},"credit-rollovers"),"Custom domains","Remove the Lovable badge","Private projects","User roles & permissions"]})},C=e=>{var t,r;let{scheduledPlan:i}=e,s=(0,l.et)(),{isBizPlan:m,isEnterprisePlan:g}=(0,x.cb)(s.currentPlan.id),f="newWorkspace"===s.pricingScenario;if(!f&&!s.showProPlan)return null;let _=(()=>{let e=s.selectedProPlan,t=e===s.currentPlan.id&&s.planType==s.currentPlan.type,r=s.isPlanDowngrade(e);return s.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"pro",plan_id:e,plan_price:s.getDisplayPrice(e),user_status:"logged_out"}),s.handleLoggedOutUpgrade(e)}}:f?s.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{s.setNewWorkspaceSelectedPlan(e)},loading:!1}:i?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&s.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{s.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:s.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:s.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:g?{type:"button",text:s.getButtonText(e),variant:s.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:r?{type:"button",text:s.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{n.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:s.currentPlan.id,current_plan_type:s.currentPlan.type,target_plan_id:e,target_plan_type:s.planType,plan_type:"pro",plan_price:s.getDisplayPrice(e)}),s.setTargetDowngradePlan(e),s.onDowngradeClick()}}:{type:"button",text:s.getButtonText(e),variant:m?"decline":"twilight",disabled:!1,loading:!1,onClick:async()=>{await s.handleUpgradeClicked(e)}}})(),b=i&&s.scheduledPlan?s.scheduledPlan.id:s.selectedProPlan,v=s.getSavingsAmount(b);return(0,a.jsx)(u.Mt,{name:"Pro",title:"Designed for fast-moving teams building together in real time.",plan:null!=(t=null==i?void 0:i.id)?t:s.selectedProPlan,planType:null!=(r=null==i?void 0:i.type)?r:s.planType,description:(0,a.jsx)(d,{selectedPlan:b,isScheduled:null==i?void 0:i.type}),isPopular:!m&&!i,savingsAmount:v,isScheduled:f||null==i?void 0:i.type,highlighted:f&&s.newWorkspaceSelectedPlan===s.selectedProPlan,priceSubtitle:"shared across unlimited users",children:(0,a.jsxs)(E,{children:[(0,a.jsxs)(u.vi,{children:[(0,a.jsx)(c.O,{..._}),f?(0,a.jsx)(p.h,{options:h.pB,selectedOption:s.selectedProPlan,onSelect:e=>{s.setNewWorkspaceSelectedPlan(e),s.setSelectedProPlan(e)}}):(0,a.jsx)(p.h,{options:h.pB,selectedOption:i&&s.scheduledPlan?s.scheduledPlan.id:s.selectedProPlan,disabled:!!i||s.shouldDisableWorkspaceAdminActions,onSelect:s.setSelectedProPlan})]}),(0,a.jsx)(y,{})]})})},j=e=>{var t,r;let{scheduledPlan:i}=e,s=(0,l.et)(),{isBizPlan:m,isEnterprisePlan:f}=(0,x.cb)(s.currentPlan.id),_="newWorkspace"===s.pricingScenario,b=(0,x.RL)(s.selectedBizPlan);if(!_&&!s.showBizPlan)return null;let v=(()=>{let e=s.selectedBizPlan,t=e==s.currentPlan.id&&s.planType==s.currentPlan.type,r=s.isPlanDowngrade(e);return s.isLoggedOut?{type:"link",text:"Get Started",variant:"decline",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"business",plan_id:e,plan_price:s.getDisplayPrice(e),user_status:"logged_out"})}}:_?s.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{s.setNewWorkspaceSelectedPlan(e)},loading:!1}:i?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&s.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{s.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:s.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:m?"twilight":"twilight-muted",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:f?{type:"button",text:s.getButtonText(e),variant:"twilight-muted",disabled:!0,onClick:void 0,loading:!1}:r?{type:"button",text:s.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{n.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:s.currentPlan.id,current_plan_type:s.currentPlan.type,target_plan_id:e,target_plan_type:s.planType,plan_type:"business",plan_price:s.getDisplayPrice(e)}),s.setTargetDowngradePlan(e),s.onDowngradeClick()}}:{type:"button",text:s.getButtonText(e),variant:m?"twilight":"decline",disabled:!1,loading:!1,onClick:async()=>{await s.handleUpgradeClicked(e)}}})(),w=i&&s.scheduledPlan?s.scheduledPlan.id:s.selectedBizPlan,y=s.getSavingsAmount(w);return(0,a.jsx)(u.Mt,{name:"Business",title:"Advanced controls and power features for growing departments",plan:null!=(t=null==i?void 0:i.id)?t:s.selectedBizPlan,planType:null!=(r=null==i?void 0:i.type)?r:s.planType,highlighted:_&&s.newWorkspaceSelectedPlan===s.selectedBizPlan,description:(0,a.jsx)(d,{selectedPlan:w,isScheduled:null==i?void 0:i.type}),savingsAmount:y,isPopular:m&&!i,isScheduled:null==i?void 0:i.type,priceSubtitle:"shared across unlimited users",children:(0,a.jsxs)(E,{children:[(0,a.jsxs)(u.vi,{children:[(0,a.jsx)(c.O,{...v}),_?(0,a.jsx)(p.h,{options:h.mR,selectedOption:s.selectedBizPlan,onSelect:e=>{s.setNewWorkspaceSelectedPlan(e),s.setSelectedBizPlan(e)}}):(0,a.jsx)(p.h,{options:h.mR,selectedOption:w,disabled:!!i||s.shouldDisableWorkspaceAdminActions,onSelect:s.setSelectedBizPlan})]}),(0,a.jsx)(u.kp,{label:"All features in Pro, plus:",features:[(0,a.jsxs)("span",{className:"flex items-start gap-1",children:[b," monthly credits",(0,a.jsx)(g.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsxs)("p",{children:[b," credits per month + 5 daily credits that reset each day"]})})]},"num-credits"),"SSO","Personal Projects","Opt out of data training","Design templates"]})]})})};w.Free=()=>{let e=(0,l.et)(),{isFreePlan:t,isInactivePlan:r,isEnterprisePlan:s}=(0,x.cb)(e.currentPlan.id),d=(0,i.f)();if(!e.showFreePlan)return null;let p=(()=>{var a;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"decline",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"free",plan_id:"free",plan_price:0,user_status:"logged_out"})}}:(null==(a=e.scheduledPlan)?void 0:a.id)==="free"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:r?{type:"button",text:"Only for first workspace",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:s?{type:"button",text:"Downgrade (Contact us)",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Downgrade",variant:e.freePlanButtonVariant,disabled:!1,loading:e.isCreatePortalSessionLoading,onClick:()=>{n.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"free",plan_type:"free"}),e.setFreePlanAsTarget(),e.onDowngradeClick()}}})();return(0,a.jsx)(u.Mt,{name:"Free",title:"Discover what Lovable can do for you",description:"Free forever",plan:_.VL.FREE,planType:"monthly",priceSubtitle:"No credit card needed",children:(0,a.jsxs)(E,{children:[(0,a.jsx)(u.vi,{children:(0,a.jsx)(c.O,{...p})}),(0,a.jsx)(u.kp,{label:"Free for everyone",features:["5 daily credits (up to 30/month)","Public projects","Unlimited collaborators",...d?[(0,a.jsxs)("span",{className:"flex items-start gap-2",children:["Cloud",(0,a.jsx)(m.E,{variant:"brand-twilight",children:"New"})]},"lovable-cloud")]:[]]})]})})},w.Ktlo=()=>{let e=(0,l.et)();if(!e.showKtloPlan)return null;let t=(()=>{var t;let r="ktlo"===e.currentPlan.id;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"ktlo",plan_price:15,user_status:"logged_out"})}}:r&&e.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{e.createPortalSession()},loading:!1}:r?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:(null==(t=e.scheduledPlan)?void 0:t.id)==="ktlo"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:"twilight",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Switch to KTLO",variant:"twilight",disabled:!1,loading:!1,onClick:async()=>{var t;if(!(null==(t=b.y4[b.G.KTLO])?void 0:t.PRODUCT_ID))return void f.logging.error("KTLO product ID not found");n.Ay.capture(o.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"ktlo",plan_type:"ktlo",plan_price:15}),await e.handleUpgradeConfirmed(_.VL.KTLO)}}})();return(0,a.jsx)(u.Mt,{name:"Lite",title:"Keep your projects running with essential features",plan:_.VL.KTLO,planType:"monthly",description:"Monthly",children:(0,a.jsxs)(E,{children:[(0,a.jsx)(u.vi,{children:(0,a.jsx)(c.O,{...t})}),(0,a.jsx)(u.kp,{label:"Everything in Free, plus:",features:["5 daily credits (up to 150/month)","Private projects","User roles & permissions","Custom domains","Remove the Lovable badge"]})]})})},w.Scheduled=()=>{let{scheduledPlan:e}=(0,l.et)(),{isProPlan:t,isBizPlan:r}=(0,x.cb)(null==e?void 0:e.id);return e&&t?(0,a.jsx)(C,{scheduledPlan:e}):e&&r?(0,a.jsx)(j,{scheduledPlan:e}):void 0},w.Pro=C,w.Biz=j,w.Enterprise=()=>{let e=(0,l.et)(),{isEnterprisePlan:t}=(0,x.cb)(e.currentPlan.id);if(!e.showEnterprisePlan)return null;let r=t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:{type:"link",text:"Book a demo",variant:"decline",href:"https://enterpriseform.lovable.app/",disabled:!1,isExternal:!0,onClick:()=>{n.Ay.capture(o.aw.CONTACT_US_CLICKED,{plan_type:"enterprise",current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,user_status:e.isLoggedOut?"logged_out":"logged_in"})}};return(0,a.jsx)(u.Mt,{name:"Enterprise",title:"Built for large orgs needing flexibility, scale, and governance.",plan:_.VL.ENTERPRISE,planType:e.planType,description:"Flexible plans",hidePrice:!1,customPriceLabel:(0,a.jsx)("span",{className:"flex items-start gap-1 pb-3 pt-7 text-xl text-muted-foreground",children:"Custom"}),children:(0,a.jsxs)(E,{children:[(0,a.jsx)(u.vi,{children:(0,a.jsx)(c.O,{...r})}),(0,a.jsx)(u.kp,{label:"All features in Business, plus:",features:["Dedicated support","Onboarding services","Custom connections","Group-based access control","Custom design systems"]})]})})}},43610:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(18502),n=r(95661),l=r(40702),i=r(51374),s=r(63851),o=r(69850),d=r(74507);let c=e=>{var t,r,c,p,m;let{isAuthenticated:g,authUser:f}=(0,l.Z2)(),{permitted:h}=(0,i.J)(d.eZ.ViewWorkspaceUsage),{data:x}=(0,a.I)({queryKey:[...o.workspaceKeys.detail(null!=(t=null==e?void 0:e.id)?t:""),"users",null!=(r=null==f?void 0:f.uid)?r:"","monthly-usage"],queryFn:async()=>{if(!(null==e?void 0:e.id)||!(null==f?void 0:f.uid))return{user_monthly_usage:0,max_usage:null};try{let t=(0,s.getGoApi)();return await t.get("/workspaces/".concat(null==e?void 0:e.id,"/user-monthly-usage"))}catch(e){return console.error("Error fetching user monthly usage:",e),{user_monthly_usage:0,max_usage:null}}},enabled:!!(null==e?void 0:e.id)&&!!(null==f?void 0:f.uid)&&h}),_=(0,n.useMemo)(()=>{var t;if(e&&g)return!!((null!=(t=e.credits_granted)?t:0)-e.credits_used>0)||!!(e.daily_credits_used<e.daily_credits_limit)||!!((e.billing_period_credits_used||0)<e.billing_period_credits_limit)},[e,g]),b=null==e?void 0:e.daily_credits_limit,v=null==e?void 0:e.daily_credits_used,w=null==e?void 0:e.billing_period_credits_limit,E=null==e?void 0:e.billing_period_credits_used,y=null==e?void 0:e.total_credits_used_in_billing_period,C=null!=(c=null==x?void 0:x.max_usage)?c:null;return{dailyCreditLimit:b,dailyCreditsUsed:v,billingPeriodCreditLimit:w,billingPeriodCreditsUsed:E,totalCreditsUsedInBillingPeriod:y,rolloverCredits:(null==e?void 0:e.rollover_credits_limit)!==void 0&&(null==e?void 0:e.rollover_credits_used)!==void 0?e.rollover_credits_limit-e.rollover_credits_used:void 0,bonusCredits:(null==e?void 0:e.credits_granted)!==void 0?e.credits_granted-(null!=(p=e.credits_used)?p:0):void 0,areCreditsAvailable:_,billingPeriodEndDate:u(null==e?void 0:e.billing_period_end_date),userMonthlyUsage:null!=(m=null==x?void 0:x.user_monthly_usage)?m:0,maxUserMonthlyUsage:C,hasCreditLimit:null!==C&&C>0,workspaceDefaultLimit:null==e?void 0:e.default_monthly_member_credit_limit}},u=e=>e?"string"==typeof e?new Date(e):e.toDate():null},45756:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var a=function(e){return e.SUBMITTED="submitted",e.SKIPPED="skipped",e.NOT_SHOWN="not_shown",e}({})},47226:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(77145),n=r(56024);function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},47679:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s,t:()=>o});var a=r(77145),n=r(13410),l=r(95661);let i=(0,l.createContext)(void 0),s=e=>{let{children:t}=e,[r,s]=(0,l.useState)(null),o=(0,n.useSearchParams)(),d=(0,n.usePathname)(),c=(0,n.useRouter)(),u=(0,l.useCallback)(e=>{s(null!=e?e:null)},[]),p=(0,l.useCallback)(()=>{let e=new URLSearchParams(o);e.delete("settings");let t=e.toString(),r=t?"".concat(d,"?").concat(t):d;c.replace(r),s(null)},[o,d,c]);(0,l.useEffect)(()=>{let e=o.get("settings");null!=e&&u(e)},[o,u]);let m=(0,l.useMemo)(()=>({activeTab:r,openSettings:u,closeSettings:p}),[r,u,p]);return(0,a.jsx)(i.Provider,{value:m,children:t})},o=()=>{let e=(0,l.useContext)(i);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},49974:(e,t,r)=>{"use strict";r.d(t,{LS:()=>y,ET:()=>j,et:()=>N});var a=r(77145),n=r(87299),l=r(92912),i=r(95661),s=r(31088),o=r(51762),d=r(51433),c=r(54557),u=r(72632);let p={PRO_TO_PRO_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PRO_TO_BIZ_UPGRADE:{title:"Upgrade to Business",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},BIZ_TO_BIZ_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}},m=e=>{let{targetPlan:t,scenario:r}=e,{currentPlan:n}=N(),l=p[r],i=(0,c.Y)({currentPlan:n,targetPlanCategory:(0,u.m6)(t)});return(0,a.jsx)(d.n,{targetPlan:t,availablePlans:i,title:l.title,subtitle:l.subtitle,showCreditDifference:l.showCreditDifference,showWhatsChanging:l.showWhatsChanging,showPlanFeatures:l.showPlanFeatures,showNextBillingCycle:l.showNextBillingCycle,showPlanDropdown:l.showPlanDropdown})};var g=r(3201),f=r(91169),h=r(21016),x=r(39528),_=r(53792),b=r(51573),v=r(69850),w=r(40702),E=r(83220);let y="pendingPlanSelection",C=(0,i.createContext)(void 0),j=e=>{let{children:t,pricingScenario:r}=e,d=(0,n.jE)(),c=(0,E.j4)(e=>e.currentWorkspace),p=(0,E.j4)(e=>{var t;return null==(t=e.membership)?void 0:t.role}),j=(0,E.Dx)(),{authUser:N}=(0,w.Z2)(),{toCheckout:k,createPortalSession:P,checkoutLoading:D,isCreatePortalSessionLoading:I,cancelSubscription:S,isCancelSubscriptionLoading:A,cancelSubscriptionChanges:L,isCancelSubscriptionChangesLoading:T}=(0,f.R)(),[R,O]=(0,i.useState)(null!=r?r:"billing"),M=(0,i.useCallback)(async()=>{(null==c?void 0:c.id)?await P({workspaceId:c.id}):s.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[P,null==c?void 0:c.id]),F=(0,i.useCallback)(async(e,t)=>{(null==c?void 0:c.id)?(await e({workspaceId:c.id}),(null==j?void 0:j.store)&&j.store.setState({currentWorkspace:{...c,...t(c)}}),await new Promise(e=>setTimeout(async()=>{await d.invalidateQueries({queryKey:v.workspaceKeys.all}),e(void 0)},1e3))):s.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[c,null==j?void 0:j.store,d]),K=(0,i.useCallback)(()=>F(S,()=>({plan_scheduled:b.VL.FREE,plan_type_scheduled:void 0})),[F,S]),U=(0,i.useCallback)(()=>F(L,()=>({plan_scheduled:void 0,plan_type_scheduled:void 0})),[F,L]),W=(0,i.useMemo)(()=>{var e,t;return{id:null!=(e=null==c?void 0:c.plan)?e:b.VL.FREE,type:null!=(t=null==c?void 0:c.plan_type)?t:"monthly"}},[c]),G=(0,i.useMemo)(()=>{if(null==c?void 0:c.plan_scheduled){var e,t;return{id:null!=(e=null==c?void 0:c.plan_scheduled)?e:b.VL.FREE,type:null!=(t=null==c?void 0:c.plan_type_scheduled)?t:"monthly"}}},[c]),B="loggedOut"===R,{isFreePlan:V,isLegacyPlan:z}=(0,u.cb)(W.id),H=!!(!B&&N&&c&&N.uid===c.owner_id),Y=!B&&"member"===p,Z=!B&&(!!p||H),$=!B&&!Z&&!H,q=.2*!!z,[J,Q]=(0,i.useState)(W.type),X=(0,i.useMemo)(()=>(0,u.yw)(W),[W]),ee=(0,i.useMemo)(()=>(0,u.LL)(W),[W]),[et,er]=(0,i.useState)(X),[ea,en]=(0,i.useState)(ee),[el,ei]=(0,i.useState)(null),[es,eo]=(0,i.useState)(_.pB[0]);(0,i.useEffect)(()=>{er(X),en(ee),ei(null),Q(W.type)},[X,ee,R,W]);let ed=(0,i.useCallback)(e=>(0,u.jL)({id:e,type:J}),[J]),ec="loggedOut"===R||(null==G?void 0:G.id)==="free",eu="outOfCredits"!==R&&("ktlo"===W.id||(null==G?void 0:G.id)==="ktlo"),ep="outOfCredits"!==R&&!G&&!eu,em=(0,i.useCallback)(e=>{if("monthly"===W.type&&"annual"===J&&e===W.id)return!1;let t=(0,u.jL)({...W,type:"monthly"}),r=(0,u.jL)({id:e,type:J,type:"monthly"}),a=(0,u.RL)(W.id),n=(0,u.RL)(e),l=(0,u.m6)(W.id),i=(0,u.m6)(e);return"biz"==l?"biz"==i?r<t:n<=a:"biz"==i?n<a:r<t},[W,J]),eg=(0,i.useCallback)(e=>e===W.id&&J===W.type?"current":V||(0,u.jL)(W)===ed(e)?"upgrade":"enterprise"===W.id?"downgrade":e===W.id&&"annual"===J&&"monthly"===W.type?"switchToAnnual":em(e)?"downgrade":"upgrade",[W,V,ed,J,em]),ef=(0,i.useCallback)(e=>{let t=eg(e);if("current"===t)return"Your current plan";if("switchToAnnual"===t)return"Switch to annual";let{isProPlan:r,isBizPlan:a}=(0,u.cb)(W.id),{isProPlan:n,isBizPlan:l}=(0,u.cb)(e);return"upgrade"===t?r&&n||a&&l?"Upgrade current plan":"Upgrade":"enterprise"===W.id?"Downgrade (Contact us)":"Downgrade"},[eg,W]),eh=(0,i.useMemo)(()=>{var e,t,r;return(null==N?void 0:N.email)||(null==N||null==(r=N.firebase)||null==(t=r.identities)||null==(e=t.email)?void 0:e[0])||"xxxxx"},[N]),ex=(0,h.A)("sm"),e_=(0,i.useMemo)(()=>ex?1:[ec,eu,!0,!0,ep].filter(Boolean).length,[ex,ec,eu,!0,!0,ep]),eb=(0,i.useCallback)(e=>{let t=eg(e);return"upgrade"===t||"switchToAnnual"===t?"twilight":"link"},[eg]),ev=eb(et),ew=eb(ea),eE=(0,i.useCallback)(e=>{if("free"===e){window.location.href="/signup";return}let t={planId:e,planType:"pro",timestamp:Date.now(),price:ed(e),limit:(0,u.RL)(e)};localStorage.setItem(y,JSON.stringify(t)),window.location.href="/signup"},[ed]),ey=(()=>{let e=(0,o.f)(m);return t=>{let{targetPlan:r,scenario:a}=t;e({childProps:{targetPlan:r,scenario:a,onClose:()=>e(!1)}})}})(),eC=(0,i.useCallback)(async e=>{(null==c?void 0:c.id)&&await k({plan:e,workspaceId:c.id,grandfatheredDiscount:z,planType:J,changeType:"upgrade",useStudentDiscount:"studentDiscount"==R})},[c,k,z,J,R]),ej=(0,i.useCallback)(async e=>{l.Ay.capture(x.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:W.id,current_plan_type:W.type,target_plan_id:e,target_plan_type:J,plan_type:(0,u.m6)(e),plan_price:ed(e)});let t=function(e,t,r){if("annual"===r||"annual"===e.type)return null;let a=(0,u.m6)(e.id),n=(0,u.m6)(t);return"biz"===a&&"pro"===n?null:"pro"===a&&"biz"===n?"PRO_TO_BIZ_UPGRADE":"pro"===a&&"pro"===n?"PRO_TO_PRO_UPGRADE":"biz"===a&&"biz"===n?"BIZ_TO_BIZ_UPGRADE":null}(W,e,J);t?ey({targetPlan:e,scenario:t}):await eC(e)},[W,J,ed,eC,ey]),eN=(0,i.useCallback)(()=>{ei(b.VL.FREE)},[]),ek=(0,i.useCallback)(e=>{if("annual"===J)return 2*(0,u.jL)({id:e,type:"monthly"})},[J]),eP=(0,o.f)(g.u),eD=(0,i.useCallback)(()=>{c&&eP({childProps:{workspace:c,onClose:()=>eP(!1)},dialogProps:{onOpenChange:e=>{e||ei(null)}}})},[eP,c]);return(0,a.jsx)(C.Provider,{value:{currentPlan:W,selectedProPlan:et,setSelectedProPlan:er,selectedBizPlan:ea,setSelectedBizPlan:en,planType:J,setPlanType:Q,pricingScenario:R,setPricingScenario:O,getDisplayPrice:ed,showFreePlan:ec,showKtloPlan:eu,showProPlan:!0,showBizPlan:!0,showEnterprisePlan:ep,showProDropdown:!B,showBizDropdown:!B,isLoggedOut:B,isOwner:H,isEditor:Y,isMemberOfWorkspace:Z,shouldDisableWorkspaceAdminActions:!B&&(Y||$||!B&&"viewer"===p||!B&&"collaborator"===p),userEmail:eh,scheduledPlan:G,discountPercent:q,getSavingsAmount:ek,handleUpgradeClicked:ej,handleUpgradeConfirmed:eC,handleLoggedOutUpgrade:eE,getButtonVariant:eb,getButtonText:ef,getPlanComparisonStatus:eg,createPortalSession:M,isCreatePortalSessionLoading:I,cancelSubscription:K,isCancelSubscriptionLoading:A,cancelSubscriptionChanges:U,isCancelSubscriptionChangesLoading:T,checkoutLoading:D,numberOfPlansShown:e_,freePlanButtonVariant:B?"twilight":"link",proPlanButtonVariant:ev,bizPlanButtonVariant:ew,isPlanDowngrade:em,targetDowngradePlan:el,setTargetDowngradePlan:ei,setFreePlanAsTarget:eN,newWorkspaceSelectedPlan:es,setNewWorkspaceSelectedPlan:eo,onDowngradeClick:eD},children:t})},N=()=>{let e=(0,i.useContext)(C);if(!e)throw Error("usePricing must be used within a PricingProvider");return e}},51374:(e,t,r)=>{"use strict";r.d(t,{J:()=>c,S:()=>d});var a=r(18502),n=r(95661),l=r(1179),i=r(4076),s=r(40702),o=r(83220);function d(){let e=(0,i.mb)(e=>e.projectId),t=(0,o.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),{isAuthenticated:r}=(0,s.Z2)(),{data:d,isLoading:c}=(0,a.I)({...l.w.permissions({workspaceId:t,projectId:e}),enabled:r});return{permissions:(0,n.useMemo)(()=>r&&Array.isArray(d)?d:[],[r,d]),isLoading:c}}function c(e,t){let r=(0,i.mb)(e=>e.projectId),d=(0,o.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),{isAuthenticated:c}=(0,s.Z2)(),{data:u,isLoading:p}=(0,a.I)({...l.w.permissions({workspaceId:d,projectId:null!=t?t:r}),enabled:c});return{permitted:(0,n.useMemo)(()=>c&&Array.isArray(u)&&u.includes(e),[c,u,e]),isLoading:p}}},51433:(e,t,r)=>{"use strict";r.d(t,{n:()=>w});var a=r(77145),n=r(8974),l=r(85406),i=r(95661),s=r(83220),o=r(49974),d=r(52811),c=r(20247),u=r(69730),p=r(27458),m=r(72632),g=r(56024),f=r(89931),h=r(2231);let x=["Private projects","User roles & permissions","Custom domains","Remove the Lovable badge"],_=["SSO","Personal Projects","Opt out of data training","Design templates"],b=["Downgrade anytime","Credits rollover"],v=e=>{let{features:t}=e;return(0,a.jsx)("div",{className:"mt-3 space-y-3",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-[6px]",children:[(0,a.jsx)(u.A,{name:"check",weight:"medium",size:"small",className:"relative top-0.5"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e})]},t))})},w=e=>{let{targetPlan:t,availablePlans:r,title:u,subtitle:w,showCreditDifference:E=!0,showWhatsChanging:y=!0,showPlanFeatures:C=!0,showNextBillingCycle:j=!0,showPlanDropdown:N=!0}=e,{getDisplayPrice:k,handleUpgradeConfirmed:P,currentPlan:D,checkoutLoading:I}=(0,o.et)(),S=(0,m.RL)(D.id),A=(0,m.m6)(t),[L,T]=(0,i.useState)(t),R=(0,m.RL)(L),O=j&&!C,M=(0,s.j4)(e=>e.currentWorkspace),F=(null==M?void 0:M.billing_period_end_date)?(0,n.GP)((0,f.ay)(M.billing_period_end_date),"MMMM do"):(0,n.GP)((0,l.P)(new Date,1),"MMMM do"),K=(0,m.jL)(D),U=k(L),W=Math.max(0,U-K),G=R-S,B=k(L),V=async()=>{await P(L)};return(0,a.jsxs)(c.Cf,{className:"max-w-[425px]",children:[(0,a.jsxs)(c.c7,{className:"space-y-4",children:[(0,a.jsx)(p.Fy,{className:"size-9 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.L3,{className:"mb-2 text-3xl font-medium",children:u}),(0,a.jsx)("p",{className:"text-sm text-foreground",children:w})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"rounded-lg border-2 border-muted-border p-4",children:[(0,a.jsx)("div",{className:"text-lg font-medium",children:"Upgrade Fee"}),(0,a.jsxs)("div",{className:(0,g.cn)("flex items-center",{"mb-3":N}),children:[(0,a.jsxs)("span",{className:"text-4xl font-medium",children:["$",E?W:U]}),(0,a.jsx)("span",{className:"ml-2 text-base text-foreground",children:E?"due today":"per month"})]}),N&&(0,a.jsx)(h.h,{options:r,selectedOption:L,onSelect:T,showCreditDifference:E,currentPlanLimit:S})]}),y&&(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"What's changing?"}),(0,a.jsxs)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:["You are unlocking all business features"," ",G?"and receiving ".concat(G," credits today"):"but your credits will stay the same"]})]}),C&&(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"You will unlock:"}),(0,a.jsx)(v,{features:[..."biz"===A?_:x,...O?[]:b]})]}),j&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Next billing cycle (",F,")"]}),(0,a.jsx)(v,{features:["Your plan will update to $".concat(B," / month for ").concat((0,m.RL)(L)," credits"),...O?b:[]]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 border-t pt-4",children:[(0,a.jsx)(c.HM,{asChild:!0,children:(0,a.jsx)(d.$,{variant:"decline",className:"flex-1",children:"Cancel"})}),(0,a.jsx)(d.$,{className:"flex-1",variant:"default",onClick:V,loading:!!I,children:U>K?"Upgrade":"Confirm"})]})]})}},51762:(e,t,r)=>{"use strict";r.d(t,{RootDialog:()=>d,f:()=>o});var a=r(77145),n=r(95661),l=r(84510),i=r(20247);let s=(0,l.vt)(e=>({openDialog:null,setOpenDialog:t=>{e({openDialog:t})}}));function o(e){let t=s(e=>e.setOpenDialog);return(0,n.useCallback)(r=>{r?t({component:e,...r}):t(null)},[e,t])}let d=()=>{let e=s(e=>e.openDialog),t=s(e=>e.setOpenDialog);if((0,n.useEffect)(()=>{if(e){var t,r;null==(r=e.dialogProps)||null==(t=r.onOpen)||t.call(r)}},[e]),!e)return null;let{component:r,dialogProps:l,childProps:o}=e;return(0,a.jsx)(i.lG,{...l,open:!!e,onOpenChange:e=>{var r;e||t(null),null==l||null==(r=l.onOpenChange)||r.call(l,e)},children:(0,a.jsx)(r,{...o})})}},52811:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>d});var a=r(77145),n=r(55851),l=r(29485),i=r(95661),s=r(56024),o=r(52597);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors duration-100 ease-in-out focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",text:"text-muted-foreground hover:text-foreground px-0 py-0",success:"bg-success-primary text-success-primary-foreground text-sm font-medium hover:opacity-90 [&>*]:text-shadow-sm shadow-black/50",destructive:"bg-destructive-primary text-destructive-primary-foreground shadow-sm hover:bg-destructive-primary/90",warning:"bg-warning-primary text-warning-primary-foreground shadow-sm hover:bg-warning-primary/90",outline:"border border-input bg-muted hover:bg-accent hover:border-accent",muted:"bg-background text-sm font-medium hover:bg-primary/20 border border-border",accent:"bg-accent text-accent-foreground hover:opacity-80 shadow-black/50",affirmative:"bg-affirmative-primary text-affirmative-primary-foreground hover:opacity-80 shadow-black/50",accept:"bg-blue-700 text-white hover:bg-blue-800 disabled:opacity-50",decline:"bg-background hover:bg-muted disabled:opacity-50",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-muted-hover",ghost:"hover:bg-accent",link:"text-primary underline-offset-4 hover:underline",hotkey:"hover:bg-background text-primary",twilight:"bg-brand-twilight-primary text-affirmative-primary-foreground hover:opacity-80 shadow-black/50","twilight-muted":"bg-brand-twilight text-foreground hover:opacity-80 shadow-black/50",input:"border border-input bg-background font-normal hover:bg-secondary"},size:{default:"h-8 rounded-md px-4 py-2",defaultNarrow:"h-8 rounded-md px-[11px] py-2",sm:"h-7 rounded-md px-3 py-2 gap-1.5",lg:"h-11 rounded-md px-8",xl:"h-16 rounded-md px-12 text-lg",icon:"h-10 w-10","icon-md":"h-8 w-8 [&>svg]:size-4","icon-sm":"h-7 px-1 rounded-md py-1 aspect-square [&>svg]:size-3.5","icon-xs":"h-6  rounded-md aspect-square [&>svg]:size-3","mobile-round":"h-10 w-10 rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:l,size:i,asChild:c=!1,children:u,loading:p,disabled:m,...g}=e,f=c?n.DX:"button";return(0,a.jsx)(f,{className:(0,s.cn)(d({variant:l,size:i,className:r})),ref:t,...g,disabled:m||p,children:p?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.y,{size:"small"}),u]}):u})});c.displayName="Button"},52873:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>s,wL:()=>u});var a=r(77145),n=r(95661),l=r(56024);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col gap-6 rounded-lg border bg-card p-6 shadow-sm",r),...n})});i.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5",r),...n})});s.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("font-medium leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("gap-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center pt-0",r),...n})});u.displayName="CardFooter"},53384:(e,t,r)=>{"use strict";r.d(t,{s:()=>h});var a=r(77145),n=r(92912),l=r(49974),i=r(40488),s=r(39528),o=r(30849),d=r(46753),c=r.n(d),u=r(52811),p=r(52873),m=r(56024);let g=()=>(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(p.Zp,{className:(0,m.cn)("w-full max-w-[360px] rounded-xl border-input bg-transparent p-6 sm:max-w-none"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)(p.ZB,{className:"text-lg font-medium",children:"Security and Compliance"}),(0,a.jsx)(p.BT,{className:"text-sm",children:"Enterprise-grade security and compliance certifications"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center sm:justify-start",children:(0,a.jsx)("div",{className:"flex h-[100px] items-center justify-center overflow-hidden",children:(0,a.jsx)(o.default,{src:"/img/security/industry-recognized-security.png",alt:"Security certifications: ISO 27001, GDPR, SOC 2 Type II",width:300,height:75,className:"h-auto w-full max-w-[240px]"})})})]}),(0,a.jsx)(u.$,{asChild:!0,variant:"outline",size:"lg",className:"w-full bg-transparent px-8 sm:w-auto sm:shrink-0 lg:min-w-[180px]",children:(0,a.jsx)(c(),{href:"https://lovable.dev/security",target:"_blank",rel:"noopener noreferrer",children:"Learn more"})})]})})}),f=()=>(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(p.Zp,{className:(0,m.cn)("w-full max-w-[360px] rounded-xl border-input bg-transparent sm:max-w-none"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)(p.ZB,{className:"text-lg font-medium",children:"Student discount"}),(0,a.jsx)(p.BT,{className:"text-sm",children:"Verify student status and get access to up to 50% off Lovable Pro."})]}),(0,a.jsx)(u.$,{asChild:!0,variant:"outline",size:"lg",className:"w-full bg-transparent px-8 sm:w-auto sm:shrink-0 lg:min-w-[180px]",children:(0,a.jsx)(c(),{href:"/students",target:"_blank",rel:"noopener noreferrer",children:"Learn more"})})]})})}),h=e=>{let{className:t,showStudentDiscountCard:r}=e,{pricingScenario:o}=(0,l.et)();return n.Ay.capture(s.aw.PLAN_VIEWED,{plan_context:o}),(0,a.jsxs)(i.ZL,{className:t,suffix:(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(f,{}),(0,a.jsx)(g,{})]}),children:[(0,a.jsx)(i.ZL.Free,{}),(0,a.jsx)(i.ZL.Ktlo,{}),(0,a.jsx)(i.ZL.Scheduled,{}),(0,a.jsx)(i.ZL.Pro,{}),(0,a.jsx)(i.ZL.Biz,{}),(0,a.jsx)(i.ZL.Enterprise,{})]})}},54436:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});let a=e=>{if("undefined"==typeof document)return;let t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var r;return null==(r=t.pop())?void 0:r.split(";").shift()}}},54557:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});var a=r(72632);function n(e){let{currentPlan:t,targetPlanCategory:r}=e,n=(0,a.m6)(t.id)===r;if(!["pro","biz"].includes(r))throw Error("Target plan category must be pro or biz");return n?(0,a.yQ)(t.id,r):(0,a.Bq)(t.id,r)}},58295:(e,t,r)=>{"use strict";r.d(t,{Bc:()=>s,PR:()=>u,ZI:()=>c,k$:()=>d,m_:()=>o});var a=r(77145),n=r(54600),l=r(95661),i=r(56024);let s=e=>{let{instant:t,delayDuration:r,skipDelayDuration:l=550,...i}=e;return(0,a.jsx)(n.Kq,{delayDuration:null!=r?r:700*!t,skipDelayDuration:l,...i})},o=e=>{let{instant:t,delayDuration:r,...l}=e;return(0,a.jsx)(n.bL,{delayDuration:null!=r?r:700*!t,...l})},d=n.l9,c=l.forwardRef((e,t)=>{let{className:r,sideOffset:l=4,...s}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:t,sideOffset:l,className:(0,i.cn)("z-[10000] overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground shadow-md","data-[state=delayed-open]:animate-in data-[state=delayed-open]:fade-in-0 data-[state=delayed-open]:zoom-in-95","data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2 data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2 data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2 data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2","data-[state=instant-open]:animate-in data-[state=instant-open]:fade-in-0","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",r),...s})})});c.displayName=n.UC.displayName;let u=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.i3,{ref:t,className:(0,i.cn)("fill-primary",r),...l})});u.displayName=n.i3.displayName},63424:(e,t,r)=>{"use strict";r.d(t,{IJ:()=>d,bT:()=>c,bY:()=>m});var a=r(77145),n=r(95661),l=r(58295),i=r(87252);let s={GAP_SCALE_FACTOR:.002,MIN_GAP_WIDTH:2,MIN_INDICATOR_WIDTH:7,PROGRESS_BAR_HEIGHT:11,FALLBACK_MIN_WIDTH_PERCENTAGE:2},o=["bg-blue-800","bg-blue-600","bg-blue-400","bg-blue-200","bg-blue-50"],d=(e,t)=>(0,n.useMemo)(()=>((e,t)=>{if(!e)return"bg-muted-foreground";let r=t.findIndex(t=>t.name===e);return -1===r?"bg-muted-foreground":o[Math.min(r,o.length-1)]})(e,t),[e,t]),c=e=>{switch(e){case"daily":return"Daily credits used first";case"rollover":return"Using rollover credits";case"billing":return"Using monthly credits";case"granted":return"Using bonus credits";case null:return"You are out of credits"}},u={granted:"Bonus",billing:"Monthly",rollover:"Rollover",daily:"Daily"},p=e=>u[e],m=e=>{let{progressData:t}=e,r=(0,n.useRef)(null),[d,c]=(0,n.useState)(0);(0,n.useLayoutEffect)(()=>{let e=()=>{r.current&&c(r.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let u=Math.max(s.MIN_GAP_WIDTH,d*s.GAP_SCALE_FACTOR),m=s.MIN_INDICATOR_WIDTH,g=(0,n.useMemo)(()=>t.hasCredits?t.sources.map((e,r)=>{let a=Math.max(t.totalAllocation>0?e.remaining/t.totalAllocation*100:0,d>0?m/d*100:s.FALLBACK_MIN_WIDTH_PERCENTAGE),n=r===t.sources.length-1,l=o[Math.min(r,o.length-1)];return{...e,widthPercentage:a,isFirst:0===r,isLast:n,colorClass:l}}):[],[t.hasCredits,t.sources,t.totalAllocation,d,m]),f=(0,n.useMemo)(()=>{if(!t.hasCredits||0===g.length)return[];let e=d>0?u/d*100:.4,r=Math.max(0,g.length-1)*e,a=g.reduce((e,t)=>e+t.widthPercentage,0)+r,n=a>100?100/a:1,l=e*n,i=0;return g.map(e=>{let t=e.widthPercentage*n,r=i;return i+=t+(e.isLast?0:l),{...e,widthPercentage:t,leftOffset:r}})},[t.hasCredits,g,d,u]);return t.hasCredits?(0,a.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,a.jsx)("div",{ref:r,className:"relative flex-1 overflow-hidden rounded-lg bg-muted-active",style:{height:"".concat(s.PROGRESS_BAR_HEIGHT,"px")},children:f.map(e=>(0,a.jsxs)(l.m_,{delayDuration:0,children:[(0,a.jsx)(l.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"absolute h-full cursor-pointer ".concat(e.colorClass," transition-all ").concat(e.isFirst?"rounded-bl-lg rounded-tl-lg":""," ").concat(e.isLast?"rounded-br-lg rounded-tr-lg":""),style:{left:"".concat(e.leftOffset,"%"),width:"".concat(e.widthPercentage,"%")}})}),(0,a.jsx)(l.ZI,{className:"border border-gray-200 bg-white shadow-lg",children:(0,a.jsx)("div",{className:"justify-center text-xs font-normal leading-none text-black",children:"granted"===e.name?"".concat((0,i.Q)(e.remaining)," ").concat(p(e.name)," credits"):"".concat((0,i.Q)(e.remaining),"/").concat((0,i.Q)(e.limit)," ").concat(p(e.name)," credits")})})]},e.name))})}):(0,a.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,a.jsx)("div",{className:"relative h-2.5 flex-1 overflow-hidden rounded-lg bg-muted-active"})})}},64482:(e,t,r)=>{"use strict";r.d(t,{H:()=>s,f:()=>i});var a=r(95661),n=r(83220),l=r(8904);let i=()=>{let e=(0,n.j4)(e=>e.currentWorkspace);return(0,a.useMemo)(()=>{var t;return!!(null==e||null==(t=e.experimental_features)?void 0:t.lovable_cloud)},[e])},s=e=>{let{supabaseIntegrationData:t}=(0,l.U)(null==e?void 0:e.id);return(0,a.useMemo)(()=>!!e&&!!t&&!!t.is_managed_by_lovable,[t,e])}},67844:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var a=r(77145),n=r(29485);r(95661);var l=r(56024);let i=(0,n.F)("inline-flex items-center text-center rounded-sm px-2 py-1 text-xs font-medium leading-tight transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",accent:"border-transparent bg-accent text-accent-foreground hover:bg-accent/80",affirmative:"border-transparent bg-affirmative text-affirmative-foreground hover:bg-affirmative/80",outline:"text-foreground border border-border","brand-bubblegum":"bg-brand-bubblegum text-brand-bubblegum-foreground hover:bg-brand-bubblegum/80","brand-tiger":"bg-brand-tiger text-brand-tiger-foreground hover:bg-brand-tiger/80","brand-saffron":"bg-brand-saffron text-brand-saffron-foreground hover:bg-brand-saffron/80","brand-sapphire":"bg-brand-sapphire text-brand-sapphire-foreground hover:bg-brand-sapphire/80","brand-twilight":"bg-brand-twilight text-brand-twilight-foreground hover:bg-brand-twilight/80","brand-flamingo":"bg-brand-flamingo text-brand-flamingo-foreground hover:bg-brand-flamingo/80"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:r}),t),...n})}},69994:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var a=r(43610),n=r(53792),l=r(72632),i=r(87252);let s=e=>e?"string"==typeof e?new Date(e):e.toDate():null,o=e=>{var t,r;let{billingPeriodCreditLimit:o,billingPeriodCreditsUsed:d,dailyCreditLimit:c,dailyCreditsUsed:u,bonusCredits:p,billingPeriodEndDate:m,totalCreditsUsedInBillingPeriod:g}=(0,a.$)(e),f=(null==e?void 0:e.plan)==="free"?Math.max(0,Math.min(n.le-(null!=g?g:0),null!=c?c:0)):null!=c?c:0,h={granted:(0,i.V)(null!=p?p:0),billing:(0,i.V)(null!=o?o:0),rollover:(0,i.V)(null!=(t=null==e?void 0:e.rollover_credits_limit)?t:0),daily:(0,i.V)(f)},x={granted:0,billing:(0,i.V)(Math.min(null!=d?d:0,h.billing)),rollover:(0,i.V)(Math.min(null!=(r=null==e?void 0:e.rollover_credits_used)?r:0,h.rollover)),daily:(0,i.V)(Math.min(null!=u?u:0,h.daily))},_=(e=>{if(!e)return!1;let{isLegacyPlan:t}=(0,l.cb)(e.plan),r="ambassador"===e.plan,a="ktlo"===e.plan;return(t||r||a)&&(0===e.billing_period_credits_limit||void 0===e.billing_period_credits_limit)})(e),b={granted:(0,i.V)(h.granted-x.granted),billing:_?0:(0,i.V)(h.billing-x.billing),rollover:(0,i.V)(h.rollover-x.rollover),daily:(0,i.V)(h.daily-x.daily)},v=(0,i.V)(b.granted+b.billing+b.rollover+b.daily),w=(0,i.V)(x.billing+x.rollover+x.daily),E=(0,i.V)(_?h.granted+h.rollover+h.daily:h.granted+h.billing+h.rollover+h.daily),y=[{name:"granted",remaining:b.granted,limit:h.granted},{name:"billing",remaining:b.billing,limit:h.billing},{name:"rollover",remaining:b.rollover,limit:h.rollover},{name:"daily",remaining:b.daily,limit:h.daily}].filter(e=>e.remaining>0);return{totalRemaining:v,totalAllocation:E,totalUsed:w,sources:y,hasCredits:E>0,currentlyConsuming:b.daily>0?"daily":b.rollover>0?"rollover":b.billing>0?"billing":b.granted>0?"granted":null,billingPeriodEndDate:m,creditsResetDate:(e=>{if(!e)return null;if("annual"===e.plan_type){let t=s(e.last_rollover_period||e.billing_period_start_date||e.billing_period_end_date);if(t){let e=t.getMonth()+1,r=t.getFullYear(),a=t.getDate(),n=new Date(r,e+1,0).getDate();return new Date(r,e,Math.min(a,n))}return null}return e.billing_period_end_date?s(e.billing_period_end_date):null})(e),totalCreditsUsedInBillingPeriod:null!=g?g:0}}},73726:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,V:()=>i});var a=r(77145);r(95661);var n=r(69730),l=r(58295);let i=e=>{let{name:t="question_circle",children:r,size:i="small",delay:s,tooltipContentClassName:o,...d}=e;return(0,a.jsxs)(l.m_,{delayDuration:s,children:[(0,a.jsx)(l.k$,{asChild:!0,children:(0,a.jsx)(n.I,{name:t,size:i,...d})}),(0,a.jsx)(l.ZI,{className:o,children:r})]})},s=i},76449:(e,t,r)=>{"use strict";r.d(t,{F:()=>d});var a=r(77145),n=r(29485);r(95661);var l=r(56024),i=r(98324),s=r.n(i);let o=(0,n.F)("",{variants:{variant:{default:s().shimmerText,success:s().shimmerTextSuccess}},defaultVariants:{variant:"default"}}),d=e=>{let{children:t,className:r,isShimmering:n=!1,variant:i,...s}=e;return(0,a.jsx)("span",{className:(0,l.cn)(r,n&&o({variant:i})),...s,children:t})}},77563:(e,t,r)=>{"use strict";r.d(t,{Label:()=>d});var a=r(77145),n=r(25529),l=r(29485),i=r(95661),s=r(56024);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,s.cn)(o(),r),...l})});d.displayName=n.b.displayName},81635:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(77145),n=r(53827),l=r(95661),i=r(56024);let s=l.forwardRef((e,t)=>{let{className:r,thumbClassName:l,size:s="default",...o}=e;return(0,a.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50","sm"===s&&"h-4 w-7","lg"===s&&"h-6 w-11",r),...o,ref:t,children:(0,a.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 dark:data-[state=unchecked]:bg-foreground","sm"===s&&"h-3 w-3 data-[state=checked]:translate-x-3","lg"===s&&"h-5 w-5 data-[state=checked]:translate-x-5",l)})})});s.displayName=n.bL.displayName},83022:(e,t,r)=>{"use strict";r.d(t,{O:()=>d});var a=r(77145),n=r(46753),l=r.n(n),i=r(95290),s=r(52811),o=r(19695);let d=e=>{let{type:t,variant:r,onClick:n,href:d,isExternal:c,text:u,showTooltip:p,tooltipContent:m,disabled:g,loading:f}=e;return"link"===t?(0,a.jsx)(s.$,{variant:r,asChild:!0,onClick:n,className:c?"h-9 w-full whitespace-nowrap":"h-9",children:(0,a.jsx)(l(),{href:d,passHref:!0,target:c?"_blank":void 0,children:u})}):(0,a.jsx)(o.Q,{showTooltip:p||!1,tooltipContent:m||"",delayDuration:300,children:(0,a.jsx)(i.oO,{onClick:n,variant:r,disabled:g,loading:f,className:"h-9",children:u})})}},83220:(e,t,r)=>{"use strict";r.d(t,{cA:()=>j,zC:()=>A,Dx:()=>N,j4:()=>P,QY:()=>I,nu:()=>D,Ic:()=>S});var a=r(77145),n=r(18502),l=r(13410),i=r(95661),s=r(31088),o=r(84510),d=r(40702),c=r(28717),u=r(92034),p=r(56455),m=r(19620),g=r(99989),f=r(49493),h=r(87299),x=r(6698),_=r(83473),b=r(63851),v=r(69850),w=r(49974),E=r(91169),y=r(45756);let C=(0,i.createContext)(null);function j(e){var t,r,j,N;let k,{children:P,initialWorkspaceId:D}=e,{allWorkspaces:I,isLoading:S}=(0,f.Mu)(e=>({allWorkspaces:e.workspaces,isLoading:e.isLoading})),A=null!=(t=null==I?void 0:I[0])?t:null,L=(0,i.useRef)((0,o.vt)(e=>({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1,projectId:null,projectWorkspaceId:null,currentUserSelectedWorkspaceId:null,setProjectWorkspaceOverride:(t,r)=>e({projectId:t,projectWorkspaceId:r}),clearProjectWorkspaceOverride:()=>e({projectId:null,projectWorkspaceId:null}),setCurrentUserSelectedWorkspaceId:t=>e({currentUserSelectedWorkspaceId:t})}))),T=L.current,R=T(e=>e.projectId),O=T(e=>e.projectWorkspaceId),M=!!R&&!!O,F=T(e=>e.currentUserSelectedWorkspaceId),K=(0,p.dA)(e=>e.active),{authUser:U}=(0,d.Z2)(),{userData:W}=(0,c.ur)(),G=(0,l.useRouter)(),B=(0,l.usePathname)(),V=(0,l.useSearchParams)(),z=V.get("workspaceId"),H=(k=null!=(r=null==U?void 0:U.uid)?r:"","".concat("lovable-current-workspace-id","-").concat(k)),[Y,Z]=(0,i.useState)(D),$=M?O:Y,q=(0,i.useCallback)(e=>{if(M)return void m.logging.debug("Cannot change workspace in project context",{newId:e});Z(e),T.getState().setCurrentUserSelectedWorkspaceId(e);try{e?window.localStorage.setItem(H,e):window.localStorage.removeItem(H)}catch(t){m.logging.debug("Error setting current workspace id to localstorage",{error:t,newId:e})}},[H,M,T]),J=(0,i.useCallback)(()=>{let e=new URLSearchParams(V);e.delete("workspace");let t=e.toString(),r=window.location.hash,a="".concat(B).concat(t?"?".concat(t):"").concat(r);G.replace(a,{scroll:!1})},[G,B,V]),Q=(0,i.useRef)(!1);(0,i.useEffect)(()=>{M||U&&!S&&(()=>{if(Q.current){!Y&&(null==A?void 0:A.id)&&q(A.id);return}if(D&&I){if(I.some(e=>e.id===D)){q(D),J(),Q.current=!0;return}s.toast.error("The workspace you're trying to access is not available"),J()}try{let e=window.localStorage.getItem(H);if(e&&I&&I.some(t=>t.id===e)){q(e),Q.current=!0;return}}catch(e){m.logging.debug("Error getting current workspace id from localstorage",{error:e})}if(null==A?void 0:A.id){q(A.id),Q.current=!0;return}q(null),Q.current=!0})()},[U,I,S,D,null==A?void 0:A.id,Y,H,q,J,M]);let{data:X,isLoading:ee,isError:et}=(0,n.I)({...g.y.detail({workspaceId:null!=$?$:"",projectId:M?R:void 0}),enabled:!!$&&!K});!et||K||M||q(null!=(j=null==A?void 0:A.id)?j:null);let{data:er}=(0,n.I)({...g.y.detail({workspaceId:null!=z?z:"",projectId:void 0}),enabled:!M&&!!z});!function(e){let{authUser:t,currentWorkspaceId:r,userData:a,isLoadingAllWorkspaces:n,currentWorkspace:l,isProjectScoped:s}=e,[o,d]=(0,i.useState)(!1),{toCheckout:c}=(0,E.R)(),u=(0,i.useCallback)(async()=>{if((null==t?void 0:t.uid)&&r&&!o)try{let e=localStorage.getItem(w.LS);if(!e)return;let t=JSON.parse(e),a=Date.now()-t.timestamp;if(localStorage.removeItem(w.LS),a>36e5)return;d(!0),await c({plan:t.planId,workspaceId:r})}catch(e){m.logging.error("Error processing pending plan selection",{error:e,userId:null==t?void 0:t.uid,workspaceId:r}),localStorage.removeItem(w.LS)}},[null==t?void 0:t.uid,r,o,c]);(0,i.useEffect)(()=>{s||!t||!r||n||o||(null==a?void 0:a.segmentation_form_status)!==y.C.SUBMITTED||(null==l?void 0:l.plan)==="free"&&u()},[s,t,null==l?void 0:l.plan,r,n,o,u,null==a?void 0:a.segmentation_form_status])}({authUser:U,currentWorkspaceId:Y,userData:null!=W?W:null,isLoadingAllWorkspaces:S,currentWorkspace:null!=(N=null==X?void 0:X.workspace)?N:null,isProjectScoped:M}),function(e){let{allWorkspaces:t,isLoadingAllWorkspaces:r,workspaceDataForUnacceptedInvites:a,setCurrentWorkspaceId:n,authUser:o,isProjectScoped:d}=e,c=(0,l.useRouter)(),u=(0,l.usePathname)(),p=(0,l.useSearchParams)(),m=(0,i.useRef)(new Set),g=p.get("workspaceId"),{store:w}=(0,f.k9)(),E=(0,h.jE)(),y=(0,i.useCallback)(()=>{let e=new URLSearchParams(p);e.delete("workspaceId"),c.replace("".concat(u,"?").concat(e.toString()),{scroll:!1})},[c,u,p]),{mutate:C}=(0,x.n)({mutationFn:async e=>{let t=(0,b.getGoApi)();return await t.put("/user/workspaces/".concat(e.id,"/accept-invite")),e},onSuccess:e=>{n(e.id),y(),m.current.has(e.id)||(s.toast.success(e.name?'Switched to "'.concat(e.name,'" workspace'):"Switched to workspace"),null==w||w.setState({workspaces:[...t,e]})),m.current.add(e.id)},onError:(e,t)=>{m.current.has(t.id)||(y(),m.current.add(t.id),(0,_.Ni)(e))},onSettled:()=>{E.invalidateQueries({queryKey:v.workspaceKeys.all})},retry:!1});(0,i.useEffect)(()=>{if(!d){if(g&&!o&&!r)return void c.replace("/login");g&&!r&&(null==a?void 0:a.workspace)&&!m.current.has(a.workspace.id)&&C(a.workspace)}},[d,C,r,null==a?void 0:a.workspace,g,o,c,u,p])}({allWorkspaces:I,isLoadingAllWorkspaces:S,authUser:U,workspaceDataForUnacceptedInvites:null!=er?er:{workspace:null},setCurrentWorkspaceId:q,isProjectScoped:M}),(0,i.useEffect)(()=>{var e,t;L.current.setState({currentWorkspace:null!=(e=null==X?void 0:X.workspace)?e:null,membership:null!=(t=null==X?void 0:X.current_member)?t:null})},[null==X?void 0:X.workspace,null==X?void 0:X.current_member]),(0,i.useEffect)(()=>{L.current.setState({hasFetchedCurrentWorkspace:!ee})},[ee]),(0,i.useEffect)(()=>{U||(L.current.setState({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1}),Q.current=!1)},[U]);let ea=(0,u.O)();(0,i.useEffect)(()=>(M?null==ea||ea.setProjectWorkspaceId(null!=$?$:null):null==ea||ea.setCurrentWorkspaceId(null!=Y?Y:null),()=>{M?null==ea||ea.setProjectWorkspaceId(null):null==ea||ea.setCurrentWorkspaceId(null)}),[Y,$,ea,M]);let en=(0,i.useMemo)(()=>({store:L.current,setCurrentWorkspaceId:M?()=>{}:q,currentWorkspaceId:M?O:Y,currentUserSelectedWorkspaceId:F,isProjectScoped:M}),[L.current,M,Y,F,q]);return(0,a.jsx)(C.Provider,{value:en,children:P})}function N(){let e=(0,i.useContext)(C);if(!e)throw Error("useCurrentWorkspaceContext must be used within a CurrentWorkspaceProvider");return e}function k(){return(0,i.useContext)(C)}function P(e){let{store:t}=N();if(!t)throw Error("useCurrentWorkspaceStore must be used within a CurrentWorkspaceProvider");return t(e)}function D(e){let t=k(),r=null==t?void 0:t.store;return r?r(e):null}function I(){var e;let t=k();return null!=(e=null==t?void 0:t.isProjectScoped)&&e}function S(){let{store:e}=N();if(!e)throw Error("useSetProjectWorkspaceOverride must be used within a CurrentWorkspaceProvider");return e.getState().setProjectWorkspaceOverride}function A(){let{store:e}=N();if(!e)throw Error("useClearProjectWorkspaceOverride must be used within a CurrentWorkspaceProvider");return e.getState().clearProjectWorkspaceOverride}},87252:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o,V:()=>s});let a={MAX_DISPLAY_DECIMAL_PLACES:1},n=a.MAX_DISPLAY_DECIMAL_PLACES+1,l=Math.pow(10,a.MAX_DISPLAY_DECIMAL_PLACES),i=Math.pow(10,n),s=e=>Number.isFinite(e)?Math.round(e*i)/i:0,o=e=>{if(!Number.isFinite(e)||e<0)return"0";let t=Math.round(e*l)/l;return t===Math.floor(t)?t.toLocaleString():t.toLocaleString(void 0,{minimumFractionDigits:a.MAX_DISPLAY_DECIMAL_PLACES,maximumFractionDigits:a.MAX_DISPLAY_DECIMAL_PLACES})}},89931:(e,t,r)=>{"use strict";r.d(t,{F8:()=>l,JC:()=>o,ay:()=>s,ki:()=>i});var a=r(8974),n=r(97543);function l(e){return{absolute:(0,a.GP)(e,"h:mm a"),relative:(0,a.GP)(e,"h:mm a")}}function i(e){let t=!(0,n.e)(e),r="MMM d";return t&&(r+=", yyyy"),r+=", h:mm a",{absolute:(0,a.GP)(e,r),relative:(0,a.GP)(e,r)}}function s(e){return"string"==typeof e?new Date(e):e.toDate()}function o(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd MMM HH:mm",n=(0,a.GP)(e,r),l=Intl.DateTimeFormat().resolvedOptions().timeZone,i=(null==(t=new Intl.DateTimeFormat(void 0,{timeZoneName:"short",timeZone:l}).formatToParts(e).find(e=>"timeZoneName"===e.type))?void 0:t.value)||l;return"".concat(n," ").concat(i)}},91169:(e,t,r)=>{"use strict";r.d(t,{R:()=>y,d:()=>C});var a=r(77145),n=r(6698),l=r(13410),i=r(92912),s=r(95661),o=r(31088),d=r(24500),c=r(83473),u=r(63851),p=r(19620),m=r(39528),g=r(72632),f=r(21227);let h="settings",x="change_type",_="billing",b="plan_id",v="plan_type",w="redirect",E=(0,s.createContext)(void 0),y=()=>{let e=(0,s.useContext)(E);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},C=e=>{let{children:t}=e,[r,y]=(0,s.useState)(!1),[C,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[P,D]=(0,s.useState)(!1),I=(0,l.useSearchParams)().get("checkoutCode")||void 0,S=(0,n.n)({mutationFn:async e=>{var t;let{plan:r,workspaceId:a,grandfatheredDiscount:n=!1,planType:l="monthly",changeType:i,useStudentDiscount:s=!1}=e;y(r);let o=new URL(window.location.href),d=(e=>{let{currentUrl:t,planId:r,changeType:a}=e,n=new URL(t);return n.searchParams.set("payment_status","failed"),n.searchParams.set(b,r),a&&n.searchParams.set(x,a),n.toString()})({currentUrl:o,planId:r,changeType:i}),c=(e=>{let{currentUrl:t,planId:r,planType:a,changeType:n}=e,l=new URL("".concat(window.location.origin).concat("/purchase-success"));if("/profile/plans"===window.location.pathname)l.searchParams.set(w,window.location.origin);else{let e=new URL(t);t.searchParams.has(h)&&t.searchParams.get(h)===_&&e.searchParams.set(h,_),n&&e.searchParams.set(x,n),e.searchParams.set(v,a),l.searchParams.set(w,e.toString())}return l.searchParams.set(b,r),l.searchParams.set(v,a),l.toString()})({currentUrl:o,planId:r,planType:l,changeType:i}),p=(0,g.h5)(r,l),m=(0,f.D)(),E={price_lookup_key:p,quantity:1,cancel_url:d,success_url:c,client_reference_id:null==(t=window.Rewardful)?void 0:t.referral,workspace_id:a,with_discount:n,coupon_code:I,use_student_discount:s,tracking_data:m};return(0,u.getGoApi)().post("/workspaces/".concat(a,"/stripe/checkout"),E)},onSuccess:e=>{window.location.assign(e.url)},onMutate:e=>{let{plan:t}=e;y(t),i.Ay.capture(m.nA.CREDIT_PLAN_CHECKOUT_CLICKED,{coupon_code:I,new_plan:t})},onError:e=>{p.logging.error("error_creating_checkout_session",{error:e}),(0,c.Ni)(e)},onSettled:()=>{y(!1)}}),A=async e=>{let{plan:t,workspaceId:r,grandfatheredDiscount:a=!1,planType:n="monthly",changeType:l,useStudentDiscount:i=!1}=e;try{await S.mutateAsync({plan:t,workspaceId:r,grandfatheredDiscount:a,planType:n,changeType:l,useStudentDiscount:i})}catch(e){}},L=async e=>{let{workspaceId:t}=e;try{j(!0);let e=(0,u.getGoApi)(),r=await e.post("/workspaces/".concat(t,"/stripe/portal-session"),{return_url:window.location.href});window.location.assign(r.url)}catch(e){e instanceof d.L&&"network_error"===e.type&&o.toast.error("Network error: Please check your internet connection and try again."),p.logging.error("error_creating_portal_session",{error:e})}finally{j(!1)}},T=async e=>{let{workspaceId:t}=e;try{k(!0);let e=(0,u.getGoApi)();await e.post("/workspaces/".concat(t,"/stripe/cancel-subscription")),o.toast.success("Subscription canceled successfully",{description:"Your subscription will remain active until the end of your current billing period."})}catch(e){(0,c.Ni)(e)}finally{k(!1)}},R=async e=>{let{workspaceId:t}=e;try{D(!0);let e=(0,u.getGoApi)();await e.post("/workspaces/".concat(t,"/stripe/cancel-changes")),o.toast.success("Subscription changes canceled successfully",{description:"Any pending subscription changes have been canceled."})}catch(e){(0,c.Ni)(e)}finally{D(!1)}};return(0,a.jsx)(E.Provider,{value:{checkoutLoading:r,isCreatePortalSessionLoading:C,isCancelSubscriptionLoading:N,isCancelSubscriptionChangesLoading:P,toCheckout:A,createPortalSession:L,cancelSubscription:T,cancelSubscriptionChanges:R},children:t})}},92034:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,O:()=>d});var a=r(77145),n=r(92912),l=r(95661),i=r(84510);let s=(0,l.createContext)(null),o=e=>{let{children:t}=e,r=(0,l.useRef)((0,i.vt)(()=>({projectWorkspaceId:null,currentWorkspaceId:null}))),o=(0,l.useCallback)(()=>{let{projectWorkspaceId:e,currentWorkspaceId:t}=r.current.getState();n.Ay.group("workspace",e||t||"none"),n.Ay.reloadFeatureFlags()},[]),d=(0,l.useCallback)(e=>{r.current.setState({projectWorkspaceId:e}),o()},[o]),c=(0,l.useCallback)(e=>{r.current.setState({currentWorkspaceId:e}),o()},[o]),u={store:r.current,setProjectWorkspaceId:d,setCurrentWorkspaceId:c};return(0,a.jsx)(s.Provider,{value:u,children:t})};function d(){let e=(0,l.useContext)(s);if(!e)throw Error("usePostHogGroupContext must be used within a PostHogGroupProvider");return e}},95290:(e,t,r)=>{"use strict";r.d(t,{Mt:()=>u,kp:()=>g,oO:()=>p,vi:()=>m});var a=r(77145),n=r(95661),l=r(76449),i=r(67844),s=r(52811),o=r(69730),d=r(72632),c=r(56024);let u=e=>{let{name:t,title:r,plan:n,planType:s,description:o,discountedPrice:u,children:p,savingsAmount:m,showSavingsAsPercentage:g=!1,hidePrice:f=!1,isPopular:h=!1,customPriceLabel:x,priceSuffix:_,isScheduled:b,className:v,highlighted:w,priceSubtitle:E}=e,y=(0,d.jL)({id:n,type:s});return(0,a.jsxs)("div",{className:(0,c.cn)("flex h-full w-full max-w-[360px] flex-col gap-4 rounded-xl border border-muted-border p-4 pb-6 sm:max-w-none lg:max-w-[280px]",{"bg-muted":h},{"border-brand-twilight-primary bg-brand-twilight-primary/10":w},v),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,a.jsx)("p",{className:"text-xl font-medium",children:t}),(0,a.jsx)("div",{className:"min-h-11 text-sm text-foreground lg:min-h-16",children:r})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:(0,c.cn)("flex items-baseline",{invisible:f}),children:x?(0,a.jsx)("span",{className:"flex min-h-11 items-center text-base tabular-nums text-muted-foreground",children:x}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex min-h-11 items-center gap-2",children:[(0,a.jsxs)("p",{className:(0,c.cn)("text-3xl font-medium tabular-nums",u&&"text-muted-foreground line-through"),children:["$",y]}),u&&(0,a.jsxs)("p",{className:"px-1 text-3xl font-medium tabular-nums",children:["$",u]}),(0,a.jsx)("p",{className:"text-base text-muted-foreground",children:null!=_?_:"per month"})]})})}),E&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:E})]}),(0,a.jsx)("div",{className:"-mx-4 flex h-16 items-center border-y border-muted-border px-4 py-2",children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:["string"==typeof o?(0,a.jsx)("p",{className:"flex-1 text-sm text-muted-foreground",children:o}):(0,a.jsx)("div",{className:"flex-1",children:o}),m&&"Coming soon"!==o&&!b&&m>0&&(0,a.jsx)(i.E,{variant:"success",className:"rounded-full bg-success",children:(0,a.jsx)(l.F,{isShimmering:!0,variant:"success",className:(0,c.cn)("flex min-h-8 flex-col justify-center text-base font-normal text-success-foreground","md:text-sm xl:text-base",{"md:text-xs":m>=100}),children:(0,a.jsx)("div",{className:"text-center",children:g?"Save ".concat(m,"%"):"Save $".concat(m.toLocaleString())})})})]})}),p]})},p=e=>{let{children:t,onClick:r,className:l,...i}=e,[o,d]=(0,n.useState)(!1),u=async()=>{d(!0),await (null==r?void 0:r()),d(!1)};return(0,a.jsx)(s.$,{onClick:u,...i,loading:o,className:(0,c.cn)("w-full",l),children:t})},m=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col justify-start gap-2",r),children:t})},g=e=>{let{label:t,features:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-4 text-base md:text-sm",children:r.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(o.A,{name:"check",size:"small",className:"relative top-[2px]"}),(0,a.jsx)("span",{className:"text-foreground",children:e})]},t))})]})}},98324:e=>{e.exports={shimmerText:"ShimmeringText_shimmerText__SMwG_",shimmer:"ShimmeringText_shimmer__1AZHS",shimmerTextSuccess:"ShimmeringText_shimmerTextSuccess__itzB9"}}}]);